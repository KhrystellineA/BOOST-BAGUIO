import{_ as Q,u as S,k,r as c,y as U,o as I,w as l,n as a,a3 as A,a4 as b,p as n,B as g,a1 as p,A as r,Q as w,v as N}from"./index-BNMNkKPK.js";import{Q as C,a as x,b as B,c as V}from"./QTabPanels-DejP8mD5.js";import{Q as P}from"./QForm-BED6u0eC.js";import{Q as L}from"./QPage-DjjICR0a.js";import{u as T}from"./use-quasar-C3LJSxmj.js";import"./QResizeObserver-BGTwnNlz.js";import"./rtl-DFPa-2ov.js";import"./use-panel-BZBftDLR.js";import"./touch-BjYP5sR0.js";import"./selection-61_R8QJt.js";const $={class:"q-pt-sm"},E={class:"text-center q-mt-md"},F={class:"text-caption text-grey-7"},R={class:"q-pt-sm"},D={class:"text-center"},W={__name:"AuthPage",setup(h){const f=S(),d=T(),y=k(),v=c("login"),u=c(!1),i=c(!1),m=c({email:"",password:""}),t=c({displayName:"",email:"",password:"",confirmPassword:""}),q=async()=>{u.value=!0;try{sessionStorage.removeItem("adminRole"),sessionStorage.removeItem("adminData"),sessionStorage.removeItem("adminUid");const o=await y.signIn(m.value.email,m.value.password);o.success?(d.notify({type:"positive",message:"Welcome back!",icon:"check_circle",position:"top"}),f.push("/")):d.notify({type:"negative",message:o.message||"Login failed",icon:"error",position:"top"})}catch(o){console.error("[AuthPage] Login error:",o),d.notify({type:"negative",message:o.message||"Login failed. Please try again.",icon:"error",position:"top"})}finally{u.value=!1}},_=async()=>{u.value=!0;try{sessionStorage.removeItem("adminRole"),sessionStorage.removeItem("adminData"),sessionStorage.removeItem("adminUid");const o=await y.signUp(t.value.email,t.value.password,t.value.displayName);o.success?(d.notify({type:"positive",message:"Account created successfully!",icon:"check_circle",position:"top"}),f.push("/")):d.notify({type:"negative",message:o.message||"Signup failed",icon:"error",position:"top"})}catch(o){console.error("[AuthPage] Signup error:",o),d.notify({type:"negative",message:o.message||"Signup failed. Please try again.",icon:"error",position:"top"})}finally{u.value=!1}};return(o,s)=>(I(),U(L,{class:"flex flex-center bg-page"},{default:l(()=>[a(A,{class:"login-card q-pa-lg",flat:"",bordered:""},{default:l(()=>[a(b,{class:"text-center q-pb-md"},{default:l(()=>[...s[11]||(s[11]=[n("div",{class:"text-h3 text-weight-bold text-primary q-mb-xs"}," Baguio Boost ",-1),n("div",{class:"text-subtitle1 text-grey-7"}," Premium Jeepney Navigation ",-1)])]),_:1}),a(C,{modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=e=>v.value=e),class:"q-mb-md","active-color":"primary","indicator-color":"primary",align:"justify",dense:""},{default:l(()=>[a(x,{name:"login",label:"Login","no-caps":""}),a(x,{name:"signup",label:"Sign Up","no-caps":""})]),_:1},8,["modelValue"]),a(g,{class:"q-mb-md"}),a(B,{modelValue:v.value,"onUpdate:modelValue":s[10]||(s[10]=e=>v.value=e),animated:"","transition-prev":"fade","transition-next":"fade"},{default:l(()=>[a(V,{name:"login",class:"q-px-none"},{default:l(()=>[a(P,{onSubmit:q,class:"q-gutter-md"},{default:l(()=>[a(p,{modelValue:m.value.email,"onUpdate:modelValue":s[1]||(s[1]=e=>m.value.email=e),type:"email",label:"Email Address",outlined:"",dense:"",rules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Invalid email"]},{prepend:l(()=>[a(r,{name:"mail_outline"})]),_:1},8,["modelValue","rules"]),a(p,{modelValue:m.value.password,"onUpdate:modelValue":s[3]||(s[3]=e=>m.value.password=e),type:i.value?"text":"password",label:"Password",outlined:"",dense:"",rules:[e=>!!e||"Password is required"]},{prepend:l(()=>[a(r,{name:"lock_outline"})]),append:l(()=>[a(r,{name:i.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:s[2]||(s[2]=e=>i.value=!i.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),n("div",$,[a(w,{type:"submit",label:"Login",color:"primary",class:"full-width",loading:u.value,unelevated:"","no-caps":""},null,8,["loading"])])]),_:1}),n("div",E,[a(g,{class:"q-mb-sm"}),n("div",F,[s[12]||(s[12]=N(" Admin? ",-1)),n("a",{onClick:s[4]||(s[4]=e=>o.$router.push("/admin/adminlogin")),class:"text-primary cursor-pointer"},"Login here")])])]),_:1}),a(V,{name:"signup",class:"q-px-none"},{default:l(()=>[a(P,{onSubmit:_,class:"q-gutter-md"},{default:l(()=>[a(p,{modelValue:t.value.displayName,"onUpdate:modelValue":s[5]||(s[5]=e=>t.value.displayName=e),label:"Full Name",outlined:"",dense:"",rules:[e=>!!e||"Name is required"]},{prepend:l(()=>[a(r,{name:"person_outline"})]),_:1},8,["modelValue","rules"]),a(p,{modelValue:t.value.email,"onUpdate:modelValue":s[6]||(s[6]=e=>t.value.email=e),type:"email",label:"Email Address",outlined:"",dense:"",rules:[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Invalid email"]},{prepend:l(()=>[a(r,{name:"mail_outline"})]),_:1},8,["modelValue","rules"]),a(p,{modelValue:t.value.password,"onUpdate:modelValue":s[8]||(s[8]=e=>t.value.password=e),type:i.value?"text":"password",label:"Password",outlined:"",dense:"",rules:[e=>!!e||"Password is required",e=>e.length>=6||"Password must be at least 6 characters"]},{prepend:l(()=>[a(r,{name:"lock_outline"})]),append:l(()=>[a(r,{name:i.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:s[7]||(s[7]=e=>i.value=!i.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),a(p,{modelValue:t.value.confirmPassword,"onUpdate:modelValue":s[9]||(s[9]=e=>t.value.confirmPassword=e),type:i.value?"text":"password",label:"Confirm Password",outlined:"",dense:"",rules:[e=>!!e||"Please confirm password",e=>e===t.value.password||"Passwords do not match"]},{prepend:l(()=>[a(r,{name:"lock_outline"})]),_:1},8,["modelValue","type","rules"]),n("div",R,[a(w,{type:"submit",label:"Create Account",color:"primary",class:"full-width",loading:u.value,unelevated:"","no-caps":""},null,8,["loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(g,{class:"q-my-md"}),a(b,{class:"q-py-md"},{default:l(()=>[n("div",D,[a(r,{name:"workspace_premium",color:"amber-7",size:"24px",class:"q-mb-xs"}),s[13]||(s[13]=n("div",{class:"text-body2 text-grey-7"}," Premium features include offline mode & PWA support ",-1))])]),_:1})]),_:1})]),_:1}))}},Z=Q(W,[["__scopeId","data-v-70ccc17b"]]);export{Z as default};
