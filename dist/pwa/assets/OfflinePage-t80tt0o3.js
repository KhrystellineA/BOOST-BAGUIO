import{a0 as P,a1 as R,a2 as w,u as y,o as S,ae as u,a4 as s,a6 as a,a7 as o,a5 as t,a3 as l,af as v,ag as c,ac as f,ad as b,a8 as I,a9 as N,ab as _,aa as h}from"./index-CVLa6XA6.js";import{Q as x}from"./QItemLabel-Dvbuh_ys.js";import{u as B,Q as O,a as k}from"./use-quasar-CiN8XqRT.js";import{Q as V}from"./QList-CPj_Flq7.js";import{Q as $}from"./QPage-C6cDZTbj.js";const E={class:"text-center q-pa-md"},L={key:0,class:"q-mb-lg"},A={key:1,class:"q-mb-lg bg-amber-1 q-pa-md rounded-borders"},D={class:"q-gutter-sm"},U={key:2,class:"q-mt-lg"},z={__name:"OfflinePage",setup(F){const p=R(),i=w(),g=B(),d=y(!1),m=y([]);S(async()=>{i.isPremium&&await Q()});const q=async()=>{d.value=!0;try{await fetch("/ping",{method:"HEAD"}),g.notify({type:"positive",message:"Connection restored!",position:"top"}),p.push("/")}catch{g.notify({type:"negative",message:"Still offline. Please try again.",position:"top"})}finally{d.value=!1}},Q=async()=>{try{const r=localStorage.getItem("cachedRoutes");r&&(m.value=JSON.parse(r))}catch{console.log("Error loading cached routes:")}},C=r=>{p.push(`/route/${r.id}`)};return(r,e)=>(s(),u($,{class:"flex flex-center"},{default:a(()=>[o("div",E,[t(c,{name:"cloud_off",size:"100px",color:"grey-5",class:"q-mb-md"}),e[4]||(e[4]=o("div",{class:"text-h4 text-weight-bold q-mb-sm"}," You're Offline ",-1)),e[5]||(e[5]=o("div",{class:"text-body1 text-grey-7 q-mb-md"}," No internet connection detected ",-1)),f(i).isPremium?(s(),l("div",L,[t(c,{name:"check_circle",color:"positive",class:"q-mr-sm"}),e[1]||(e[1]=o("span",{class:"text-body2"},"Premium offline mode active",-1))])):(s(),l("div",A,[t(c,{name:"info",color:"amber",class:"q-mr-sm"}),e[2]||(e[2]=o("span",{class:"text-body2"},"Upgrade to Premium for full offline access",-1))])),o("div",D,[t(b,{color:"primary",label:"Retry Connection",icon:"refresh",onClick:q,loading:d.value},null,8,["loading"]),f(i).isPremium?(s(),u(b,{key:0,flat:"",color:"primary",label:"View Cached Routes",onClick:e[0]||(e[0]=n=>r.$router.push("/saved-routes"))})):v("",!0)]),f(i).isPremium&&m.value.length>0?(s(),l("div",U,[e[3]||(e[3]=o("div",{class:"text-subtitle2 text-weight-medium q-mb-sm"}," Available Offline Routes ",-1)),t(V,{bordered:"",separator:"",class:"rounded-borders"},{default:a(()=>[(s(!0),l(I,null,N(m.value,n=>(s(),u(O,{key:n.id,clickable:"",onClick:H=>C(n)},{default:a(()=>[t(k,null,{default:a(()=>[t(x,null,{default:a(()=>[_(h(n.name),1)]),_:2},1024),t(x,{caption:""},{default:a(()=>[_(h(n.description),1)]),_:2},1024)]),_:2},1024),t(k,{side:""},{default:a(()=>[t(c,{name:"chevron_right"})]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1})])):v("",!0)])]),_:1}))}},G=P(z,[["__scopeId","data-v-b02365f7"]]);export{G as default};
