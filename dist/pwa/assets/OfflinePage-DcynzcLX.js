import{_ as P,u as w,k as R,r as y,G as S,y as u,o as s,w as o,p as a,n as t,m as l,z as v,A as c,x as f,Q as b,F as I,q as N,v as _,t as x}from"./index-BNMNkKPK.js";import{Q as h}from"./QItemLabel-C7tu81OD.js";import{Q as B,a as k}from"./QItem-DbSoALj4.js";import{Q as O}from"./QList-CPQTSOas.js";import{Q as V}from"./QPage-DjjICR0a.js";import{u as $}from"./use-quasar-C3LJSxmj.js";const A={class:"text-center q-pa-md"},E={key:0,class:"q-mb-lg"},L={key:1,class:"q-mb-lg bg-amber-1 q-pa-md rounded-borders"},z={class:"q-gutter-sm"},D={key:2,class:"q-mt-lg"},F={__name:"OfflinePage",setup(U){const p=w(),i=R(),g=$(),d=y(!1),m=y([]);S(async()=>{i.isPremium&&await Q()});const q=async()=>{d.value=!0;try{await fetch("/ping",{method:"HEAD"}),g.notify({type:"positive",message:"Connection restored!",position:"top"}),p.push("/")}catch{g.notify({type:"negative",message:"Still offline. Please try again.",position:"top"})}finally{d.value=!1}},Q=async()=>{try{const r=localStorage.getItem("cachedRoutes");r&&(m.value=JSON.parse(r))}catch{console.log("Error loading cached routes:")}},C=r=>{p.push(`/route/${r.id}`)};return(r,e)=>(s(),u(V,{class:"flex flex-center"},{default:o(()=>[a("div",A,[t(c,{name:"cloud_off",size:"100px",color:"grey-5",class:"q-mb-md"}),e[4]||(e[4]=a("div",{class:"text-h4 text-weight-bold q-mb-sm"}," You're Offline ",-1)),e[5]||(e[5]=a("div",{class:"text-body1 text-grey-7 q-mb-md"}," No internet connection detected ",-1)),f(i).isPremium?(s(),l("div",E,[t(c,{name:"check_circle",color:"positive",class:"q-mr-sm"}),e[1]||(e[1]=a("span",{class:"text-body2"},"Premium offline mode active",-1))])):(s(),l("div",L,[t(c,{name:"info",color:"amber",class:"q-mr-sm"}),e[2]||(e[2]=a("span",{class:"text-body2"},"Upgrade to Premium for full offline access",-1))])),a("div",z,[t(b,{color:"primary",label:"Retry Connection",icon:"refresh",onClick:q,loading:d.value},null,8,["loading"]),f(i).isPremium?(s(),u(b,{key:0,flat:"",color:"primary",label:"View Cached Routes",onClick:e[0]||(e[0]=n=>r.$router.push("/saved-routes"))})):v("",!0)]),f(i).isPremium&&m.value.length>0?(s(),l("div",D,[e[3]||(e[3]=a("div",{class:"text-subtitle2 text-weight-medium q-mb-sm"}," Available Offline Routes ",-1)),t(O,{bordered:"",separator:"",class:"rounded-borders"},{default:o(()=>[(s(!0),l(I,null,N(m.value,n=>(s(),u(B,{key:n.id,clickable:"",onClick:G=>C(n)},{default:o(()=>[t(k,null,{default:o(()=>[t(h,null,{default:o(()=>[_(x(n.name),1)]),_:2},1024),t(h,{caption:""},{default:o(()=>[_(x(n.description),1)]),_:2},1024)]),_:2},1024),t(k,{side:""},{default:o(()=>[t(c,{name:"chevron_right"})]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1})])):v("",!0)])]),_:1}))}},K=P(F,[["__scopeId","data-v-092504ea"]]);export{K as default};
