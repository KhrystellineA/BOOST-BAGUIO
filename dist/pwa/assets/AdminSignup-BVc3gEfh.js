import{_ as c,y as g,o as f,w as n,p as r,n as a,A as i,v as u,a3 as w,a4 as b,a1 as d,Q as y,B as h,aL as v,a as _,aM as P,J as A,K as D}from"./index-BNMNkKPK.js";import{Q as C}from"./QSelect-C-VaMo7N.js";import{Q as S}from"./QSpinnerHourglass-BIecivnK.js";import{Q as V}from"./QForm-BED6u0eC.js";import{Q as k}from"./QPage-DjjICR0a.js";import{u as Q}from"./use-quasar-C3LJSxmj.js";import"./QChip-DdJtPbRF.js";import"./QItem-DbSoALj4.js";import"./QItemLabel-C7tu81OD.js";import"./QMenu-C81fWRT3.js";import"./position-engine-DFO69afB.js";import"./selection-61_R8QJt.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";const q={name:"BaguioBoostAdminSignup",setup(){return{$q:Q()}},data(){return{formData:{name:"",email:"",role:"",password:"",confirmPassword:""},showPassword:!1,showConfirmPassword:!1,loading:!1,roleOptions:[{label:"Super Admin - Full access to all features",value:"super_admin"},{label:"Route Manager - Manage jeepney routes",value:"route_manager"},{label:"Content Admin - Manage places & events",value:"content_admin"}]}},methods:{async onSubmit(){this.loading=!0;try{const t=this.formData.email.trim().toLowerCase(),e=this.formData.password,{user:l}=await v(_,t,e),m={uid:l.uid,email:t,name:this.formData.name.trim(),role:this.formData.role,isActive:!0,permissions:this.getDefaultPermissions(this.formData.role),createdAt:new Date().toISOString(),createdBy:l.uid,lastLogin:null};await P(A(D,"admins",l.uid),m),sessionStorage.setItem("adminRole",m.role),sessionStorage.setItem("adminData",JSON.stringify(m)),sessionStorage.setItem("adminUid",l.uid),this.$q.notify({type:"positive",message:`Welcome aboard, ${m.name}!`,icon:"check_circle",position:"top",color:"pine-green"}),this.$router.push("/admin/dashboard")}catch(t){console.error("[Admin Signup] Error:",t),this.handleError(t)}finally{this.loading=!1}},getDefaultPermissions(t){switch(t){case"super_admin":return{manageAdmins:!0,manageRoutes:!0,managePlaces:!0,manageEvents:!0,viewAnalytics:!0};case"route_manager":return{manageAdmins:!1,manageRoutes:!0,managePlaces:!1,manageEvents:!1,viewAnalytics:!1};case"content_admin":return{manageAdmins:!1,manageRoutes:!1,managePlaces:!0,manageEvents:!0,viewAnalytics:!1};default:return{}}},handleError(t){let e="Signup failed. Please try again.";e={"auth/email-already-in-use":"This email is already registered.","auth/invalid-email":"Invalid email format.","auth/weak-password":"Password is too weak.","auth/operation-not-allowed":"Email/password accounts are not enabled."}[t?.code]||t?.message||e,this.$q.notify({type:"negative",message:e,icon:"error",position:"top",timeout:5e3})}}},B={class:"main-container"},R={class:"branding-section"},x={class:"brand-container"},E={class:"logo-wrapper"},M={class:"brand-text"},I={class:"admin-badge"},N={class:"form-header"},U={class:"icon-wrapper"},z={class:"form-footer"},L={class:"login-link"},O={class:"jeepney-illustration"};function F(t,e,l,m,o,p){return f(),g(k,{class:"admin-signup-page"},{default:n(()=>[r("div",B,[r("div",R,[r("div",x,[r("div",E,[a(i,{name:"directions_bus",size:"120px",color:"white"})]),r("div",M,[e[9]||(e[9]=r("h1",null,[u("BaguioBoost"),r("span",{class:"ph"},"PH")],-1)),r("div",I,[a(i,{name:"person_add",size:"sm"}),e[8]||(e[8]=u(" Admin Registration ",-1))]),e[10]||(e[10]=r("div",{class:"tagline"},"Join the Team • Manage Routes • Build Community",-1))])])]),a(w,{class:"signup-card"},{default:n(()=>[a(b,null,{default:n(()=>[r("div",N,[r("div",U,[a(i,{name:"person_add",size:"42px",style:{background:"#2d6a4f",color:"white"}})]),e[11]||(e[11]=r("h3",null,"Create Admin Account",-1)),e[12]||(e[12]=r("p",{class:"subtitle"},"Register as Route Manager or Content Admin",-1))]),a(V,{onSubmit:p.onSubmit,class:"signup-form"},{default:n(()=>[a(d,{modelValue:o.formData.name,"onUpdate:modelValue":e[0]||(e[0]=s=>o.formData.name=s),outlined:"",label:"Full Name",class:"q-mb-md",rules:[s=>!!s||"Name required",s=>s.length>=3||"Min 3 characters"],"bg-color":"grey-1"},{prepend:n(()=>[a(i,{name:"person",style:{background:"#2d6a4f",color:"white"}})]),_:1},8,["modelValue","rules"]),a(d,{modelValue:o.formData.email,"onUpdate:modelValue":e[1]||(e[1]=s=>o.formData.email=s),outlined:"",label:"Email Address",type:"email",class:"q-mb-md",rules:[s=>!!s||"Email required",s=>/.+@.+\..+/.test(s)||"Invalid email"],autocomplete:"username","bg-color":"grey-1"},{prepend:n(()=>[a(i,{name:"mail",style:{background:"#2d6a4f",color:"white"}})]),_:1},8,["modelValue","rules"]),a(C,{modelValue:o.formData.role,"onUpdate:modelValue":e[2]||(e[2]=s=>o.formData.role=s),outlined:"",label:"Admin Role",options:o.roleOptions,"option-value":"value","option-label":"label","emit-value":"","map-options":"",class:"q-mb-md",rules:[s=>!!s||"Role required"],"bg-color":"grey-1"},{prepend:n(()=>[a(i,{name:"badge",style:{background:"#2d6a4f",color:"white"}})]),_:1},8,["modelValue","options","rules"]),a(d,{modelValue:o.formData.password,"onUpdate:modelValue":e[4]||(e[4]=s=>o.formData.password=s),outlined:"",label:"Password",type:o.showPassword?"text":"password",class:"q-mb-md",rules:[s=>!!s||"Password required",s=>s.length>=8||"Min 8 characters",s=>/[A-Z]/.test(s)||"Need uppercase letter",s=>/[0-9]/.test(s)||"Need a number"],autocomplete:"new-password","bg-color":"grey-1"},{prepend:n(()=>[a(i,{name:"lock",style:{background:"#2d6a4f",color:"white"}})]),append:n(()=>[a(i,{name:o.showPassword?"visibility":"visibility_off",class:"cursor-pointer",color:"grey-6",onClick:e[3]||(e[3]=s=>o.showPassword=!o.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),a(d,{modelValue:o.formData.confirmPassword,"onUpdate:modelValue":e[6]||(e[6]=s=>o.formData.confirmPassword=s),outlined:"",label:"Confirm Password",type:o.showConfirmPassword?"text":"password",class:"q-mb-md",rules:[s=>!!s||"Confirm password required",s=>s===o.formData.password||"Passwords do not match"],autocomplete:"new-password","bg-color":"grey-1"},{prepend:n(()=>[a(i,{name:"lock_open",style:{background:"#2d6a4f",color:"white"}})]),append:n(()=>[a(i,{name:o.showConfirmPassword?"visibility":"visibility_off",class:"cursor-pointer",color:"grey-6",onClick:e[5]||(e[5]=s=>o.showConfirmPassword=!o.showConfirmPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),a(y,{type:"submit",label:"Create Admin Account",unelevated:"","no-caps":"",class:"full-width signup-btn",size:"lg",loading:o.loading},{loading:n(()=>[a(S,{color:"white"})]),_:1},8,["loading"])]),_:1},8,["onSubmit"]),r("div",z,[a(h,{class:"q-my-md"}),r("div",L,[e[13]||(e[13]=u(" Already have an account? ",-1)),r("a",{onClick:e[7]||(e[7]=s=>t.$router.push("/admin/adminlogin"))},"Login here")])])]),_:1})]),_:1})]),r("div",O,[a(i,{name:"directions_bus",size:"180px",color:"white",style:{opacity:"0.1"}})])]),_:1})}const oe=c(q,[["render",F],["__scopeId","data-v-43ddf08a"]]);export{oe as default};
