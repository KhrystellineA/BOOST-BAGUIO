import{_ as j,$ as Z,D as T,y as N,o as i,w as I,p as e,n as r,a0 as ee,m as n,F as b,q as S,A as u,t as d,Q as k,z as v,a2 as se,a3 as ae,a4 as oe,v as te,u as le,k as ie,r as h,d as ne,G as re,H as ce,J as de,K as E,L as ue,a6 as z,a7 as M,a8 as pe,a9 as O,a as ge,aa as ve,ab as me}from"./index-BNMNkKPK.js";import{Q as he}from"./QSpinnerHourglass-BIecivnK.js";import{Q as fe}from"./QPage-DjjICR0a.js";import{u as ye}from"./use-quasar-C3LJSxmj.js";import{F as _e}from"./FAQSection-sxZeg6An.js";import{F as Pe}from"./FooterSection-BeLV-Fel.js";import"./QItem-DbSoALj4.js";import"./QItemLabel-C7tu81OD.js";import"./logo-B98Z2-Xx.js";const ke=Z({name:"MaykanPage",components:{FAQSection:_e,FooterSection:Pe},setup(){const s=ye(),t=le(),m=ie(),B=h(null),w=h(!1),a=h(null),y=h("all"),f=h([]),o=h(!0),p=h(null),_=h(!1),q=[{icon:"place",title:"MUST-VISIT ATTRACTIONS IN BAGUIO CITY",description:"From parks to historical sites, explore Baguio's best."},{icon:"flag",title:"YOUR GUIDE TO BAGUIO'S TOURIST SPOTS",description:"Follow our commute guides for a hassle-free visit."},{icon:"palette",title:"EXPERIENCE THE BEST OF BAGUIO'S CULTURE",description:"Immerse yourself in local traditions and attractions."}],H=[{label:"All Places",value:"all"},{label:"Tourist Spots",value:"Tourist Spots"},{label:"Cafes & Restaurants",value:"Cafes & Restaurants"},{label:"Parks & Nature",value:"Parks & Nature"},{label:"Museums & Culture",value:"Museums & Culture"},{label:"Shopping",value:"Shopping"}],Q=ne(()=>y.value==="all"?f.value:f.value.filter(l=>l.category===y.value)),L=async()=>{try{console.log("[MaykanPage] Fetching hero image from Firestore...");const l=de(E,"pagePhotos","maykan"),c=await ue(l);c.exists()&&c.data().imageUrl?(p.value=c.data().imageUrl,console.log("[MaykanPage] Hero image loaded:",p.value)):console.log("[MaykanPage] No hero image found")}catch(l){console.error("[MaykanPage] Error fetching hero image:",l)}},$=async()=>{o.value=!0;try{const l=z(M(E,"places"),pe("name","asc")),c=await O(l);f.value=c.docs.map(g=>({id:g.id,...g.data()})),console.log("[Maykan] Loaded places:",f.value.length)}catch(l){console.error("[Maykan] Error loading places:",l),s.notify({type:"negative",message:"Failed to load places",position:"top"})}finally{o.value=!1}},R=(l,c)=>l?l.length<=c?l:l.substring(0,c)+"...":"Discover this amazing place in Baguio City.",D=l=>{const c=document.getElementById(l);c&&c.scrollIntoView({behavior:"smooth",block:"start"})},G=()=>{window.open("https://www.facebook.com/groups/sabaguio","_blank")},V=l=>{y.value=l,D("places")},x=l=>{a.value=l,w.value=!0},Y=()=>{if(!a.value)return;w.value=!1;const l={name:a.value.name,address:a.value.address,area:a.value.area,coordinates:{latitude:a.value.latitude,longitude:a.value.longitude}};try{t.push({name:"apanam",query:{to:a.value.name,toAddress:a.value.address,toArea:a.value.area},state:{destination:l,fromMAYKAN:!0}}),s.notify({message:`Navigating to APANAM with destination: ${a.value.name}`,color:"positive",icon:"navigation",position:"top"})}catch{s.notify({message:"APANAM feature is coming soon! Your destination will be: "+a.value.name,color:"info",icon:"info",position:"top",timeout:3e3}),typeof localStorage<"u"&&localStorage.setItem("apanam_destination",JSON.stringify(l))}},J=()=>{a.value&&(navigator.share?navigator.share({title:a.value.name,text:a.value.shortDescription||a.value.description,url:window.location.href}).then(()=>{s.notify({message:"Place shared successfully!",color:"positive",icon:"share",position:"top"})}).catch(l=>{console.log("Error sharing:",l)}):(navigator.clipboard.writeText(window.location.href),s.notify({message:"Link copied to clipboard!",color:"positive",icon:"content_copy",position:"top"})))},K=async()=>{if(!a.value)return;const l=ge.currentUser,c=l?.uid||m.userId||m.user?.uid||m.id;if(console.log("[SavePlace] Debug:",{authCurrentUser:l?.uid,storeUserId:m.userId,storeUserUid:m.user?.uid,storeId:m.id,finalUserId:c,isPremium:m.isPremium}),!c){s.notify({message:"Please login to save places",color:"warning",icon:"login",position:"top",actions:[{label:"Login",color:"white",handler:()=>{t.push("/auth")}}]});return}if(!m.isPremium){s.dialog({title:"Premium Feature",message:"Saving places is a premium feature. Upgrade to save unlimited places and routes!",persistent:!0,ok:{label:"Upgrade to Premium",color:"primary"},cancel:{label:"Maybe Later",color:"grey",flat:!0}}).onOk(()=>{t.push("/account")});return}_.value=!0;try{const g={placeId:a.value.id,name:a.value.name,category:a.value.category,address:a.value.address,area:a.value.area,imageUrl:a.value.imageUrl||null,description:a.value.description,shortDescription:a.value.shortDescription,coordinates:{latitude:a.value.latitude,longitude:a.value.longitude},operatingHours:a.value.operatingHours,entranceFee:a.value.entranceFee,phone:a.value.phone,website:a.value.website,tags:a.value.tags||[],savedAt:new Date().toISOString(),userId:c};console.log("[SavePlace] Attempting to save to:",`users/${c}/savedPlaces`);const P=M(E,"users",c,"savedPlaces"),C=z(P,ve("placeId","==",a.value.id));if(!(await O(C)).empty){s.notify({message:"This place is already in your saves!",color:"info",icon:"info",position:"top"}),_.value=!1;return}await me(P,g),console.log("[SavePlace] Successfully saved to Firestore");const F=localStorage.getItem("savedPlaces");let U=F?JSON.parse(F):[];U.some(X=>X.placeId===a.value.id)||(U.push(g),localStorage.setItem("savedPlaces",JSON.stringify(U)),console.log("[SavePlace] Saved to localStorage")),s.notify({message:`${a.value.name} saved successfully!`,color:"positive",icon:"bookmark",position:"top"})}catch(g){console.error("[Maykan] Error saving place:",g),console.error("[Maykan] Error details:",{code:g.code,message:g.message,stack:g.stack}),s.notify({message:"Failed to save place. Please try again.",color:"negative",icon:"error",position:"top"})}finally{_.value=!1}},W=()=>{const l={threshold:.1,rootMargin:"0px 0px -100px 0px"},c=new IntersectionObserver(P=>{P.forEach(C=>{C.isIntersecting&&C.target.classList.add("animate-in")})},l);return document.querySelectorAll(".section-animate").forEach(P=>c.observe(P)),c};let A;return re(()=>{L(),$(),setTimeout(()=>{A=W()},100)}),ce(()=>{A&&A.disconnect()}),{features:q,categories:H,places:f,filteredPlaces:Q,placesSection:B,showPlaceDetail:w,selectedPlace:a,selectedCategory:y,loading:o,heroImageUrl:p,isSaving:_,truncateText:R,scrollToSection:D,openSaBaguioGroup:G,filterByCategory:V,selectPlace:x,navigateToApanam:Y,sharePlace:J,savePlace:K}}}),be={class:"explore-section"},Se={class:"container"},we={class:"features-grid"},Ce={class:"feature-icon-wrapper"},Ie={class:"feature-title"},Ae={class:"feature-description"},Ue={class:"community-ribbon"},Ee={class:"container"},Be={class:"ribbon-content"},De={class:"ribbon-text"},Fe={id:"places",class:"places-section",ref:"placesSection"},Te={class:"container"},Ne={class:"section-header text-center"},ze={class:"category-filter"},Me={key:0,class:"text-center q-py-xl"},Oe={key:1,class:"no-places-state"},qe={class:"text-grey-6"},He={key:2,class:"places-masonry"},Qe=["onClick"],Le={class:"place-image-wrapper"},$e=["src","alt"],Re={key:1,class:"place-placeholder"},Ge={class:"place-category-badge"},Ve={class:"place-content"},xe={class:"place-name"},Ye={class:"place-short-desc"},Je={class:"place-meta"},Ke={key:0,class:"meta-item"},We={key:1,class:"meta-item"},Xe={key:0,class:"place-tags"},je={key:0,class:"detail-container"},Ze={class:"detail-image-section"},es={class:"detail-image-wrapper"},ss=["src","alt"],as={key:1,class:"detail-image-placeholder"},os={class:"detail-info-section"},ts={class:"detail-header"},ls={class:"category-badge"},is={class:"detail-title"},ns={class:"detail-description"},rs={key:0,class:"detail-info-card"},cs={class:"info-card-header"},ds={class:"info-card-content"},us={class:"hours-text"},ps={class:"detail-info-card"},gs={class:"info-card-header"},vs={class:"info-card-content"},ms={class:"address-text"},hs={key:0,class:"landmark-text"},fs={key:1,class:"detail-info-card"},ys={class:"info-card-header"},_s={class:"info-card-content"},Ps={class:"fee-text"},ks={key:2,class:"detail-info-card"},bs={class:"info-card-header"},Ss={class:"info-card-content"},ws={key:0,class:"contact-text"},Cs={key:1,class:"contact-text"},Is=["href"],As={key:3,class:"detail-tags"},Us={class:"detail-actions"},Es={class:"secondary-actions"};function Bs(s,t,m,B,w,a){const y=T("FAQSection"),f=T("FooterSection");return i(),N(fe,{class:"maykan-page"},{default:I(()=>[e("section",{class:"hero-section",style:ee({backgroundImage:`url(${s.heroImageUrl})`})},[...t[2]||(t[2]=[e("div",{class:"hero-overlay"},[e("div",{class:"hero-content animate-fade-in"},[e("h1",{class:"hero-title"},"MAYKAN"),e("p",{class:"hero-description"}," Discover Baguio's gems! Uncover curated tourist spots with easy commute guides tailored for your Baguio adventure. ")])],-1)])],4),e("section",be,[e("div",Se,[t[3]||(t[3]=e("div",{class:"explore-header text-center"},[e("div",{class:"text-overline"},"Explore"),e("h2",{class:"explore-title"},"DISCOVER BAGUIO'S HIDDEN GEMS WITH EASE"),e("p",{class:"explore-subtitle"}," Baguio City is filled with breathtaking sights and experiences waiting to be discovered. Our curated list of tourist spots ensures you navigate the city effortlessly while enjoying its rich culture. ")],-1)),e("div",we,[(i(!0),n(b,null,S(s.features,(o,p)=>(i(),n("div",{key:p,class:"feature-card section-animate"},[e("div",Ce,[r(u,{name:o.icon,size:"64px",class:"feature-icon"},null,8,["name"])]),e("h3",Ie,d(o.title),1),e("p",Ae,d(o.description),1)]))),128))])])]),e("section",Ue,[e("div",Ee,[e("div",Be,[e("div",De,[r(u,{name:"groups",size:"32px",class:"ribbon-icon"}),t[4]||(t[4]=e("div",null,[e("h3",{class:"ribbon-title"},"Want more organic content?"),e("p",{class:"ribbon-subtitle"}," Visit Sa Baguio Facebook group to see more personal and unique suggestions and experiences! ")],-1))]),r(k,{label:"Sa Baguio!",unelevated:"",color:"white","text-color":"dark",padding:"10px 28px",class:"btn-hover-lift","icon-right":"open_in_new",onClick:s.openSaBaguioGroup},null,8,["onClick"])])])]),e("section",Fe,[e("div",Te,[e("div",Ne,[t[5]||(t[5]=e("h2",{class:"section-title"},"EXPLORE BAGUIO'S PLACES",-1)),t[6]||(t[6]=e("p",{class:"section-description"}," Browse through our curated collection of Baguio's best tourist spots, cafes, parks, and more. Click on any place to view details and get directions. ",-1)),e("div",ze,[(i(!0),n(b,null,S(s.categories,o=>(i(),N(k,{key:o.value,label:o.label,unelevated:s.selectedCategory===o.value,outline:s.selectedCategory!==o.value,color:s.selectedCategory===o.value?"primary":"dark",size:"md",padding:"8px 24px",class:"category-btn",onClick:p=>s.filterByCategory(o.value)},null,8,["label","unelevated","outline","color","onClick"]))),128))])]),s.loading?(i(),n("div",Me,[r(he,{color:"primary",size:"60px"}),t[7]||(t[7]=e("p",{class:"q-mt-md text-grey-7"},"Loading places...",-1))])):s.filteredPlaces.length===0?(i(),n("div",Oe,[r(u,{name:"place",size:"80px",color:"grey-5"}),t[8]||(t[8]=e("h3",{class:"text-grey-7 q-mt-md"},"No Places Found",-1)),e("p",qe,d(s.selectedCategory==="all"?"No places available yet":"No places in this category"),1)])):(i(),n("div",He,[(i(!0),n(b,null,S(s.filteredPlaces,o=>(i(),n("div",{key:o.id,class:"place-card card-hover",onClick:p=>s.selectPlace(o)},[e("div",Le,[o.imageUrl?(i(),n("img",{key:0,src:o.imageUrl,alt:o.name,class:"place-image"},null,8,$e)):(i(),n("div",Re,[r(u,{name:"place",size:"48px",color:"grey-4"})])),e("div",Ge,d(o.category),1)]),e("div",Ve,[e("h3",xe,d(o.name),1),e("p",Ye,d(o.shortDescription||s.truncateText(o.description,80)),1),e("div",Je,[o.operatingHours?(i(),n("div",Ke,[r(u,{name:"schedule",size:"16px"}),e("span",null,d(o.operatingHours),1)])):v("",!0),o.area?(i(),n("div",We,[r(u,{name:"location_on",size:"16px"}),e("span",null,d(o.area),1)])):v("",!0)]),o.tags&&o.tags.length>0?(i(),n("div",Xe,[(i(!0),n(b,null,S(o.tags.slice(0,3),(p,_)=>(i(),n("span",{key:_,class:"place-tag"},d(p),1))),128))])):v("",!0)])],8,Qe))),128))]))])],512),r(se,{modelValue:s.showPlaceDetail,"onUpdate:modelValue":t[1]||(t[1]=o=>s.showPlaceDetail=o),"transition-show":"slide-up","transition-hide":"slide-down",maximized:""},{default:I(()=>[r(ae,{class:"place-detail-card"},{default:I(()=>[r(oe,{class:"place-detail-content"},{default:I(()=>[r(k,{flat:"",dense:"",round:"",icon:"close",color:"dark",size:"lg",class:"close-btn",onClick:t[0]||(t[0]=o=>s.showPlaceDetail=!1)}),s.selectedPlace?(i(),n("div",je,[e("div",Ze,[e("div",es,[s.selectedPlace.imageUrl?(i(),n("img",{key:0,src:s.selectedPlace.imageUrl,alt:s.selectedPlace.name,class:"detail-image"},null,8,ss)):(i(),n("div",as,[r(u,{name:"place",size:"120px",color:"grey-4"})]))])]),e("div",os,[e("div",ts,[e("div",ls,d(s.selectedPlace.category),1),e("h2",is,d(s.selectedPlace.name),1),e("p",ns,d(s.selectedPlace.description||"No description available."),1)]),s.selectedPlace.operatingHours?(i(),n("div",rs,[e("div",cs,[r(u,{name:"schedule",size:"32px",color:"primary"}),t[9]||(t[9]=e("h3",null,"Operating Hours",-1))]),e("div",ds,[e("p",us,d(s.selectedPlace.operatingHours),1)])])):v("",!0),e("div",ps,[e("div",gs,[r(u,{name:"location_on",size:"32px",color:"primary"}),t[10]||(t[10]=e("h3",null,"Location",-1))]),e("div",vs,[e("p",ms,d(s.selectedPlace.address),1),s.selectedPlace.area?(i(),n("p",hs,"Area: "+d(s.selectedPlace.area),1)):v("",!0)])]),s.selectedPlace.entranceFee?(i(),n("div",fs,[e("div",ys,[r(u,{name:"payments",size:"32px",color:"primary"}),t[11]||(t[11]=e("h3",null,"Entrance Fee",-1))]),e("div",_s,[e("p",Ps,d(s.selectedPlace.entranceFee),1)])])):v("",!0),s.selectedPlace.phone||s.selectedPlace.website?(i(),n("div",ks,[e("div",bs,[r(u,{name:"phone",size:"32px",color:"primary"}),t[12]||(t[12]=e("h3",null,"Contact",-1))]),e("div",Ss,[s.selectedPlace.phone?(i(),n("p",ws,[r(u,{name:"phone",size:"16px"}),te(" "+d(s.selectedPlace.phone),1)])):v("",!0),s.selectedPlace.website?(i(),n("p",Cs,[r(u,{name:"language",size:"16px"}),e("a",{href:s.selectedPlace.website,target:"_blank"},d(s.selectedPlace.website),9,Is)])):v("",!0)])])):v("",!0),s.selectedPlace.tags&&s.selectedPlace.tags.length>0?(i(),n("div",As,[(i(!0),n(b,null,S(s.selectedPlace.tags,(o,p)=>(i(),n("span",{key:p,class:"detail-tag"},d(o),1))),128))])):v("",!0),e("div",Us,[r(k,{label:"Get Directions via APANAM",unelevated:"",color:"primary",size:"lg",padding:"14px 40px",icon:"navigation",class:"btn-hover-lift full-width",onClick:s.navigateToApanam},null,8,["onClick"]),e("div",Es,[r(k,{label:"Share",outline:"",color:"primary",size:"md",icon:"share",class:"btn-hover-lift",onClick:s.sharePlace},null,8,["onClick"]),r(k,{label:s.isSaving?"Saving...":"Save",loading:s.isSaving,outline:"",color:"primary",size:"md",icon:"bookmark_border",class:"btn-hover-lift",onClick:s.savePlace},null,8,["label","loading","onClick"])])])])])):v("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(y),r(f)]),_:1})}const $s=j(ke,[["render",Bs],["__scopeId","data-v-1f82d6db"]]);export{$s as default};
