import{a as R,d as $,h as T,A as j,a1 as Y,a2 as H,u as C,o as h,ae as y,a4 as v,a6 as l,a7 as r,a5 as e,ay as x,az as b,ab as o,ag as d,aa as _,ac as c,ah as G,a3 as J,af as I,a_ as K,ad as w,ax as X,C as Q,aj as A,aA as Z}from"./index-CVLa6XA6.js";import{u as ee,Q as m,a as t}from"./use-quasar-CiN8XqRT.js";import{Q as i}from"./QItemLabel-Dvbuh_ys.js";import{Q as V}from"./QList-CPj_Flq7.js";import{Q as le}from"./QPage-C6cDZTbj.js";import{C as ae}from"./ClosePopup-C0MrLjBC.js";const te=["top","middle","bottom"],E=R({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:n=>te.includes(n)}},setup(n,{slots:B}){const u=$(()=>n.align!==void 0?{verticalAlign:n.align}:null),f=$(()=>{const p=n.outline===!0&&n.color||n.textColor;return`q-badge flex inline items-center no-wrap q-badge--${n.multiLine===!0?"multi":"single"}-line`+(n.outline===!0?" q-badge--outline":n.color!==void 0?` bg-${n.color}`:"")+(p!==void 0?` text-${p}`:"")+(n.floating===!0?" q-badge--floating":"")+(n.rounded===!0?" q-badge--rounded":"")+(n.transparent===!0?" q-badge--transparent":"")});return()=>T("div",{class:f.value,style:u.value,role:"status","aria-label":n.label},j(B.default,n.label!==void 0?[n.label]:[]))}}),oe={class:"row justify-center"},ne={class:"col-12 col-md-8 col-lg-6"},ie={class:"text-h5"},se={class:"text-caption"},ue={class:"row items-center q-gutter-sm"},re={class:"text-subtitle1 text-weight-medium"},de={key:0,class:"text-caption text-grey-7"},me={class:"text-h6 q-mb-sm"},be={__name:"AccountPage",setup(n){const B=Y(),u=H(),f=ee(),p=C(!1),L=C(!1),P=C(navigator.onLine),O=C("0 MB"),S=C(!1);let k=null;h(()=>{window.addEventListener("online",D),window.addEventListener("offline",D),window.matchMedia("(display-mode: standalone)").matches&&(S.value=!0),window.addEventListener("beforeinstallprompt",s=>{s.preventDefault(),k=s}),M()});const D=()=>{P.value=navigator.onLine},N=s=>new Date(s).toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"}),U=async()=>{f.dialog({title:"Confirm Logout",message:"Are you sure you want to logout?",cancel:!0,persistent:!0}).onOk(async()=>{await u.logout(),B.push("/auth")})},q=async s=>{await u.activatePremium(s),p.value=!1},z=async s=>{s?f.notify({type:"positive",message:"Offline mode enabled",caption:"Routes and data will be cached"}):f.notify({type:"info",message:"Offline mode disabled"})},W=async()=>{if(!k){f.notify({type:"warning",message:"PWA installation not available",caption:"Try accessing from a mobile browser"});return}k.prompt();const{outcome:s}=await k.userChoice;s==="accepted"&&(f.notify({type:"positive",message:"App installed successfully!"}),S.value=!0),k=null},M=async()=>{if("storage"in navigator&&"estimate"in navigator.storage){const a=((await navigator.storage.estimate()).usage/(1024*1024)).toFixed(2);O.value=`${a} MB`}},F=async()=>{f.dialog({title:"Clear Offline Data",message:"This will remove all cached routes and data. Continue?",cancel:!0,persistent:!0}).onOk(async()=>{if("caches"in window){const s=await caches.keys();await Promise.all(s.map(a=>caches.delete(a))),f.notify({type:"positive",message:"Cache cleared successfully"}),M()}})};return(s,a)=>(v(),y(le,{class:"q-pa-md"},{default:l(()=>[r("div",oe,[r("div",ne,[e(x,{class:"q-mb-md"},{default:l(()=>[e(b,{class:"bg-primary text-white"},{default:l(()=>[r("div",ie,[e(d,{name:"person",size:"28px",class:"q-mr-sm"}),o(" "+_(c(u).userName),1)]),r("div",se,_(c(u).userEmail),1)]),_:1}),e(G),e(b,null,{default:l(()=>[r("div",ue,[e(d,{name:c(u).isPremium?"workspace_premium":"lock",color:c(u).isPremium?"amber":"grey",size:"24px"},null,8,["name","color"]),r("div",null,[r("div",re,_(c(u).isPremium?"Premium Account":"Free Account"),1),c(u).isPremium&&c(u).premiumExpiry?(v(),J("div",de," Valid until "+_(N(c(u).premiumExpiry)),1)):I("",!0)])])]),_:1})]),_:1}),c(u).isPremium?(v(),y(x,{key:0,class:"q-mb-md"},{default:l(()=>[e(b,null,{default:l(()=>[a[13]||(a[13]=r("div",{class:"text-h6 q-mb-md"},"Premium Features",-1)),e(V,null,{default:l(()=>[e(m,null,{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(d,{name:P.value?"cloud_done":"cloud_off",color:P.value?"positive":"warning"},null,8,["name","color"])]),_:1}),e(t,null,{default:l(()=>[e(i,null,{default:l(()=>[...a[7]||(a[7]=[o("Offline Mode",-1)])]),_:1}),e(i,{caption:""},{default:l(()=>[o(_(P.value?"Online - Data synced":"Offline - Using cached data"),1)]),_:1})]),_:1}),e(t,{side:""},{default:l(()=>[e(K,{modelValue:L.value,"onUpdate:modelValue":[a[0]||(a[0]=g=>L.value=g),z],color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),S.value?I("",!0):(v(),y(m,{key:0},{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(d,{name:"get_app",color:"primary"})]),_:1}),e(t,null,{default:l(()=>[e(i,null,{default:l(()=>[...a[8]||(a[8]=[o("Install PWA",-1)])]),_:1}),e(i,{caption:""},{default:l(()=>[...a[9]||(a[9]=[o(" Install Baguio Boost on your device ",-1)])]),_:1})]),_:1}),e(t,{side:""},{default:l(()=>[e(w,{flat:"",dense:"",color:"primary",label:"Install",onClick:W})]),_:1})]),_:1})),e(m,null,{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(d,{name:"bookmark",color:"primary"})]),_:1}),e(t,null,{default:l(()=>[e(i,null,{default:l(()=>[...a[10]||(a[10]=[o("Saved Routes",-1)])]),_:1}),e(i,{caption:""},{default:l(()=>[...a[11]||(a[11]=[o(" Access saved routes offline ",-1)])]),_:1})]),_:1}),e(t,{side:""},{default:l(()=>[e(w,{flat:"",dense:"",color:"primary",label:"View",onClick:a[1]||(a[1]=g=>s.$router.push("/saved-routes"))})]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(d,{name:"storage",color:"primary"})]),_:1}),e(t,null,{default:l(()=>[e(i,null,{default:l(()=>[...a[12]||(a[12]=[o("Offline Data",-1)])]),_:1}),e(i,{caption:""},{default:l(()=>[o(_(O.value)+" cached ",1)]),_:1})]),_:1}),e(t,{side:""},{default:l(()=>[e(w,{flat:"",dense:"",color:"negative",label:"Clear",onClick:F})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(v(),y(x,{key:1,class:"q-mb-md"},{default:l(()=>[e(b,{class:"bg-amber-1"},{default:l(()=>[r("div",me,[e(d,{name:"star",color:"amber",size:"24px"}),a[14]||(a[14]=o(" Upgrade to Premium ",-1))]),a[19]||(a[19]=r("div",{class:"text-body2 q-mb-md"}," Unlock offline mode, PWA support, and more features! ",-1)),e(V,null,{default:l(()=>[e(m,null,{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(d,{name:"check_circle",color:"positive"})]),_:1}),e(t,null,{default:l(()=>[e(i,null,{default:l(()=>[...a[15]||(a[15]=[o("Full offline navigation",-1)])]),_:1})]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(d,{name:"check_circle",color:"positive"})]),_:1}),e(t,null,{default:l(()=>[e(i,null,{default:l(()=>[...a[16]||(a[16]=[o("PWA installation",-1)])]),_:1})]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(d,{name:"check_circle",color:"positive"})]),_:1}),e(t,null,{default:l(()=>[e(i,null,{default:l(()=>[...a[17]||(a[17]=[o("Save unlimited routes",-1)])]),_:1})]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(d,{name:"check_circle",color:"positive"})]),_:1}),e(t,null,{default:l(()=>[e(i,null,{default:l(()=>[...a[18]||(a[18]=[o("Priority support",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{color:"primary",label:"Upgrade Now",class:"full-width q-mt-md",onClick:a[2]||(a[2]=g=>p.value=!0)})]),_:1})]),_:1})),e(x,null,{default:l(()=>[e(b,null,{default:l(()=>[e(w,{color:"negative",label:"Logout",icon:"logout",class:"full-width",onClick:U})]),_:1})]),_:1})])]),e(X,{modelValue:p.value,"onUpdate:modelValue":a[6]||(a[6]=g=>p.value=g)},{default:l(()=>[e(x,{style:{"min-width":"350px"}},{default:l(()=>[e(b,null,{default:l(()=>[...a[20]||(a[20]=[r("div",{class:"text-h6"},"Choose Your Plan",-1)])]),_:1}),e(b,{class:"q-pt-none"},{default:l(()=>[e(V,null,{default:l(()=>[Q((v(),y(m,{clickable:"",onClick:a[3]||(a[3]=g=>q(1))},{default:l(()=>[e(t,null,{default:l(()=>[e(i,null,{default:l(()=>[...a[21]||(a[21]=[o("1 Month - ₱99",-1)])]),_:1}),e(i,{caption:""},{default:l(()=>[...a[22]||(a[22]=[o("Billed monthly",-1)])]),_:1})]),_:1})]),_:1})),[[A]]),Q((v(),y(m,{clickable:"",onClick:a[4]||(a[4]=g=>q(6))},{default:l(()=>[e(t,null,{default:l(()=>[e(i,null,{default:l(()=>[...a[23]||(a[23]=[o("6 Months - ₱499",-1)])]),_:1}),e(i,{caption:""},{default:l(()=>[...a[24]||(a[24]=[o("Save 15%",-1)])]),_:1})]),_:1}),e(t,{side:""},{default:l(()=>[e(E,{color:"positive",label:"Popular"})]),_:1})]),_:1})),[[A]]),Q((v(),y(m,{clickable:"",onClick:a[5]||(a[5]=g=>q(12))},{default:l(()=>[e(t,null,{default:l(()=>[e(i,null,{default:l(()=>[...a[25]||(a[25]=[o("1 Year - ₱899",-1)])]),_:1}),e(i,{caption:""},{default:l(()=>[...a[26]||(a[26]=[o("Save 25%",-1)])]),_:1})]),_:1}),e(t,{side:""},{default:l(()=>[e(E,{color:"amber",label:"Best Value"})]),_:1})]),_:1})),[[A]])]),_:1})]),_:1}),e(Z,{align:"right"},{default:l(()=>[Q(e(w,{flat:"",label:"Cancel",color:"primary"},null,512),[[ae]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{be as default};
