const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainLayout-BIoo8L_Q.js","assets/QLayout-9fijlrMS.js","assets/QScrollObserver-DMg3C4Au.js","assets/QResizeObserver-BGTwnNlz.js","assets/QDrawer-CdwjQU8_.js","assets/QScrollArea-DfPnG9nG.js","assets/touch-BjYP5sR0.js","assets/selection-61_R8QJt.js","assets/format-CJebrXOQ.js","assets/QItemLabel-C7tu81OD.js","assets/QItem-DbSoALj4.js","assets/QList-CPQTSOas.js","assets/QBtnDropdown-OgaoLcvi.js","assets/QMenu-C81fWRT3.js","assets/position-engine-DFO69afB.js","assets/QChip-DdJtPbRF.js","assets/ClosePopup-DDK61RyB.js","assets/logo-B98Z2-Xx.js","assets/use-quasar-C3LJSxmj.js","assets/MainLayout-CqzP2kmt.css","assets/IndexPage-BfKyLAy8.js","assets/use-fullscreen-DjOZ0PEx.js","assets/QSelect-C-VaMo7N.js","assets/rtl-DFPa-2ov.js","assets/QPage-DjjICR0a.js","assets/use-panel-BZBftDLR.js","assets/FAQSection-sxZeg6An.js","assets/FooterSection-BeLV-Fel.js","assets/FooterSection-C6U8V1q0.css","assets/FAQSection-SVY7-55n.css","assets/IndexPage-ByLYdMl9.css","assets/PagnaamPage-6AkBN3As.js","assets/QTooltip-HxQ9Wq6G.js","assets/QBar-CSPPjw1C.js","assets/QBanner-BmaW9FEh.js","assets/leaflet-CLyyetQW.js","assets/leaflet-lDzrbhio.css","assets/PagnaamPage-DY5czNNi.css","assets/MaykanPage-B6CQCRcq.js","assets/QSpinnerHourglass-BIecivnK.js","assets/MaykanPage-DWIZ-uCa.css","assets/AramidemPage-Bqs8aEmL.js","assets/QBadge-DWsGDw5C.js","assets/AramidemPage-C2TU2l3-.css","assets/ApanamPage-DFPJTiiA.js","assets/ApanamPage-DL9B9Dg3.css","assets/AyanMoPage-fWHEDfql.js","assets/AyanMoPage-BgVmFjbN.css","assets/AuthPage-BTlSFuPN.js","assets/QTabPanels-DejP8mD5.js","assets/QForm-BED6u0eC.js","assets/AuthPage-DnkM_E08.css","assets/AccountPage-BuYGGQpA.js","assets/ContactPage-IM0luBmg.js","assets/ContactPage-CxSoTPbb.css","assets/SavedRoutesPage-ClSm8Td2.js","assets/QLinearProgress-DAX682LA.js","assets/SavedRoutesPage-Cdtu4mQ7.css","assets/OfflinePage-DcynzcLX.js","assets/OfflinePage-DQUJrjS9.css","assets/BlankLayout-BcBmkr3x.js","assets/AdminLogin-dr6PRFE-.js","assets/AdminLogin-BqZerUyt.css","assets/AdminSignup-BVc3gEfh.js","assets/AdminSignup-BvVxNq9r.css","assets/AdminDashboard-DoAqZLkP.js","assets/AdminDashboard-Bpobxt0I.css"])))=>i.map(i=>d[i]);
const u0=(function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"})(),h0=function(t){return"/"+t},Pg={},mt=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=l(n.map(u=>{if(u=h0(u),u in Pg)return;Pg[u]=!0;const h=u.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":u0,h||(p.as="script"),p.crossOrigin="",p.href=u,a&&p.setAttribute("nonce",a),document.head.appendChild(p),h)return new Promise((g,T)=>{p.addEventListener("load",g),p.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function np(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const He={},Xi=[],Gn=()=>{},EE=()=>!1,Nu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),rp=t=>t.startsWith("onUpdate:"),wt=Object.assign,sp=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},d0=Object.prototype.hasOwnProperty,Fe=(t,e)=>d0.call(t,e),_e=Array.isArray,Zi=t=>No(t)==="[object Map]",Ou=t=>No(t)==="[object Set]",kg=t=>No(t)==="[object Date]",f0=t=>No(t)==="[object RegExp]",Te=t=>typeof t=="function",rt=t=>typeof t=="string",er=t=>typeof t=="symbol",ze=t=>t!==null&&typeof t=="object",wE=t=>(ze(t)||Te(t))&&Te(t.then)&&Te(t.catch),bE=Object.prototype.toString,No=t=>bE.call(t),p0=t=>No(t).slice(8,-1),IE=t=>No(t)==="[object Object]",ip=t=>rt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ca=np(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Mu=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},m0=/-\w/g,In=Mu(t=>t.replace(m0,e=>e.slice(1).toUpperCase())),g0=/\B([A-Z])/g,gs=Mu(t=>t.replace(g0,"-$1").toLowerCase()),Lu=Mu(t=>t.charAt(0).toUpperCase()+t.slice(1)),Hh=Mu(t=>t?`on${Lu(t)}`:""),ts=(t,e)=>!Object.is(t,e),eo=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},TE=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},op=t=>{const e=parseFloat(t);return isNaN(e)?t:e},_0=t=>{const e=rt(t)?Number(t):NaN;return isNaN(e)?t:e};let xg;const Fu=()=>xg||(xg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ap(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=rt(r)?w0(r):ap(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(rt(t)||ze(t))return t}const y0=/;(?![^(]*\))/g,v0=/:([^]+)/,E0=/\/\*[^]*?\*\//g;function w0(t){const e={};return t.replace(E0,"").split(y0).forEach(n=>{if(n){const r=n.split(v0);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function lp(t){let e="";if(rt(t))e=t;else if(_e(t))for(let n=0;n<t.length;n++){const r=lp(t[n]);r&&(e+=r+" ")}else if(ze(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const b0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",I0=np(b0);function AE(t){return!!t||t===""}function T0(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Uu(t[r],e[r]);return n}function Uu(t,e){if(t===e)return!0;let n=kg(t),r=kg(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=er(t),r=er(e),n||r)return t===e;if(n=_e(t),r=_e(e),n||r)return n&&r?T0(t,e):!1;if(n=ze(t),r=ze(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Uu(t[o],e[o]))return!1}}return String(t)===String(e)}function SE(t,e){return t.findIndex(n=>Uu(n,e))}const RE=t=>!!(t&&t.__v_isRef===!0),A0=t=>rt(t)?t:t==null?"":_e(t)||ze(t)&&(t.toString===bE||!Te(t.toString))?RE(t)?A0(t.value):JSON.stringify(t,CE,2):String(t),CE=(t,e)=>RE(e)?CE(t,e.value):Zi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Gh(r,i)+" =>"]=s,n),{})}:Ou(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Gh(n))}:er(e)?Gh(e):ze(e)&&!_e(e)&&!IE(e)?String(e):e,Gh=(t,e="")=>{var n;return er(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Lt;class PE{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Lt,!e&&Lt&&(this.index=(Lt.scopes||(Lt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Lt;try{return Lt=this,e()}finally{Lt=n}}}on(){++this._on===1&&(this.prevScope=Lt,Lt=this)}off(){this._on>0&&--this._on===0&&(Lt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function kE(t){return new PE(t)}function xE(){return Lt}function S0(t,e=!1){Lt&&Lt.cleanups.push(t)}let We;const Wh=new WeakSet;class VE{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Lt&&Lt.active&&Lt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Wh.has(this)&&(Wh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||NE(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Vg(this),OE(this);const e=We,n=Vn;We=this,Vn=!0;try{return this.fn()}finally{ME(this),We=e,Vn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)hp(e);this.deps=this.depsTail=void 0,Vg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Wh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Bd(this)&&this.run()}get dirty(){return Bd(this)}}let DE=0,Pa,ka;function NE(t,e=!1){if(t.flags|=8,e){t.next=ka,ka=t;return}t.next=Pa,Pa=t}function cp(){DE++}function up(){if(--DE>0)return;if(ka){let e=ka;for(ka=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Pa;){let e=Pa;for(Pa=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function OE(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ME(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),hp(r),R0(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Bd(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(LE(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function LE(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Qa)||(t.globalVersion=Qa,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Bd(t))))return;t.flags|=2;const e=t.dep,n=We,r=Vn;We=t,Vn=!0;try{OE(t);const s=t.fn(t._value);(e.version===0||ts(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{We=n,Vn=r,ME(t),t.flags&=-3}}function hp(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)hp(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function R0(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Vn=!0;const FE=[];function mr(){FE.push(Vn),Vn=!1}function gr(){const t=FE.pop();Vn=t===void 0?!0:t}function Vg(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=We;We=void 0;try{e()}finally{We=n}}}let Qa=0;class C0{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class dp{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!We||!Vn||We===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==We)n=this.activeLink=new C0(We,this),We.deps?(n.prevDep=We.depsTail,We.depsTail.nextDep=n,We.depsTail=n):We.deps=We.depsTail=n,UE(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=We.depsTail,n.nextDep=void 0,We.depsTail.nextDep=n,We.depsTail=n,We.deps===n&&(We.deps=r)}return n}trigger(e){this.version++,Qa++,this.notify(e)}notify(e){cp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{up()}}}function UE(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)UE(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Kc=new WeakMap,Ws=Symbol(""),qd=Symbol(""),Ja=Symbol("");function Bt(t,e,n){if(Vn&&We){let r=Kc.get(t);r||Kc.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new dp),s.map=r,s.key=n),s.track()}}function cr(t,e,n,r,s,i){const o=Kc.get(t);if(!o){Qa++;return}const a=l=>{l&&l.trigger()};if(cp(),e==="clear")o.forEach(a);else{const l=_e(t),u=l&&ip(n);if(l&&n==="length"){const h=Number(r);o.forEach((d,p)=>{(p==="length"||p===Ja||!er(p)&&p>=h)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(Ja)),e){case"add":l?u&&a(o.get("length")):(a(o.get(Ws)),Zi(t)&&a(o.get(qd)));break;case"delete":l||(a(o.get(Ws)),Zi(t)&&a(o.get(qd)));break;case"set":Zi(t)&&a(o.get(Ws));break}}up()}function P0(t,e){const n=Kc.get(t);return n&&n.get(e)}function ki(t){const e=Ae(t);return e===t?e:(Bt(e,"iterate",Ja),wn(t)?e:e.map(xt))}function Bu(t){return Bt(t=Ae(t),"iterate",Ja),t}const k0={__proto__:null,[Symbol.iterator](){return Qh(this,Symbol.iterator,xt)},concat(...t){return ki(this).concat(...t.map(e=>_e(e)?ki(e):e))},entries(){return Qh(this,"entries",t=>(t[1]=xt(t[1]),t))},every(t,e){return sr(this,"every",t,e,void 0,arguments)},filter(t,e){return sr(this,"filter",t,e,n=>n.map(xt),arguments)},find(t,e){return sr(this,"find",t,e,xt,arguments)},findIndex(t,e){return sr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return sr(this,"findLast",t,e,xt,arguments)},findLastIndex(t,e){return sr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return sr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Jh(this,"includes",t)},indexOf(...t){return Jh(this,"indexOf",t)},join(t){return ki(this).join(t)},lastIndexOf(...t){return Jh(this,"lastIndexOf",t)},map(t,e){return sr(this,"map",t,e,void 0,arguments)},pop(){return ra(this,"pop")},push(...t){return ra(this,"push",t)},reduce(t,...e){return Dg(this,"reduce",t,e)},reduceRight(t,...e){return Dg(this,"reduceRight",t,e)},shift(){return ra(this,"shift")},some(t,e){return sr(this,"some",t,e,void 0,arguments)},splice(...t){return ra(this,"splice",t)},toReversed(){return ki(this).toReversed()},toSorted(t){return ki(this).toSorted(t)},toSpliced(...t){return ki(this).toSpliced(...t)},unshift(...t){return ra(this,"unshift",t)},values(){return Qh(this,"values",xt)}};function Qh(t,e,n){const r=Bu(t),s=r[e]();return r!==t&&!wn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const x0=Array.prototype;function sr(t,e,n,r,s,i){const o=Bu(t),a=o!==t&&!wn(t),l=o[e];if(l!==x0[e]){const d=l.apply(t,i);return a?xt(d):d}let u=n;o!==t&&(a?u=function(d,p){return n.call(this,xt(d),p,t)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,t)}));const h=l.call(o,u,r);return a&&s?s(h):h}function Dg(t,e,n,r){const s=Bu(t);let i=n;return s!==t&&(wn(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,xt(a),l,t)}),s[e](i,...r)}function Jh(t,e,n){const r=Ae(t);Bt(r,"iterate",Ja);const s=r[e](...n);return(s===-1||s===!1)&&mp(n[0])?(n[0]=Ae(n[0]),r[e](...n)):s}function ra(t,e,n=[]){mr(),cp();const r=Ae(t)[e].apply(t,n);return up(),gr(),r}const V0=np("__proto__,__v_isRef,__isVue"),BE=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(er));function D0(t){er(t)||(t=String(t));const e=Ae(this);return Bt(e,"has",t),e.hasOwnProperty(t)}class qE{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?j0:KE:i?zE:jE).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=_e(e);if(!s){let l;if(o&&(l=k0[n]))return l;if(n==="hasOwnProperty")return D0}const a=Reflect.get(e,n,dt(e)?e:r);if((er(n)?BE.has(n):V0(n))||(s||Bt(e,"get",n),i))return a;if(dt(a)){const l=o&&ip(n)?a:a.value;return s&&ze(l)?jd(l):l}return ze(a)?s?jd(a):gi(a):a}}class $E extends qE{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=ls(i);if(!wn(r)&&!ls(r)&&(i=Ae(i),r=Ae(r)),!_e(e)&&dt(i)&&!dt(r))return l||(i.value=r),!0}const o=_e(e)&&ip(n)?Number(n)<e.length:Fe(e,n),a=Reflect.set(e,n,r,dt(e)?e:s);return e===Ae(s)&&(o?ts(r,i)&&cr(e,"set",n,r):cr(e,"add",n,r)),a}deleteProperty(e,n){const r=Fe(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&cr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!er(n)||!BE.has(n))&&Bt(e,"has",n),r}ownKeys(e){return Bt(e,"iterate",_e(e)?"length":Ws),Reflect.ownKeys(e)}}class N0 extends qE{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const O0=new $E,M0=new N0,L0=new $E(!0);const $d=t=>t,Xl=t=>Reflect.getPrototypeOf(t);function F0(t,e,n){return function(...r){const s=this.__v_raw,i=Ae(s),o=Zi(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),h=n?$d:e?Hc:xt;return!e&&Bt(i,"iterate",l?qd:Ws),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:a?[h(d[0]),h(d[1])]:h(d),done:p}},[Symbol.iterator](){return this}}}}function Zl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function U0(t,e){const n={get(s){const i=this.__v_raw,o=Ae(i),a=Ae(s);t||(ts(s,a)&&Bt(o,"get",s),Bt(o,"get",a));const{has:l}=Xl(o),u=e?$d:t?Hc:xt;if(l.call(o,s))return u(i.get(s));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Bt(Ae(s),"iterate",Ws),s.size},has(s){const i=this.__v_raw,o=Ae(i),a=Ae(s);return t||(ts(s,a)&&Bt(o,"has",s),Bt(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=Ae(a),u=e?$d:t?Hc:xt;return!t&&Bt(l,"iterate",Ws),a.forEach((h,d)=>s.call(i,u(h),u(d),o))}};return wt(n,t?{add:Zl("add"),set:Zl("set"),delete:Zl("delete"),clear:Zl("clear")}:{add(s){!e&&!wn(s)&&!ls(s)&&(s=Ae(s));const i=Ae(this);return Xl(i).has.call(i,s)||(i.add(s),cr(i,"add",s,s)),this},set(s,i){!e&&!wn(i)&&!ls(i)&&(i=Ae(i));const o=Ae(this),{has:a,get:l}=Xl(o);let u=a.call(o,s);u||(s=Ae(s),u=a.call(o,s));const h=l.call(o,s);return o.set(s,i),u?ts(i,h)&&cr(o,"set",s,i):cr(o,"add",s,i),this},delete(s){const i=Ae(this),{has:o,get:a}=Xl(i);let l=o.call(i,s);l||(s=Ae(s),l=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return l&&cr(i,"delete",s,void 0),u},clear(){const s=Ae(this),i=s.size!==0,o=s.clear();return i&&cr(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=F0(s,t,e)}),n}function fp(t,e){const n=U0(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Fe(n,s)&&s in r?n:r,s,i)}const B0={get:fp(!1,!1)},q0={get:fp(!1,!0)},$0={get:fp(!0,!1)};const jE=new WeakMap,zE=new WeakMap,KE=new WeakMap,j0=new WeakMap;function z0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function K0(t){return t.__v_skip||!Object.isExtensible(t)?0:z0(p0(t))}function gi(t){return ls(t)?t:pp(t,!1,O0,B0,jE)}function HE(t){return pp(t,!1,L0,q0,zE)}function jd(t){return pp(t,!0,M0,$0,KE)}function pp(t,e,n,r,s){if(!ze(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=K0(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function ns(t){return ls(t)?ns(t.__v_raw):!!(t&&t.__v_isReactive)}function ls(t){return!!(t&&t.__v_isReadonly)}function wn(t){return!!(t&&t.__v_isShallow)}function mp(t){return t?!!t.__v_raw:!1}function Ae(t){const e=t&&t.__v_raw;return e?Ae(e):t}function _i(t){return!Fe(t,"__v_skip")&&Object.isExtensible(t)&&TE(t,"__v_skip",!0),t}const xt=t=>ze(t)?gi(t):t,Hc=t=>ze(t)?jd(t):t;function dt(t){return t?t.__v_isRef===!0:!1}function Ne(t){return GE(t,!1)}function H0(t){return GE(t,!0)}function GE(t,e){return dt(t)?t:new G0(t,e)}class G0{constructor(e,n){this.dep=new dp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ae(e),this._value=n?e:xt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||wn(e)||ls(e);e=r?e:Ae(e),ts(e,n)&&(this._rawValue=e,this._value=r?e:xt(e),this.dep.trigger())}}function Qs(t){return dt(t)?t.value:t}const W0={get:(t,e,n)=>e==="__v_raw"?t:Qs(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return dt(s)&&!dt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function WE(t){return ns(t)?t:new Proxy(t,W0)}function Q0(t){const e=_e(t)?new Array(t.length):{};for(const n in t)e[n]=Y0(t,n);return e}class J0{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return P0(Ae(this._object),this._key)}}function Y0(t,e,n){const r=t[e];return dt(r)?r:new J0(t,e,n)}class X0{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new dp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return NE(this,!0),!0}get value(){const e=this.dep.track();return LE(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Z0(t,e,n=!1){let r,s;return Te(t)?r=t:(r=t.get,s=t.set),new X0(r,s,n)}const ec={},Gc=new WeakMap;let Ns;function eR(t,e=!1,n=Ns){if(n){let r=Gc.get(n);r||Gc.set(n,r=[]),r.push(t)}}function tR(t,e,n=He){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,u=V=>s?V:wn(V)||s===!1||s===0?ur(V,1):ur(V);let h,d,p,g,T=!1,P=!1;if(dt(t)?(d=()=>t.value,T=wn(t)):ns(t)?(d=()=>u(t),T=!0):_e(t)?(P=!0,T=t.some(V=>ns(V)||wn(V)),d=()=>t.map(V=>{if(dt(V))return V.value;if(ns(V))return u(V);if(Te(V))return l?l(V,2):V()})):Te(t)?e?d=l?()=>l(t,2):t:d=()=>{if(p){mr();try{p()}finally{gr()}}const V=Ns;Ns=h;try{return l?l(t,3,[g]):t(g)}finally{Ns=V}}:d=Gn,e&&s){const V=d,L=s===!0?1/0:s;d=()=>ur(V(),L)}const C=xE(),D=()=>{h.stop(),C&&C.active&&sp(C.effects,h)};if(i&&e){const V=e;e=(...L)=>{V(...L),D()}}let S=P?new Array(t.length).fill(ec):ec;const x=V=>{if(!(!(h.flags&1)||!h.dirty&&!V))if(e){const L=h.run();if(s||T||(P?L.some((q,A)=>ts(q,S[A])):ts(L,S))){p&&p();const q=Ns;Ns=h;try{const A=[L,S===ec?void 0:P&&S[0]===ec?[]:S,g];S=L,l?l(e,3,A):e(...A)}finally{Ns=q}}}else h.run()};return a&&a(x),h=new VE(d),h.scheduler=o?()=>o(x,!1):x,g=V=>eR(V,!1,h),p=h.onStop=()=>{const V=Gc.get(h);if(V){if(l)l(V,4);else for(const L of V)L();Gc.delete(h)}},e?r?x(!0):S=h.run():o?o(x.bind(null,!0),!0):h.run(),D.pause=h.pause.bind(h),D.resume=h.resume.bind(h),D.stop=D,D}function ur(t,e=1/0,n){if(e<=0||!ze(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,dt(t))ur(t.value,e,n);else if(_e(t))for(let r=0;r<t.length;r++)ur(t[r],e,n);else if(Ou(t)||Zi(t))t.forEach(r=>{ur(r,e,n)});else if(IE(t)){for(const r in t)ur(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&ur(t[r],e,n)}return t}function Il(t,e,n,r){try{return r?t(...r):t()}catch(s){qu(s,e,n)}}function Dn(t,e,n,r){if(Te(t)){const s=Il(t,e,n,r);return s&&wE(s)&&s.catch(i=>{qu(i,e,n)}),s}if(_e(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Dn(t[i],e,n,r));return s}}function qu(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||He;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,l,u)===!1)return}a=a.parent}if(i){mr(),Il(i,null,10,[t,l,u]),gr();return}}nR(t,n,s,r,o)}function nR(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Jt=[];let Un=-1;const to=[];let $r=null,$i=0;const QE=Promise.resolve();let Wc=null;function en(t){const e=Wc||QE;return t?e.then(this?t.bind(this):t):e}function rR(t){let e=Un+1,n=Jt.length;for(;e<n;){const r=e+n>>>1,s=Jt[r],i=Ya(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function gp(t){if(!(t.flags&1)){const e=Ya(t),n=Jt[Jt.length-1];!n||!(t.flags&2)&&e>=Ya(n)?Jt.push(t):Jt.splice(rR(e),0,t),t.flags|=1,JE()}}function JE(){Wc||(Wc=QE.then(XE))}function sR(t){_e(t)?to.push(...t):$r&&t.id===-1?$r.splice($i+1,0,t):t.flags&1||(to.push(t),t.flags|=1),JE()}function Ng(t,e,n=Un+1){for(;n<Jt.length;n++){const r=Jt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Jt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function YE(t){if(to.length){const e=[...new Set(to)].sort((n,r)=>Ya(n)-Ya(r));if(to.length=0,$r){$r.push(...e);return}for($r=e,$i=0;$i<$r.length;$i++){const n=$r[$i];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}$r=null,$i=0}}const Ya=t=>t.id==null?t.flags&2?-1:1/0:t.id;function XE(t){try{for(Un=0;Un<Jt.length;Un++){const e=Jt[Un];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Il(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Un<Jt.length;Un++){const e=Jt[Un];e&&(e.flags&=-2)}Un=-1,Jt.length=0,YE(),Wc=null,(Jt.length||to.length)&&XE()}}let un=null,ZE=null;function Qc(t){const e=un;return un=t,ZE=t&&t.type.__scopeId||null,e}function iR(t,e=un,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&eu(-1);const i=Qc(e);let o;try{o=t(...s)}finally{Qc(i),r._d&&eu(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ew(t,e){if(un===null)return t;const n=Wu(un),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=He]=e[s];i&&(Te(i)&&(i={mounted:i,updated:i}),i.deep&&ur(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Cs(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(mr(),Dn(l,n,8,[t.el,a,t,e]),gr())}}const tw=Symbol("_vte"),nw=t=>t.__isTeleport,xa=t=>t&&(t.disabled||t.disabled===""),Og=t=>t&&(t.defer||t.defer===""),Mg=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Lg=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,zd=(t,e)=>{const n=t&&t.to;return rt(n)?e?e(n):null:n},rw={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,u){const{mc:h,pc:d,pbc:p,o:{insert:g,querySelector:T,createText:P,createComment:C}}=u,D=xa(e.props);let{shapeFlag:S,children:x,dynamicChildren:V}=e;if(t==null){const L=e.el=P(""),q=e.anchor=P("");g(L,n,r),g(q,n,r);const A=(w,E)=>{S&16&&h(x,w,E,s,i,o,a,l)},y=()=>{const w=e.target=zd(e.props,T),E=sw(w,e,P,g);w&&(o!=="svg"&&Mg(w)?o="svg":o!=="mathml"&&Lg(w)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(w),D||(A(w,E),Ec(e,!1)))};D&&(A(n,q),Ec(e,!0)),Og(e.props)?(e.el.__isMounted=!1,Et(()=>{y(),delete e.el.__isMounted},i)):y()}else{if(Og(e.props)&&t.el.__isMounted===!1){Et(()=>{rw.process(t,e,n,r,s,i,o,a,l,u)},i);return}e.el=t.el,e.targetStart=t.targetStart;const L=e.anchor=t.anchor,q=e.target=t.target,A=e.targetAnchor=t.targetAnchor,y=xa(t.props),w=y?n:q,E=y?L:A;if(o==="svg"||Mg(q)?o="svg":(o==="mathml"||Lg(q))&&(o="mathml"),V?(p(t.dynamicChildren,V,w,s,i,o,a),bp(t,e,!0)):l||d(t,e,w,E,s,i,o,a,!1),D)y?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):tc(e,n,L,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const v=e.target=zd(e.props,T);v&&tc(e,v,null,u,0)}else y&&tc(e,q,A,u,1);Ec(e,D)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:d,props:p}=t;if(d&&(s(u),s(h)),i&&s(l),o&16){const g=i||!xa(p);for(let T=0;T<a.length;T++){const P=a[T];r(P,e,n,g,!!P.dynamicChildren)}}},move:tc,hydrate:oR};function tc(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=t,d=i===2;if(d&&r(o,e,n),(!d||xa(h))&&l&16)for(let p=0;p<u.length;p++)s(u[p],e,n,2);d&&r(a,e,n)}function oR(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},d){function p(P,C,D,S){C.anchor=d(o(P),C,a(P),n,r,s,i),C.targetStart=D,C.targetAnchor=S}const g=e.target=zd(e.props,l),T=xa(e.props);if(g){const P=g._lpa||g.firstChild;if(e.shapeFlag&16)if(T)p(t,e,P,P&&o(P));else{e.anchor=o(t);let C=P;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")e.targetStart=C;else if(C.data==="teleport anchor"){e.targetAnchor=C,g._lpa=e.targetAnchor&&o(e.targetAnchor);break}}C=o(C)}e.targetAnchor||sw(g,e,h,u),d(P&&o(P),e,g,n,r,s,i)}Ec(e,T)}else T&&e.shapeFlag&16&&p(t,e,t,o(t));return e.anchor&&o(e.anchor)}const aR=rw;function Ec(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function sw(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[tw]=i,t&&(r(s,t),r(i,t)),i}const lr=Symbol("_leaveCb"),nc=Symbol("_enterCb");function iw(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Tr(()=>{t.isMounted=!0}),Tn(()=>{t.isUnmounting=!0}),t}const gn=[Function,Array],ow={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:gn,onEnter:gn,onAfterEnter:gn,onEnterCancelled:gn,onBeforeLeave:gn,onLeave:gn,onAfterLeave:gn,onLeaveCancelled:gn,onBeforeAppear:gn,onAppear:gn,onAfterAppear:gn,onAppearCancelled:gn},aw=t=>{const e=t.subTree;return e.component?aw(e.component):e},lR={name:"BaseTransition",props:ow,setup(t,{slots:e}){const n=tt(),r=iw();return()=>{const s=e.default&&_p(e.default(),!0);if(!s||!s.length)return;const i=lw(s),o=Ae(t),{mode:a}=o;if(r.isLeaving)return Yh(i);const l=Fg(i);if(!l)return Yh(i);let u=Xa(l,o,r,n,d=>u=d);l.type!==qt&&cs(l,u);let h=n.subTree&&Fg(n.subTree);if(h&&h.type!==qt&&!Hr(h,l)&&aw(n).type!==qt){let d=Xa(h,o,r,n);if(cs(h,d),a==="out-in"&&l.type!==qt)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},Yh(i);a==="in-out"&&l.type!==qt?d.delayLeave=(p,g,T)=>{const P=cw(r,h);P[String(h.key)]=h,p[lr]=()=>{g(),p[lr]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{T(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function lw(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==qt){e=n;break}}return e}const cR=lR;function cw(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Xa(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:g,onAfterLeave:T,onLeaveCancelled:P,onBeforeAppear:C,onAppear:D,onAfterAppear:S,onAppearCancelled:x}=e,V=String(t.key),L=cw(n,t),q=(w,E)=>{w&&Dn(w,r,9,E)},A=(w,E)=>{const v=E[1];q(w,E),_e(w)?w.every(b=>b.length<=1)&&v():w.length<=1&&v()},y={mode:o,persisted:a,beforeEnter(w){let E=l;if(!n.isMounted)if(i)E=C||l;else return;w[lr]&&w[lr](!0);const v=L[V];v&&Hr(t,v)&&v.el[lr]&&v.el[lr](),q(E,[w])},enter(w){let E=u,v=h,b=d;if(!n.isMounted)if(i)E=D||u,v=S||h,b=x||d;else return;let _=!1;const U=w[nc]=ne=>{_||(_=!0,ne?q(b,[w]):q(v,[w]),y.delayedLeave&&y.delayedLeave(),w[nc]=void 0)};E?A(E,[w,U]):U()},leave(w,E){const v=String(t.key);if(w[nc]&&w[nc](!0),n.isUnmounting)return E();q(p,[w]);let b=!1;const _=w[lr]=U=>{b||(b=!0,E(),U?q(P,[w]):q(T,[w]),w[lr]=void 0,L[v]===t&&delete L[v])};L[v]=t,g?A(g,[w,_]):_()},clone(w){const E=Xa(w,e,n,r,s);return s&&s(E),E}};return y}function Yh(t){if(ju(t))return t=_r(t),t.children=null,t}function Fg(t){if(!ju(t))return nw(t.type)&&t.children?lw(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Te(n.default))return n.default()}}function cs(t,e){t.shapeFlag&6&&t.component?(t.transition=e,cs(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function _p(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Pn?(o.patchFlag&128&&s++,r=r.concat(_p(o.children,e,a))):(e||o.type!==qt)&&r.push(a!=null?_r(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function $u(t,e){return Te(t)?wt({name:t.name},e,{setup:t}):t}function uw(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Jc=new WeakMap;function Va(t,e,n,r,s=!1){if(_e(t)){t.forEach((T,P)=>Va(T,e&&(_e(e)?e[P]:e),n,r,s));return}if(no(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Va(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Wu(r.component):r.el,o=s?null:i,{i:a,r:l}=t,u=e&&e.r,h=a.refs===He?a.refs={}:a.refs,d=a.setupState,p=Ae(d),g=d===He?EE:T=>Fe(p,T);if(u!=null&&u!==l){if(Ug(e),rt(u))h[u]=null,g(u)&&(d[u]=null);else if(dt(u)){u.value=null;const T=e;T.k&&(h[T.k]=null)}}if(Te(l))Il(l,a,12,[o,h]);else{const T=rt(l),P=dt(l);if(T||P){const C=()=>{if(t.f){const D=T?g(l)?d[l]:h[l]:l.value;if(s)_e(D)&&sp(D,i);else if(_e(D))D.includes(i)||D.push(i);else if(T)h[l]=[i],g(l)&&(d[l]=h[l]);else{const S=[i];l.value=S,t.k&&(h[t.k]=S)}}else T?(h[l]=o,g(l)&&(d[l]=o)):P&&(l.value=o,t.k&&(h[t.k]=o))};if(o){const D=()=>{C(),Jc.delete(t)};D.id=-1,Jc.set(t,D),Et(D,n)}else Ug(t),C()}}}function Ug(t){const e=Jc.get(t);e&&(e.flags|=8,Jc.delete(t))}Fu().requestIdleCallback;Fu().cancelIdleCallback;const no=t=>!!t.type.__asyncLoader,ju=t=>t.type.__isKeepAlive,uR={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=tt(),r=n.ctx;if(!r.renderer)return()=>{const S=e.default&&e.default();return S&&S.length===1?S[0]:S};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:d}}}=r,p=d("div");r.activate=(S,x,V,L,q)=>{const A=S.component;u(S,x,V,0,a),l(A.vnode,S,x,V,A,a,L,S.slotScopeIds,q),Et(()=>{A.isDeactivated=!1,A.a&&eo(A.a);const y=S.props&&S.props.onVnodeMounted;y&&yn(y,A.parent,S)},a)},r.deactivate=S=>{const x=S.component;Xc(x.m),Xc(x.a),u(S,p,null,1,a),Et(()=>{x.da&&eo(x.da);const V=S.props&&S.props.onVnodeUnmounted;V&&yn(V,x.parent,S),x.isDeactivated=!0},a)};function g(S){Xh(S),h(S,n,a,!0)}function T(S){s.forEach((x,V)=>{const L=Jd(x.type);L&&!S(L)&&P(V)})}function P(S){const x=s.get(S);x&&(!o||!Hr(x,o))?g(x):o&&Xh(o),s.delete(S),i.delete(S)}Ge(()=>[t.include,t.exclude],([S,x])=>{S&&T(V=>ga(S,V)),x&&T(V=>!ga(x,V))},{flush:"post",deep:!0});let C=null;const D=()=>{C!=null&&(Zc(n.subTree.type)?Et(()=>{s.set(C,rc(n.subTree))},n.subTree.suspense):s.set(C,rc(n.subTree)))};return Tr(D),yp(D),Tn(()=>{s.forEach(S=>{const{subTree:x,suspense:V}=n,L=rc(x);if(S.type===L.type&&S.key===L.key){Xh(L);const q=L.component.da;q&&Et(q,V);return}g(S)})}),()=>{if(C=null,!e.default)return o=null;const S=e.default(),x=S[0];if(S.length>1)return o=null,S;if(!el(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return o=null,x;let V=rc(x);if(V.type===qt)return o=null,V;const L=V.type,q=Jd(no(V)?V.type.__asyncResolved||{}:L),{include:A,exclude:y,max:w}=t;if(A&&(!q||!ga(A,q))||y&&q&&ga(y,q))return V.shapeFlag&=-257,o=V,x;const E=V.key==null?L:V.key,v=s.get(E);return V.el&&(V=_r(V),x.shapeFlag&128&&(x.ssContent=V)),C=E,v?(V.el=v.el,V.component=v.component,V.transition&&cs(V,V.transition),V.shapeFlag|=512,i.delete(E),i.add(E)):(i.add(E),w&&i.size>parseInt(w,10)&&P(i.values().next().value)),V.shapeFlag|=256,o=V,Zc(x.type)?x:V}}},OU=uR;function ga(t,e){return _e(t)?t.some(n=>ga(n,e)):rt(t)?t.split(",").includes(e):f0(t)?(t.lastIndex=0,t.test(e)):!1}function hw(t,e){dw(t,"a",e)}function zu(t,e){dw(t,"da",e)}function dw(t,e,n=$t){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Ku(e,r,n),n){let s=n.parent;for(;s&&s.parent;)ju(s.parent.vnode)&&hR(r,e,n,s),s=s.parent}}function hR(t,e,n,r){const s=Ku(e,t,r,!0);vp(()=>{sp(r[e],s)},n)}function Xh(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function rc(t){return t.shapeFlag&128?t.ssContent:t}function Ku(t,e,n=$t,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{mr();const a=Tl(n),l=Dn(e,n,t,o);return a(),gr(),l});return r?s.unshift(i):s.push(i),i}}const Ir=t=>(e,n=$t)=>{(!tl||t==="sp")&&Ku(t,(...r)=>e(...r),n)},dR=Ir("bm"),Tr=Ir("m"),fw=Ir("bu"),yp=Ir("u"),Tn=Ir("bum"),vp=Ir("um"),fR=Ir("sp"),pR=Ir("rtg"),mR=Ir("rtc");function gR(t,e=$t){Ku("ec",t,e)}const _R="components";function yR(t,e){return ER(_R,t,!0,e)||t}const vR=Symbol.for("v-ndc");function ER(t,e,n=!0,r=!1){const s=un||$t;if(s){const i=s.type;{const a=Jd(i,!1);if(a&&(a===e||a===In(e)||a===Lu(In(e))))return i}const o=Bg(s[t]||i[t],e)||Bg(s.appContext[t],e);return!o&&r?i:o}}function Bg(t,e){return t&&(t[e]||t[In(e)]||t[Lu(In(e))])}function MU(t,e,n,r){let s;const i=n,o=_e(t);if(o||rt(t)){const a=o&&ns(t);let l=!1,u=!1;a&&(l=!wn(t),u=ls(t),t=Bu(t)),s=new Array(t.length);for(let h=0,d=t.length;h<d;h++)s[h]=e(l?u?Hc(xt(t[h])):xt(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(ze(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];s[l]=e(t[h],h,l,i)}}else s=[];return s}const Kd=t=>t?Nw(t)?Wu(t):Kd(t.parent):null,Da=wt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Kd(t.parent),$root:t=>Kd(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>mw(t),$forceUpdate:t=>t.f||(t.f=()=>{gp(t.update)}),$nextTick:t=>t.n||(t.n=en.bind(t.proxy)),$watch:t=>$R.bind(t)}),Zh=(t,e)=>t!==He&&!t.__isScriptSetup&&Fe(t,e),wR={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Zh(r,e))return o[e]=1,r[e];if(s!==He&&Fe(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Fe(u,e))return o[e]=3,i[e];if(n!==He&&Fe(n,e))return o[e]=4,n[e];Hd&&(o[e]=0)}}const h=Da[e];let d,p;if(h)return e==="$attrs"&&Bt(t.attrs,"get",""),h(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==He&&Fe(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,Fe(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Zh(s,e)?(s[e]=n,!0):r!==He&&Fe(r,e)?(r[e]=n,!0):Fe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},a){let l,u;return!!(n[a]||t!==He&&a[0]!=="$"&&Fe(t,a)||Zh(e,a)||(l=i[0])&&Fe(l,a)||Fe(r,a)||Fe(Da,a)||Fe(s.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Fe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function qg(t){return _e(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Hd=!0;function bR(t){const e=mw(t),n=t.proxy,r=t.ctx;Hd=!1,e.beforeCreate&&$g(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:g,updated:T,activated:P,deactivated:C,beforeDestroy:D,beforeUnmount:S,destroyed:x,unmounted:V,render:L,renderTracked:q,renderTriggered:A,errorCaptured:y,serverPrefetch:w,expose:E,inheritAttrs:v,components:b,directives:_,filters:U}=e;if(u&&IR(u,r,null),o)for(const ee in o){const K=o[ee];Te(K)&&(r[ee]=K.bind(n))}if(s){const ee=s.call(n,n);ze(ee)&&(t.data=gi(ee))}if(Hd=!0,i)for(const ee in i){const K=i[ee],ye=Te(K)?K.bind(n,n):Te(K.get)?K.get.bind(n,n):Gn,Je=!Te(K)&&Te(K.set)?K.set.bind(n):Gn,Ie=$({get:ye,set:Je});Object.defineProperty(r,ee,{enumerable:!0,configurable:!0,get:()=>Ie.value,set:Q=>Ie.value=Q})}if(a)for(const ee in a)pw(a[ee],r,n,ee);if(l){const ee=Te(l)?l.call(n):l;Reflect.ownKeys(ee).forEach(K=>{wc(K,ee[K])})}h&&$g(h,t,"c");function ue(ee,K){_e(K)?K.forEach(ye=>ee(ye.bind(n))):K&&ee(K.bind(n))}if(ue(dR,d),ue(Tr,p),ue(fw,g),ue(yp,T),ue(hw,P),ue(zu,C),ue(gR,y),ue(mR,q),ue(pR,A),ue(Tn,S),ue(vp,V),ue(fR,w),_e(E))if(E.length){const ee=t.exposed||(t.exposed={});E.forEach(K=>{Object.defineProperty(ee,K,{get:()=>n[K],set:ye=>n[K]=ye,enumerable:!0})})}else t.exposed||(t.exposed={});L&&t.render===Gn&&(t.render=L),v!=null&&(t.inheritAttrs=v),b&&(t.components=b),_&&(t.directives=_),w&&uw(t)}function IR(t,e,n=Gn){_e(t)&&(t=Gd(t));for(const r in t){const s=t[r];let i;ze(s)?"default"in s?i=bn(s.from||r,s.default,!0):i=bn(s.from||r):i=bn(s),dt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function $g(t,e,n){Dn(_e(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function pw(t,e,n,r){let s=r.includes(".")?Rw(n,r):()=>n[r];if(rt(t)){const i=e[t];Te(i)&&Ge(s,i)}else if(Te(t))Ge(s,t.bind(n));else if(ze(t))if(_e(t))t.forEach(i=>pw(i,e,n,r));else{const i=Te(t.handler)?t.handler.bind(n):e[t.handler];Te(i)&&Ge(s,i,t)}}function mw(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>Yc(l,u,o,!0)),Yc(l,e,o)),ze(e)&&i.set(e,l),l}function Yc(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Yc(t,i,n,!0),s&&s.forEach(o=>Yc(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=TR[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const TR={data:jg,props:zg,emits:zg,methods:_a,computed:_a,beforeCreate:Wt,created:Wt,beforeMount:Wt,mounted:Wt,beforeUpdate:Wt,updated:Wt,beforeDestroy:Wt,beforeUnmount:Wt,destroyed:Wt,unmounted:Wt,activated:Wt,deactivated:Wt,errorCaptured:Wt,serverPrefetch:Wt,components:_a,directives:_a,watch:SR,provide:jg,inject:AR};function jg(t,e){return e?t?function(){return wt(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function AR(t,e){return _a(Gd(t),Gd(e))}function Gd(t){if(_e(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Wt(t,e){return t?[...new Set([].concat(t,e))]:e}function _a(t,e){return t?wt(Object.create(null),t,e):e}function zg(t,e){return t?_e(t)&&_e(e)?[...new Set([...t,...e])]:wt(Object.create(null),qg(t),qg(e??{})):e}function SR(t,e){if(!t)return e;if(!e)return t;const n=wt(Object.create(null),t);for(const r in e)n[r]=Wt(t[r],e[r]);return n}function gw(){return{app:null,config:{isNativeTag:EE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let RR=0;function CR(t,e){return function(r,s=null){Te(r)||(r=wt({},r)),s!=null&&!ze(s)&&(s=null);const i=gw(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:RR++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:uC,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&Te(h.install)?(o.add(h),h.install(u,...d)):Te(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,p){if(!l){const g=u._ceVNode||Yt(r,s);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(g,h,p),l=!0,u._container=h,h.__vue_app__=u,Wu(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Dn(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=Js;Js=u;try{return h()}finally{Js=d}}};return u}}let Js=null;function wc(t,e){if($t){let n=$t.provides;const r=$t.parent&&$t.parent.provides;r===n&&(n=$t.provides=Object.create(r)),n[t]=e}}function bn(t,e,n=!1){const r=tt();if(r||Js){let s=Js?Js._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Te(e)?e.call(r&&r.proxy):e}}function PR(){return!!(tt()||Js)}const _w={},yw=()=>Object.create(_w),vw=t=>Object.getPrototypeOf(t)===_w;function kR(t,e,n,r=!1){const s={},i=yw();t.propsDefaults=Object.create(null),Ew(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:HE(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function xR(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Ae(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let p=h[d];if(Hu(t.emitsOptions,p))continue;const g=e[p];if(l)if(Fe(i,p))g!==i[p]&&(i[p]=g,u=!0);else{const T=In(p);s[T]=Wd(l,a,T,g,t,!1)}else g!==i[p]&&(i[p]=g,u=!0)}}}else{Ew(t,e,s,i)&&(u=!0);let h;for(const d in a)(!e||!Fe(e,d)&&((h=gs(d))===d||!Fe(e,h)))&&(l?n&&(n[d]!==void 0||n[h]!==void 0)&&(s[d]=Wd(l,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!Fe(e,d))&&(delete i[d],u=!0)}u&&cr(t.attrs,"set","")}function Ew(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ca(l))continue;const u=e[l];let h;s&&Fe(s,h=In(l))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:Hu(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=Ae(n),u=a||He;for(let h=0;h<i.length;h++){const d=i[h];n[d]=Wd(s,l,d,u[d],t,!Fe(u,d))}}return o}function Wd(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Fe(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Te(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=Tl(s);r=u[n]=l.call(null,e),h()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===gs(n))&&(r=!0))}return r}const VR=new WeakMap;function ww(t,e,n=!1){const r=n?VR:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Te(t)){const h=d=>{l=!0;const[p,g]=ww(d,e,!0);wt(o,p),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!l)return ze(t)&&r.set(t,Xi),Xi;if(_e(i))for(let h=0;h<i.length;h++){const d=In(i[h]);Kg(d)&&(o[d]=He)}else if(i)for(const h in i){const d=In(h);if(Kg(d)){const p=i[h],g=o[d]=_e(p)||Te(p)?{type:p}:wt({},p),T=g.type;let P=!1,C=!0;if(_e(T))for(let D=0;D<T.length;++D){const S=T[D],x=Te(S)&&S.name;if(x==="Boolean"){P=!0;break}else x==="String"&&(C=!1)}else P=Te(T)&&T.name==="Boolean";g[0]=P,g[1]=C,(P||Fe(g,"default"))&&a.push(d)}}const u=[o,a];return ze(t)&&r.set(t,u),u}function Kg(t){return t[0]!=="$"&&!Ca(t)}const Ep=t=>t==="_"||t==="_ctx"||t==="$stable",wp=t=>_e(t)?t.map(qn):[qn(t)],DR=(t,e,n)=>{if(e._n)return e;const r=iR((...s)=>wp(e(...s)),n);return r._c=!1,r},bw=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Ep(s))continue;const i=t[s];if(Te(i))e[s]=DR(s,i,r);else if(i!=null){const o=wp(i);e[s]=()=>o}}},Iw=(t,e)=>{const n=wp(e);t.slots.default=()=>n},Tw=(t,e,n)=>{for(const r in e)(n||!Ep(r))&&(t[r]=e[r])},NR=(t,e,n)=>{const r=t.slots=yw();if(t.vnode.shapeFlag&32){const s=e._;s?(Tw(r,e,n),n&&TE(r,"_",s,!0)):bw(e,r)}else e&&Iw(t,e)},OR=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=He;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Tw(s,e,n):(i=!e.$stable,bw(e,s)),o=e}else e&&(Iw(t,e),o={default:1});if(i)for(const a in s)!Ep(a)&&o[a]==null&&delete s[a]},Et=JR;function MR(t){return LR(t)}function LR(t,e){const n=Fu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:p,setScopeId:g=Gn,insertStaticContent:T}=t,P=(R,k,N,G=null,W=null,H=null,ae=void 0,Z=null,X=!!k.dynamicChildren)=>{if(R===k)return;R&&!Hr(R,k)&&(G=F(R),Q(R,W,H,!0),R=null),k.patchFlag===-2&&(X=!1,k.dynamicChildren=null);const{type:J,ref:ve,shapeFlag:le}=k;switch(J){case Gu:C(R,k,N,G);break;case qt:D(R,k,N,G);break;case bc:R==null&&S(k,N,G,ae);break;case Pn:b(R,k,N,G,W,H,ae,Z,X);break;default:le&1?L(R,k,N,G,W,H,ae,Z,X):le&6?_(R,k,N,G,W,H,ae,Z,X):(le&64||le&128)&&J.process(R,k,N,G,W,H,ae,Z,X,de)}ve!=null&&W?Va(ve,R&&R.ref,H,k||R,!k):ve==null&&R&&R.ref!=null&&Va(R.ref,null,H,R,!0)},C=(R,k,N,G)=>{if(R==null)r(k.el=a(k.children),N,G);else{const W=k.el=R.el;k.children!==R.children&&u(W,k.children)}},D=(R,k,N,G)=>{R==null?r(k.el=l(k.children||""),N,G):k.el=R.el},S=(R,k,N,G)=>{[R.el,R.anchor]=T(R.children,k,N,G,R.el,R.anchor)},x=({el:R,anchor:k},N,G)=>{let W;for(;R&&R!==k;)W=p(R),r(R,N,G),R=W;r(k,N,G)},V=({el:R,anchor:k})=>{let N;for(;R&&R!==k;)N=p(R),s(R),R=N;s(k)},L=(R,k,N,G,W,H,ae,Z,X)=>{if(k.type==="svg"?ae="svg":k.type==="math"&&(ae="mathml"),R==null)q(k,N,G,W,H,ae,Z,X);else{const J=R.el&&R.el._isVueCE?R.el:null;try{J&&J._beginPatch(),w(R,k,W,H,ae,Z,X)}finally{J&&J._endPatch()}}},q=(R,k,N,G,W,H,ae,Z)=>{let X,J;const{props:ve,shapeFlag:le,transition:ge,dirs:Ee}=R;if(X=R.el=o(R.type,H,ve&&ve.is,ve),le&8?h(X,R.children):le&16&&y(R.children,X,null,G,W,ed(R,H),ae,Z),Ee&&Cs(R,null,G,"created"),A(X,R,R.scopeId,ae,G),ve){for(const Be in ve)Be!=="value"&&!Ca(Be)&&i(X,Be,null,ve[Be],H,G);"value"in ve&&i(X,"value",null,ve.value,H),(J=ve.onVnodeBeforeMount)&&yn(J,G,R)}Ee&&Cs(R,null,G,"beforeMount");const Pe=FR(W,ge);Pe&&ge.beforeEnter(X),r(X,k,N),((J=ve&&ve.onVnodeMounted)||Pe||Ee)&&Et(()=>{J&&yn(J,G,R),Pe&&ge.enter(X),Ee&&Cs(R,null,G,"mounted")},W)},A=(R,k,N,G,W)=>{if(N&&g(R,N),G)for(let H=0;H<G.length;H++)g(R,G[H]);if(W){let H=W.subTree;if(k===H||Zc(H.type)&&(H.ssContent===k||H.ssFallback===k)){const ae=W.vnode;A(R,ae,ae.scopeId,ae.slotScopeIds,W.parent)}}},y=(R,k,N,G,W,H,ae,Z,X=0)=>{for(let J=X;J<R.length;J++){const ve=R[J]=Z?jr(R[J]):qn(R[J]);P(null,ve,k,N,G,W,H,ae,Z)}},w=(R,k,N,G,W,H,ae)=>{const Z=k.el=R.el;let{patchFlag:X,dynamicChildren:J,dirs:ve}=k;X|=R.patchFlag&16;const le=R.props||He,ge=k.props||He;let Ee;if(N&&Ps(N,!1),(Ee=ge.onVnodeBeforeUpdate)&&yn(Ee,N,k,R),ve&&Cs(k,R,N,"beforeUpdate"),N&&Ps(N,!0),(le.innerHTML&&ge.innerHTML==null||le.textContent&&ge.textContent==null)&&h(Z,""),J?E(R.dynamicChildren,J,Z,N,G,ed(k,W),H):ae||K(R,k,Z,null,N,G,ed(k,W),H,!1),X>0){if(X&16)v(Z,le,ge,N,W);else if(X&2&&le.class!==ge.class&&i(Z,"class",null,ge.class,W),X&4&&i(Z,"style",le.style,ge.style,W),X&8){const Pe=k.dynamicProps;for(let Be=0;Be<Pe.length;Be++){const Oe=Pe[Be],Dt=le[Oe],Nt=ge[Oe];(Nt!==Dt||Oe==="value")&&i(Z,Oe,Dt,Nt,W,N)}}X&1&&R.children!==k.children&&h(Z,k.children)}else!ae&&J==null&&v(Z,le,ge,N,W);((Ee=ge.onVnodeUpdated)||ve)&&Et(()=>{Ee&&yn(Ee,N,k,R),ve&&Cs(k,R,N,"updated")},G)},E=(R,k,N,G,W,H,ae)=>{for(let Z=0;Z<k.length;Z++){const X=R[Z],J=k[Z],ve=X.el&&(X.type===Pn||!Hr(X,J)||X.shapeFlag&198)?d(X.el):N;P(X,J,ve,null,G,W,H,ae,!0)}},v=(R,k,N,G,W)=>{if(k!==N){if(k!==He)for(const H in k)!Ca(H)&&!(H in N)&&i(R,H,k[H],null,W,G);for(const H in N){if(Ca(H))continue;const ae=N[H],Z=k[H];ae!==Z&&H!=="value"&&i(R,H,Z,ae,W,G)}"value"in N&&i(R,"value",k.value,N.value,W)}},b=(R,k,N,G,W,H,ae,Z,X)=>{const J=k.el=R?R.el:a(""),ve=k.anchor=R?R.anchor:a("");let{patchFlag:le,dynamicChildren:ge,slotScopeIds:Ee}=k;Ee&&(Z=Z?Z.concat(Ee):Ee),R==null?(r(J,N,G),r(ve,N,G),y(k.children||[],N,ve,W,H,ae,Z,X)):le>0&&le&64&&ge&&R.dynamicChildren?(E(R.dynamicChildren,ge,N,W,H,ae,Z),(k.key!=null||W&&k===W.subTree)&&bp(R,k,!0)):K(R,k,N,ve,W,H,ae,Z,X)},_=(R,k,N,G,W,H,ae,Z,X)=>{k.slotScopeIds=Z,R==null?k.shapeFlag&512?W.ctx.activate(k,N,G,ae,X):U(k,N,G,W,H,ae,X):ne(R,k,X)},U=(R,k,N,G,W,H,ae)=>{const Z=R.component=sC(R,G,W);if(ju(R)&&(Z.ctx.renderer=de),iC(Z,!1,ae),Z.asyncDep){if(W&&W.registerDep(Z,ue,ae),!R.el){const X=Z.subTree=Yt(qt);D(null,X,k,N),R.placeholder=X.el}}else ue(Z,R,k,N,W,H,ae)},ne=(R,k,N)=>{const G=k.component=R.component;if(WR(R,k,N))if(G.asyncDep&&!G.asyncResolved){ee(G,k,N);return}else G.next=k,G.update();else k.el=R.el,G.vnode=k},ue=(R,k,N,G,W,H,ae)=>{const Z=()=>{if(R.isMounted){let{next:le,bu:ge,u:Ee,parent:Pe,vnode:Be}=R;{const sn=Aw(R);if(sn){le&&(le.el=Be.el,ee(R,le,ae)),sn.asyncDep.then(()=>{R.isUnmounted||Z()});return}}let Oe=le,Dt;Ps(R,!1),le?(le.el=Be.el,ee(R,le,ae)):le=Be,ge&&eo(ge),(Dt=le.props&&le.props.onVnodeBeforeUpdate)&&yn(Dt,Pe,le,Be),Ps(R,!0);const Nt=Hg(R),rn=R.subTree;R.subTree=Nt,P(rn,Nt,d(rn.el),F(rn),R,W,H),le.el=Nt.el,Oe===null&&QR(R,Nt.el),Ee&&Et(Ee,W),(Dt=le.props&&le.props.onVnodeUpdated)&&Et(()=>yn(Dt,Pe,le,Be),W)}else{let le;const{el:ge,props:Ee}=k,{bm:Pe,m:Be,parent:Oe,root:Dt,type:Nt}=R,rn=no(k);Ps(R,!1),Pe&&eo(Pe),!rn&&(le=Ee&&Ee.onVnodeBeforeMount)&&yn(le,Oe,k),Ps(R,!0);{Dt.ce&&Dt.ce._def.shadowRoot!==!1&&Dt.ce._injectChildStyle(Nt);const sn=R.subTree=Hg(R);P(null,sn,N,G,R,W,H),k.el=sn.el}if(Be&&Et(Be,W),!rn&&(le=Ee&&Ee.onVnodeMounted)){const sn=k;Et(()=>yn(le,Oe,sn),W)}(k.shapeFlag&256||Oe&&no(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&R.a&&Et(R.a,W),R.isMounted=!0,k=N=G=null}};R.scope.on();const X=R.effect=new VE(Z);R.scope.off();const J=R.update=X.run.bind(X),ve=R.job=X.runIfDirty.bind(X);ve.i=R,ve.id=R.uid,X.scheduler=()=>gp(ve),Ps(R,!0),J()},ee=(R,k,N)=>{k.component=R;const G=R.vnode.props;R.vnode=k,R.next=null,xR(R,k.props,G,N),OR(R,k.children,N),mr(),Ng(R),gr()},K=(R,k,N,G,W,H,ae,Z,X=!1)=>{const J=R&&R.children,ve=R?R.shapeFlag:0,le=k.children,{patchFlag:ge,shapeFlag:Ee}=k;if(ge>0){if(ge&128){Je(J,le,N,G,W,H,ae,Z,X);return}else if(ge&256){ye(J,le,N,G,W,H,ae,Z,X);return}}Ee&8?(ve&16&&pe(J,W,H),le!==J&&h(N,le)):ve&16?Ee&16?Je(J,le,N,G,W,H,ae,Z,X):pe(J,W,H,!0):(ve&8&&h(N,""),Ee&16&&y(le,N,G,W,H,ae,Z,X))},ye=(R,k,N,G,W,H,ae,Z,X)=>{R=R||Xi,k=k||Xi;const J=R.length,ve=k.length,le=Math.min(J,ve);let ge;for(ge=0;ge<le;ge++){const Ee=k[ge]=X?jr(k[ge]):qn(k[ge]);P(R[ge],Ee,N,null,W,H,ae,Z,X)}J>ve?pe(R,W,H,!0,!1,le):y(k,N,G,W,H,ae,Z,X,le)},Je=(R,k,N,G,W,H,ae,Z,X)=>{let J=0;const ve=k.length;let le=R.length-1,ge=ve-1;for(;J<=le&&J<=ge;){const Ee=R[J],Pe=k[J]=X?jr(k[J]):qn(k[J]);if(Hr(Ee,Pe))P(Ee,Pe,N,null,W,H,ae,Z,X);else break;J++}for(;J<=le&&J<=ge;){const Ee=R[le],Pe=k[ge]=X?jr(k[ge]):qn(k[ge]);if(Hr(Ee,Pe))P(Ee,Pe,N,null,W,H,ae,Z,X);else break;le--,ge--}if(J>le){if(J<=ge){const Ee=ge+1,Pe=Ee<ve?k[Ee].el:G;for(;J<=ge;)P(null,k[J]=X?jr(k[J]):qn(k[J]),N,Pe,W,H,ae,Z,X),J++}}else if(J>ge)for(;J<=le;)Q(R[J],W,H,!0),J++;else{const Ee=J,Pe=J,Be=new Map;for(J=Pe;J<=ge;J++){const Ct=k[J]=X?jr(k[J]):qn(k[J]);Ct.key!=null&&Be.set(Ct.key,J)}let Oe,Dt=0;const Nt=ge-Pe+1;let rn=!1,sn=0;const An=new Array(Nt);for(J=0;J<Nt;J++)An[J]=0;for(J=Ee;J<=le;J++){const Ct=R[J];if(Dt>=Nt){Q(Ct,W,H,!0);continue}let Tt;if(Ct.key!=null)Tt=Be.get(Ct.key);else for(Oe=Pe;Oe<=ge;Oe++)if(An[Oe-Pe]===0&&Hr(Ct,k[Oe])){Tt=Oe;break}Tt===void 0?Q(Ct,W,H,!0):(An[Tt-Pe]=J+1,Tt>=sn?sn=Tt:rn=!0,P(Ct,k[Tt],N,null,W,H,ae,Z,X),Dt++)}const Si=rn?UR(An):Xi;for(Oe=Si.length-1,J=Nt-1;J>=0;J--){const Ct=Pe+J,Tt=k[Ct],$o=k[Ct+1],Is=Ct+1<ve?$o.el||$o.placeholder:G;An[J]===0?P(null,Tt,N,Is,W,H,ae,Z,X):rn&&(Oe<0||J!==Si[Oe]?Ie(Tt,N,Is,2):Oe--)}}},Ie=(R,k,N,G,W=null)=>{const{el:H,type:ae,transition:Z,children:X,shapeFlag:J}=R;if(J&6){Ie(R.component.subTree,k,N,G);return}if(J&128){R.suspense.move(k,N,G);return}if(J&64){ae.move(R,k,N,de);return}if(ae===Pn){r(H,k,N);for(let le=0;le<X.length;le++)Ie(X[le],k,N,G);r(R.anchor,k,N);return}if(ae===bc){x(R,k,N);return}if(G!==2&&J&1&&Z)if(G===0)Z.beforeEnter(H),r(H,k,N),Et(()=>Z.enter(H),W);else{const{leave:le,delayLeave:ge,afterLeave:Ee}=Z,Pe=()=>{R.ctx.isUnmounted?s(H):r(H,k,N)},Be=()=>{H._isLeaving&&H[lr](!0),le(H,()=>{Pe(),Ee&&Ee()})};ge?ge(H,Pe,Be):Be()}else r(H,k,N)},Q=(R,k,N,G=!1,W=!1)=>{const{type:H,props:ae,ref:Z,children:X,dynamicChildren:J,shapeFlag:ve,patchFlag:le,dirs:ge,cacheIndex:Ee}=R;if(le===-2&&(W=!1),Z!=null&&(mr(),Va(Z,null,N,R,!0),gr()),Ee!=null&&(k.renderCache[Ee]=void 0),ve&256){k.ctx.deactivate(R);return}const Pe=ve&1&&ge,Be=!no(R);let Oe;if(Be&&(Oe=ae&&ae.onVnodeBeforeUnmount)&&yn(Oe,k,R),ve&6)Xe(R.component,N,G);else{if(ve&128){R.suspense.unmount(N,G);return}Pe&&Cs(R,null,k,"beforeUnmount"),ve&64?R.type.remove(R,k,N,de,G):J&&!J.hasOnce&&(H!==Pn||le>0&&le&64)?pe(J,k,N,!1,!0):(H===Pn&&le&384||!W&&ve&16)&&pe(X,k,N),G&&Re(R)}(Be&&(Oe=ae&&ae.onVnodeUnmounted)||Pe)&&Et(()=>{Oe&&yn(Oe,k,R),Pe&&Cs(R,null,k,"unmounted")},N)},Re=R=>{const{type:k,el:N,anchor:G,transition:W}=R;if(k===Pn){Ue(N,G);return}if(k===bc){V(R);return}const H=()=>{s(N),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(R.shapeFlag&1&&W&&!W.persisted){const{leave:ae,delayLeave:Z}=W,X=()=>ae(N,H);Z?Z(R.el,H,X):X()}else H()},Ue=(R,k)=>{let N;for(;R!==k;)N=p(R),s(R),R=N;s(k)},Xe=(R,k,N)=>{const{bum:G,scope:W,job:H,subTree:ae,um:Z,m:X,a:J}=R;Xc(X),Xc(J),G&&eo(G),W.stop(),H&&(H.flags|=8,Q(ae,R,k,N)),Z&&Et(Z,k),Et(()=>{R.isUnmounted=!0},k)},pe=(R,k,N,G=!1,W=!1,H=0)=>{for(let ae=H;ae<R.length;ae++)Q(R[ae],k,N,G,W)},F=R=>{if(R.shapeFlag&6)return F(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const k=p(R.anchor||R.el),N=k&&k[tw];return N?p(N):k};let se=!1;const oe=(R,k,N)=>{R==null?k._vnode&&Q(k._vnode,null,null,!0):P(k._vnode||null,R,k,null,null,null,N),k._vnode=R,se||(se=!0,Ng(),YE(),se=!1)},de={p:P,um:Q,m:Ie,r:Re,mt:U,mc:y,pc:K,pbc:E,n:F,o:t};return{render:oe,hydrate:void 0,createApp:CR(oe)}}function ed({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ps({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function FR(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function bp(t,e,n=!1){const r=t.children,s=e.children;if(_e(r)&&_e(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=jr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&bp(o,a)),a.type===Gu&&a.patchFlag!==-1&&(a.el=o.el),a.type===qt&&!a.el&&(a.el=o.el)}}function UR(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Aw(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Aw(e)}function Xc(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const BR=Symbol.for("v-scx"),qR=()=>bn(BR);function Ge(t,e,n){return Sw(t,e,n)}function Sw(t,e,n=He){const{immediate:r,deep:s,flush:i,once:o}=n,a=wt({},n),l=e&&r||!e&&i!=="post";let u;if(tl){if(i==="sync"){const g=qR();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Gn,g.resume=Gn,g.pause=Gn,g}}const h=$t;a.call=(g,T,P)=>Dn(g,h,T,P);let d=!1;i==="post"?a.scheduler=g=>{Et(g,h&&h.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(g,T)=>{T?g():gp(g)}),a.augmentJob=g=>{e&&(g.flags|=4),d&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const p=tR(t,e,a);return tl&&(u?u.push(p):l&&p()),p}function $R(t,e,n){const r=this.proxy,s=rt(t)?t.includes(".")?Rw(r,t):()=>r[t]:t.bind(r,r);let i;Te(e)?i=e:(i=e.handler,n=e);const o=Tl(this),a=Sw(s,i.bind(r),n);return o(),a}function Rw(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const jR=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${In(e)}Modifiers`]||t[`${gs(e)}Modifiers`];function zR(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||He;let s=n;const i=e.startsWith("update:"),o=i&&jR(r,e.slice(7));o&&(o.trim&&(s=n.map(h=>rt(h)?h.trim():h)),o.number&&(s=n.map(op)));let a,l=r[a=Hh(e)]||r[a=Hh(In(e))];!l&&i&&(l=r[a=Hh(gs(e))]),l&&Dn(l,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Dn(u,t,6,s)}}const KR=new WeakMap;function Cw(t,e,n=!1){const r=n?KR:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Te(t)){const l=u=>{const h=Cw(u,e,!0);h&&(a=!0,wt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ze(t)&&r.set(t,null),null):(_e(i)?i.forEach(l=>o[l]=null):wt(o,i),ze(t)&&r.set(t,o),o)}function Hu(t,e){return!t||!Nu(e)?!1:(e=e.slice(2).replace(/Once$/,""),Fe(t,e[0].toLowerCase()+e.slice(1))||Fe(t,gs(e))||Fe(t,e))}function Hg(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:p,setupState:g,ctx:T,inheritAttrs:P}=t,C=Qc(t);let D,S;try{if(n.shapeFlag&4){const V=s||r,L=V;D=qn(u.call(L,V,h,d,g,p,T)),S=a}else{const V=e;D=qn(V.length>1?V(d,{attrs:a,slots:o,emit:l}):V(d,null)),S=e.props?a:HR(a)}}catch(V){Na.length=0,qu(V,t,1),D=Yt(qt)}let x=D;if(S&&P!==!1){const V=Object.keys(S),{shapeFlag:L}=x;V.length&&L&7&&(i&&V.some(rp)&&(S=GR(S,i)),x=_r(x,S,!1,!0))}return n.dirs&&(x=_r(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&cs(x,n.transition),D=x,Qc(C),D}const HR=t=>{let e;for(const n in t)(n==="class"||n==="style"||Nu(n))&&((e||(e={}))[n]=t[n]);return e},GR=(t,e)=>{const n={};for(const r in t)(!rp(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function WR(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Gg(r,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const p=h[d];if(o[p]!==r[p]&&!Hu(u,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Gg(r,o,u):!0:!!o;return!1}function Gg(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Hu(n,i))return!0}return!1}function QR({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Zc=t=>t.__isSuspense;function JR(t,e){e&&e.pendingBranch?_e(t)?e.effects.push(...t):e.effects.push(t):sR(t)}const Pn=Symbol.for("v-fgt"),Gu=Symbol.for("v-txt"),qt=Symbol.for("v-cmt"),bc=Symbol.for("v-stc"),Na=[];let hn=null;function Pw(t=!1){Na.push(hn=t?null:[])}function YR(){Na.pop(),hn=Na[Na.length-1]||null}let Za=1;function eu(t,e=!1){Za+=t,t<0&&hn&&e&&(hn.hasOnce=!0)}function kw(t){return t.dynamicChildren=Za>0?hn||Xi:null,YR(),Za>0&&hn&&hn.push(t),t}function LU(t,e,n,r,s,i){return kw(Dw(t,e,n,r,s,i,!0))}function xw(t,e,n,r,s){return kw(Yt(t,e,n,r,s,!0))}function el(t){return t?t.__v_isVNode===!0:!1}function Hr(t,e){return t.type===e.type&&t.key===e.key}const Vw=({key:t})=>t??null,Ic=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?rt(t)||dt(t)||Te(t)?{i:un,r:t,k:e,f:!!n}:t:null);function Dw(t,e=null,n=null,r=0,s=null,i=t===Pn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Vw(e),ref:e&&Ic(e),scopeId:ZE,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:un};return a?(Ip(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=rt(n)?8:16),Za>0&&!o&&hn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&hn.push(l),l}const Yt=XR;function XR(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===vR)&&(t=qt),el(t)){const a=_r(t,e,!0);return n&&Ip(a,n),Za>0&&!i&&hn&&(a.shapeFlag&6?hn[hn.indexOf(t)]=a:hn.push(a)),a.patchFlag=-2,a}if(cC(t)&&(t=t.__vccOpts),e){e=ZR(e);let{class:a,style:l}=e;a&&!rt(a)&&(e.class=lp(a)),ze(l)&&(mp(l)&&!_e(l)&&(l=wt({},l)),e.style=ap(l))}const o=rt(t)?1:Zc(t)?128:nw(t)?64:ze(t)?4:Te(t)?2:0;return Dw(t,e,n,r,s,o,i,!0)}function ZR(t){return t?mp(t)||vw(t)?wt({},t):t:null}function _r(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?tC(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Vw(u),ref:e&&e.ref?n&&i?_e(i)?i.concat(Ic(e)):[i,Ic(e)]:Ic(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Pn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&_r(t.ssContent),ssFallback:t.ssFallback&&_r(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&cs(h,l.clone(h)),h}function eC(t=" ",e=0){return Yt(Gu,null,t,e)}function FU(t,e){const n=Yt(bc,null,t);return n.staticCount=e,n}function UU(t="",e=!1){return e?(Pw(),xw(qt,null,t)):Yt(qt,null,t)}function qn(t){return t==null||typeof t=="boolean"?Yt(qt):_e(t)?Yt(Pn,null,t.slice()):el(t)?jr(t):Yt(Gu,null,String(t))}function jr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:_r(t)}function Ip(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(_e(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Ip(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!vw(e)?e._ctx=un:s===3&&un&&(un.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:un},n=32):(e=String(e),r&64?(n=16,e=[eC(e)]):n=8);t.children=e,t.shapeFlag|=n}function tC(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=lp([e.class,r.class]));else if(s==="style")e.style=ap([e.style,r.style]);else if(Nu(s)){const i=e[s],o=r[s];o&&i!==o&&!(_e(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function yn(t,e,n,r=null){Dn(t,e,7,[n,r])}const nC=gw();let rC=0;function sC(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||nC,i={uid:rC++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new PE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ww(r,s),emitsOptions:Cw(r,s),emit:null,emitted:null,propsDefaults:He,inheritAttrs:r.inheritAttrs,ctx:He,data:He,props:He,attrs:He,slots:He,refs:He,setupState:He,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=zR.bind(null,i),t.ce&&t.ce(i),i}let $t=null;const tt=()=>$t||un;let tu,Qd;{const t=Fu(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};tu=e("__VUE_INSTANCE_SETTERS__",n=>$t=n),Qd=e("__VUE_SSR_SETTERS__",n=>tl=n)}const Tl=t=>{const e=$t;return tu(t),t.scope.on(),()=>{t.scope.off(),tu(e)}},Wg=()=>{$t&&$t.scope.off(),tu(null)};function Nw(t){return t.vnode.shapeFlag&4}let tl=!1;function iC(t,e=!1,n=!1){e&&Qd(e);const{props:r,children:s}=t.vnode,i=Nw(t);kR(t,r,i,e),NR(t,s,n||e);const o=i?oC(t,e):void 0;return e&&Qd(!1),o}function oC(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,wR);const{setup:r}=n;if(r){mr();const s=t.setupContext=r.length>1?lC(t):null,i=Tl(t),o=Il(r,t,0,[t.props,s]),a=wE(o);if(gr(),i(),(a||t.sp)&&!no(t)&&uw(t),a){if(o.then(Wg,Wg),e)return o.then(l=>{Qg(t,l)}).catch(l=>{qu(l,t,0)});t.asyncDep=o}else Qg(t,o)}else Ow(t)}function Qg(t,e,n){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ze(e)&&(t.setupState=WE(e)),Ow(t)}function Ow(t,e,n){const r=t.type;t.render||(t.render=r.render||Gn);{const s=Tl(t);mr();try{bR(t)}finally{gr(),s()}}}const aC={get(t,e){return Bt(t,"get",""),t[e]}};function lC(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,aC),slots:t.slots,emit:t.emit,expose:e}}function Wu(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(WE(_i(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Da)return Da[n](t)},has(e,n){return n in e||n in Da}})):t.proxy}function Jd(t,e=!0){return Te(t)?t.displayName||t.name:t.name||e&&t.__name}function cC(t){return Te(t)&&"__vccOpts"in t}const $=(t,e)=>Z0(t,e,tl);function j(t,e,n){try{eu(-1);const r=arguments.length;return r===2?ze(e)&&!_e(e)?el(e)?Yt(t,null,[e]):Yt(t,e):Yt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&el(n)&&(n=[n]),Yt(t,e,n))}finally{eu(1)}}const uC="3.5.24";let Yd;const Jg=typeof window<"u"&&window.trustedTypes;if(Jg)try{Yd=Jg.createPolicy("vue",{createHTML:t=>t})}catch{}const Mw=Yd?t=>Yd.createHTML(t):t=>t,hC="http://www.w3.org/2000/svg",dC="http://www.w3.org/1998/Math/MathML",ar=typeof document<"u"?document:null,Yg=ar&&ar.createElement("template"),fC={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?ar.createElementNS(hC,t):e==="mathml"?ar.createElementNS(dC,t):n?ar.createElement(t,{is:n}):ar.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>ar.createTextNode(t),createComment:t=>ar.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ar.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Yg.innerHTML=Mw(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Yg.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Nr="transition",sa="animation",co=Symbol("_vtc"),Lw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Fw=wt({},ow,Lw),pC=t=>(t.displayName="Transition",t.props=Fw,t),nl=pC((t,{slots:e})=>j(cR,Uw(t),e)),ks=(t,e=[])=>{_e(t)?t.forEach(n=>n(...e)):t&&t(...e)},Xg=t=>t?_e(t)?t.some(e=>e.length>1):t.length>1:!1;function Uw(t){const e={};for(const b in t)b in Lw||(e[b]=t[b]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,T=mC(s),P=T&&T[0],C=T&&T[1],{onBeforeEnter:D,onEnter:S,onEnterCancelled:x,onLeave:V,onLeaveCancelled:L,onBeforeAppear:q=D,onAppear:A=S,onAppearCancelled:y=x}=e,w=(b,_,U,ne)=>{b._enterCancelled=ne,Br(b,_?h:a),Br(b,_?u:o),U&&U()},E=(b,_)=>{b._isLeaving=!1,Br(b,d),Br(b,g),Br(b,p),_&&_()},v=b=>(_,U)=>{const ne=b?A:S,ue=()=>w(_,b,U);ks(ne,[_,ue]),Zg(()=>{Br(_,b?l:i),Fn(_,b?h:a),Xg(ne)||e_(_,r,P,ue)})};return wt(e,{onBeforeEnter(b){ks(D,[b]),Fn(b,i),Fn(b,o)},onBeforeAppear(b){ks(q,[b]),Fn(b,l),Fn(b,u)},onEnter:v(!1),onAppear:v(!0),onLeave(b,_){b._isLeaving=!0;const U=()=>E(b,_);Fn(b,d),b._enterCancelled?(Fn(b,p),Xd(b)):(Xd(b),Fn(b,p)),Zg(()=>{b._isLeaving&&(Br(b,d),Fn(b,g),Xg(V)||e_(b,r,C,U))}),ks(V,[b,U])},onEnterCancelled(b){w(b,!1,void 0,!0),ks(x,[b])},onAppearCancelled(b){w(b,!0,void 0,!0),ks(y,[b])},onLeaveCancelled(b){E(b),ks(L,[b])}})}function mC(t){if(t==null)return null;if(ze(t))return[td(t.enter),td(t.leave)];{const e=td(t);return[e,e]}}function td(t){return _0(t)}function Fn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[co]||(t[co]=new Set)).add(e)}function Br(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[co];n&&(n.delete(e),n.size||(t[co]=void 0))}function Zg(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let gC=0;function e_(t,e,n,r){const s=t._endId=++gC,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=Bw(t,e);if(!o)return r();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,p),i()},p=g=>{g.target===t&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),t.addEventListener(u,p)}function Bw(t,e){const n=window.getComputedStyle(t),r=T=>(n[T]||"").split(", "),s=r(`${Nr}Delay`),i=r(`${Nr}Duration`),o=t_(s,i),a=r(`${sa}Delay`),l=r(`${sa}Duration`),u=t_(a,l);let h=null,d=0,p=0;e===Nr?o>0&&(h=Nr,d=o,p=i.length):e===sa?u>0&&(h=sa,d=u,p=l.length):(d=Math.max(o,u),h=d>0?o>u?Nr:sa:null,p=h?h===Nr?i.length:l.length:0);const g=h===Nr&&/\b(?:transform|all)(?:,|$)/.test(r(`${Nr}Property`).toString());return{type:h,timeout:d,propCount:p,hasTransform:g}}function t_(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>n_(n)+n_(t[r])))}function n_(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Xd(t){return(t?t.ownerDocument:document).body.offsetHeight}function _C(t,e,n){const r=t[co];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const nu=Symbol("_vod"),qw=Symbol("_vsh"),BU={name:"show",beforeMount(t,{value:e},{transition:n}){t[nu]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ia(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),ia(t,!0),r.enter(t)):r.leave(t,()=>{ia(t,!1)}):ia(t,e))},beforeUnmount(t,{value:e}){ia(t,e)}};function ia(t,e){t.style.display=e?t[nu]:"none",t[qw]=!e}const yC=Symbol(""),vC=/(?:^|;)\s*display\s*:/;function EC(t,e,n){const r=t.style,s=rt(n);let i=!1;if(n&&!s){if(e)if(rt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Tc(r,a,"")}else for(const o in e)n[o]==null&&Tc(r,o,"");for(const o in n)o==="display"&&(i=!0),Tc(r,o,n[o])}else if(s){if(e!==n){const o=r[yC];o&&(n+=";"+o),r.cssText=n,i=vC.test(n)}}else e&&t.removeAttribute("style");nu in t&&(t[nu]=i?r.display:"",t[qw]&&(r.display="none"))}const r_=/\s*!important$/;function Tc(t,e,n){if(_e(n))n.forEach(r=>Tc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=wC(t,e);r_.test(n)?t.setProperty(gs(r),n.replace(r_,""),"important"):t[r]=n}}const s_=["Webkit","Moz","ms"],nd={};function wC(t,e){const n=nd[e];if(n)return n;let r=In(e);if(r!=="filter"&&r in t)return nd[e]=r;r=Lu(r);for(let s=0;s<s_.length;s++){const i=s_[s]+r;if(i in t)return nd[e]=i}return e}const i_="http://www.w3.org/1999/xlink";function o_(t,e,n,r,s,i=I0(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(i_,e.slice(6,e.length)):t.setAttributeNS(i_,e,n):n==null||i&&!AE(n)?t.removeAttribute(e):t.setAttribute(e,i?"":er(n)?String(n):n)}function a_(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Mw(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=AE(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Fs(t,e,n,r){t.addEventListener(e,n,r)}function bC(t,e,n,r){t.removeEventListener(e,n,r)}const l_=Symbol("_vei");function IC(t,e,n,r,s=null){const i=t[l_]||(t[l_]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=TC(e);if(r){const u=i[e]=RC(r,s);Fs(t,a,u,l)}else o&&(bC(t,a,o,l),i[e]=void 0)}}const c_=/(?:Once|Passive|Capture)$/;function TC(t){let e;if(c_.test(t)){e={};let r;for(;r=t.match(c_);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):gs(t.slice(2)),e]}let rd=0;const AC=Promise.resolve(),SC=()=>rd||(AC.then(()=>rd=0),rd=Date.now());function RC(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Dn(CC(r,n.value),e,5,[r])};return n.value=t,n.attached=SC(),n}function CC(t,e){if(_e(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const u_=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,PC=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?_C(t,r,o):e==="style"?EC(t,n,r):Nu(e)?rp(e)||IC(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):kC(t,e,r,o))?(a_(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&o_(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!rt(r))?a_(t,In(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),o_(t,e,r,o))};function kC(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&u_(e)&&Te(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return u_(e)&&rt(n)?!1:e in t}const $w=new WeakMap,jw=new WeakMap,ru=Symbol("_moveCb"),h_=Symbol("_enterCb"),xC=t=>(delete t.props.mode,t),VC=xC({name:"TransitionGroup",props:wt({},Fw,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=tt(),r=iw();let s,i;return yp(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!LC(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(NC),s.forEach(OC);const a=s.filter(MC);Xd(n.vnode.el),a.forEach(l=>{const u=l.el,h=u.style;Fn(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=u[ru]=p=>{p&&p.target!==u||(!p||p.propertyName.endsWith("transform"))&&(u.removeEventListener("transitionend",d),u[ru]=null,Br(u,o))};u.addEventListener("transitionend",d)}),s=[]}),()=>{const o=Ae(t),a=Uw(o);let l=o.tag||Pn;if(s=[],i)for(let u=0;u<i.length;u++){const h=i[u];h.el&&h.el instanceof Element&&(s.push(h),cs(h,Xa(h,a,r,n)),$w.set(h,{left:h.el.offsetLeft,top:h.el.offsetTop}))}i=e.default?_p(e.default()):[];for(let u=0;u<i.length;u++){const h=i[u];h.key!=null&&cs(h,Xa(h,a,r,n))}return Yt(l,null,i)}}}),DC=VC;function NC(t){const e=t.el;e[ru]&&e[ru](),e[h_]&&e[h_]()}function OC(t){jw.set(t,{left:t.el.offsetLeft,top:t.el.offsetTop})}function MC(t){const e=$w.get(t),n=jw.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function LC(t,e,n){const r=t.cloneNode(),s=t[co];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=Bw(r);return i.removeChild(r),o}const su=t=>{const e=t.props["onUpdate:modelValue"]||!1;return _e(e)?n=>eo(e,n):e};function FC(t){t.target.composing=!0}function d_(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ro=Symbol("_assign");function f_(t,e,n){return e&&(t=t.trim()),n&&(t=op(t)),t}const qU={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[ro]=su(s);const i=r||s.props&&s.props.type==="number";Fs(t,e?"change":"input",o=>{o.target.composing||t[ro](f_(t.value,n,i))}),(n||i)&&Fs(t,"change",()=>{t.value=f_(t.value,n,i)}),e||(Fs(t,"compositionstart",FC),Fs(t,"compositionend",d_),Fs(t,"change",d_))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[ro]=su(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?op(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},$U={deep:!0,created(t,e,n){t[ro]=su(n),Fs(t,"change",()=>{const r=t._modelValue,s=UC(t),i=t.checked,o=t[ro];if(_e(r)){const a=SE(r,s),l=a!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(a,1),o(u)}}else if(Ou(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(zw(t,i))})},mounted:p_,beforeUpdate(t,e,n){t[ro]=su(n),p_(t,e,n)}};function p_(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(_e(e))s=SE(e,r.props.value)>-1;else if(Ou(e))s=e.has(r.props.value);else{if(e===n)return;s=Uu(e,zw(t,!0))}t.checked!==s&&(t.checked=s)}function UC(t){return"_value"in t?t._value:t.value}function zw(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const BC=["ctrl","shift","alt","meta"],qC={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>BC.some(n=>t[`${n}Key`]&&!e.includes(n))},jU=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const a=qC[e[o]];if(a&&a(s,e))return}return t(s,...i)}))},$C={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},zU=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=gs(s.key);if(e.some(o=>o===i||$C[o]===i))return t(s)}))},jC=wt({patchProp:PC},fC);let m_;function zC(){return m_||(m_=MR(jC))}const Kw=((...t)=>{const e=zC().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=HC(r);if(!s)return;const i=e._component;!Te(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,KC(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function KC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function HC(t){return rt(t)?document.querySelector(t):t}function yi(t,e,n,r){return Object.defineProperty(t,e,{get:n,set:r,enumerable:!0}),t}function KU(t,e){for(const n in e)yi(t,n,e[n]);return t}const us=Ne(!1);let Zd;function GC(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function WC(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const Hw="ontouchstart"in window||window.navigator.maxTouchPoints>0;function QC(t){const e=t.toLowerCase(),n=WC(e),r=GC(e,n),s={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};r.browser&&(s[r.browser]=!0,s.version=r.version,s.versionNumber=parseInt(r.version,10)),r.platform&&(s[r.platform]=!0);const i=s.android||s.ios||s.bb||s.blackberry||s.ipad||s.iphone||s.ipod||s.kindle||s.playbook||s.silk||s["windows phone"];if(i===!0||e.indexOf("mobile")!==-1?s.mobile=!0:s.desktop=!0,s["windows phone"]&&(s.winphone=!0,delete s["windows phone"]),s.edga||s.edgios||s.edg?(s.edge=!0,r.browser="edge"):s.crios?(s.chrome=!0,r.browser="chrome"):s.fxios&&(s.firefox=!0,r.browser="firefox"),(s.ipod||s.ipad||s.iphone)&&(s.ios=!0),s.vivaldi&&(r.browser="vivaldi",s.vivaldi=!0),(s.chrome||s.opr||s.safari||s.vivaldi||s.mobile===!0&&s.ios!==!0&&i!==!0)&&(s.webkit=!0),s.opr&&(r.browser="opera",s.opera=!0),s.safari&&(s.blackberry||s.bb?(r.browser="blackberry",s.blackberry=!0):s.playbook?(r.browser="playbook",s.playbook=!0):s.android?(r.browser="android",s.android=!0):s.kindle?(r.browser="kindle",s.kindle=!0):s.silk&&(r.browser="silk",s.silk=!0)),s.name=r.browser,s.platform=r.platform,e.indexOf("electron")!==-1)s.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)s.bex=!0;else{if(window.Capacitor!==void 0?(s.capacitor=!0,s.nativeMobile=!0,s.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(s.cordova=!0,s.nativeMobile=!0,s.nativeMobileWrapper="cordova"),us.value===!0&&(Zd={is:{...s}}),Hw===!0&&s.mac===!0&&(s.desktop===!0&&s.safari===!0||s.nativeMobile===!0&&s.android!==!0&&s.ios!==!0&&s.ipad!==!0)){delete s.mac,delete s.desktop;const o=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(s,{mobile:!0,ios:!0,platform:o,[o]:!0})}s.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete s.desktop,s.mobile=!0)}return s}const g_=navigator.userAgent||navigator.vendor||window.opera,JC={has:{touch:!1,webStorage:!1},within:{iframe:!1}},ut={userAgent:g_,is:QC(g_),has:{touch:Hw},within:{iframe:window.self!==window.top}},ef={install(t){const{$q:e}=t;us.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,ut),us.value=!1}),e.platform=gi(this)):e.platform=this}};{let t;yi(ut.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(ef,ut),us.value===!0&&(Object.assign(ef,Zd,JC),Zd=null)}function Vt(t){return _i($u(t))}function YC(t){return _i(t)}const Al=(t,e)=>{const n=gi(t);for(const r in t)yi(e,r,()=>n[r],s=>{n[r]=s});return e},Zt={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(Zt,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function jn(){}function HU(t){return t.button===0}function XC(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function ZC(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function iu(t){t.stopPropagation()}function Gr(t){t.cancelable!==!1&&t.preventDefault()}function vn(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function GU(t,e){if(t===void 0||e===!0&&t.__dragPrevented===!0)return;const n=e===!0?r=>{r.__dragPrevented=!0,r.addEventListener("dragstart",Gr,Zt.notPassiveCapture)}:r=>{delete r.__dragPrevented,r.removeEventListener("dragstart",Gr,Zt.notPassiveCapture)};t.querySelectorAll("a, img").forEach(n)}function eP(t,e,n){const r=`__q_${e}_evt`;t[r]=t[r]!==void 0?t[r].concat(n):n,n.forEach(s=>{s[0].addEventListener(s[1],t[s[2]],Zt[s[3]])})}function tP(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(r=>{r[0].removeEventListener(r[1],t[r[2]],Zt[r[3]])}),t[n]=void 0)}function Gw(t,e=250,n){let r=null;function s(){const i=arguments,o=()=>{r=null,t.apply(this,i)};r!==null&&clearTimeout(r),r=setTimeout(o,e)}return s.cancel=()=>{r!==null&&clearTimeout(r)},s}const sd=["sm","md","lg","xl"],{passive:__}=Zt,nP=Al({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:jn,setDebounce:jn,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,r=n||window,s=document.scrollingElement||document.documentElement,i=n===void 0||ut.is.mobile===!0?()=>[Math.max(window.innerWidth,s.clientWidth),Math.max(window.innerHeight,s.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-s.clientWidth,n.height*n.scale+window.innerHeight-s.clientHeight],o=t.config.screen?.bodyClasses===!0;this.__update=d=>{const[p,g]=i();if(g!==this.height&&(this.height=g),p!==this.width)this.width=p;else if(d!==!0)return;let T=this.sizes;this.gt.xs=p>=T.sm,this.gt.sm=p>=T.md,this.gt.md=p>=T.lg,this.gt.lg=p>=T.xl,this.lt.sm=p<T.sm,this.lt.md=p<T.md,this.lt.lg=p<T.lg,this.lt.xl=p<T.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,T=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",T!==this.name&&(o===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${T}`)),this.name=T)};let a,l={},u=16;this.setSizes=d=>{sd.forEach(p=>{d[p]!==void 0&&(l[p]=d[p])})},this.setDebounce=d=>{u=d};const h=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&sd.forEach(p=>{this.sizes[p]=parseInt(d.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{sd.forEach(g=>{p[g]&&(this.sizes[g]=p[g])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&r.removeEventListener("resize",a,__),a=p>0?Gw(this.__update,p):this.__update,r.addEventListener("resize",a,__)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),o===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};us.value===!0?e.push(h):h()}}),Mt=Al({isActive:!1,mode:!1},{__media:void 0,set(t){Mt.mode=t,t==="auto"?(Mt.__media===void 0&&(Mt.__media=window.matchMedia("(prefers-color-scheme: dark)"),Mt.__updateMedia=()=>{Mt.set("auto")},Mt.__media.addListener(Mt.__updateMedia)),t=Mt.__media.matches):Mt.__media!==void 0&&(Mt.__media.removeListener(Mt.__updateMedia),Mt.__media=void 0),Mt.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){Mt.set(Mt.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function rP(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let Ww=!1;function sP(t){Ww=t.isComposing===!0}function Qw(t){return Ww===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function rl(t,e){return Qw(t)===!0?!1:[].concat(e).includes(t.keyCode)}function Jw(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function iP({is:t,has:e,within:n},r){const s=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const i=Jw(t);i!==void 0&&s.push("platform-"+i)}if(t.nativeMobile===!0){const i=t.nativeMobileWrapper;s.push(i),s.push("native-mobile"),t.ios===!0&&(r[i]===void 0||r[i].iosStatusBarPadding!==!1)&&s.push("q-ios-padding")}else t.electron===!0?s.push("electron"):t.bex===!0&&s.push("bex");return n.iframe===!0&&s.push("within-iframe"),s}function oP(){const{is:t}=ut,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const s=Jw(t);s!==void 0&&n.add(`platform-${s}`)}}ut.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),ut.within.iframe===!0&&n.add("within-iframe");const r=Array.from(n).join(" ");e!==r&&(document.body.className=r)}function aP(t){for(const e in t)rP(e,t[e])}const lP={install(t){if(this.__installed!==!0){if(us.value===!0)oP();else{const{$q:e}=t;e.config.brand!==void 0&&aP(e.config.brand);const n=iP(ut,e.config);document.body.classList.add.apply(document.body.classList,n)}ut.is.ios===!0&&document.body.addEventListener("touchstart",jn),window.addEventListener("keydown",sP,!0)}}},Yw=()=>!0;function cP(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function uP(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function hP(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return Yw;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(cP).map(uP)),()=>e.includes(window.location.hash)}const tf={__history:[],add:jn,remove:jn,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=ut.is;if(e!==!0&&n!==!0)return;const r=t.config[e===!0?"cordova":"capacitor"];if(r?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=o=>{o.condition===void 0&&(o.condition=Yw),this.__history.push(o)},this.remove=o=>{const a=this.__history.indexOf(o);a>=0&&this.__history.splice(a,1)};const s=hP(Object.assign({backButtonExit:!0},r)),i=()=>{if(this.__history.length){const o=this.__history[this.__history.length-1];o.condition()===!0&&(this.__history.pop(),o.handler())}else s()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},y_={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function v_(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const zr=Al({__qLang:{}},{getLocale:v_,set(t=y_,e){const n={...t,rtl:t.rtl===!0,getLocale:v_};{if(n.set=zr.set,zr.__langConfig===void 0||zr.__langConfig.noHtmlAttrs!==!0){const r=document.documentElement;r.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",n.isoName)}Object.assign(zr.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=zr.__qLang,zr.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(s=>s!=="set"&&s!=="getLocale")}}),this.set(e||y_))}}),dP={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},ou=Al({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=ou.set,Object.assign(ou.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,yi(t,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(s=>s!=="set")}}),this.set(e||dP))}}),fP="_q_",WU="_q_s_",QU="_q_l_",JU="_q_pc_",pP="_q_fo_",YU="_q_tabs_";function XU(){}const au={};let Xw=!1;function mP(){Xw=!0}function id(t,e){if(t===e)return!0;if(t!==null&&e!==null&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(t.constructor===Array){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(id(t[r],e[r])!==!0)return!1;return!0}if(t.constructor===Map){if(t.size!==e.size)return!1;let i=t.entries();for(r=i.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=i.next()}for(i=t.entries(),r=i.next();r.done!==!0;){if(id(r.value[1],e.get(r.value[0]))!==!0)return!1;r=i.next()}return!0}if(t.constructor===Set){if(t.size!==e.size)return!1;const i=t.entries();for(r=i.next();r.done!==!0;){if(e.has(r.value[0])!==!0)return!1;r=i.next()}return!0}if(t.buffer!=null&&t.buffer.constructor===ArrayBuffer){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t).filter(i=>t[i]!==void 0);if(n=s.length,n!==Object.keys(e).filter(i=>e[i]!==void 0).length)return!1;for(r=n;r--!==0;){const i=s[r];if(id(t[i],e[i])!==!0)return!1}return!0}return t!==t&&e!==e}function ln(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}function gP(t){return Object.prototype.toString.call(t)==="[object Date]"}function _P(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function ZU(t){return typeof t=="number"&&isFinite(t)}const E_=[ef,lP,Mt,nP,tf,zr,ou];function Tp(t,e){const n=Kw(t);n.config.globalProperties=e.config.globalProperties;const{reload:r,...s}=e._context;return Object.assign(n._context,s),n}function w_(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function yP(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(fP,n.$q),w_(n,E_),e.components!==void 0&&Object.values(e.components).forEach(r=>{ln(r)===!0&&r.name!==void 0&&t.component(r.name,r)}),e.directives!==void 0&&Object.values(e.directives).forEach(r=>{ln(r)===!0&&r.name!==void 0&&t.directive(r.name,r)}),e.plugins!==void 0&&w_(n,Object.values(e.plugins).filter(r=>typeof r.install=="function"&&E_.includes(r)===!1)),us.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(r=>{r()}),n.$q.onSSRHydrated=()=>{}})}const vP=function(t,e={}){const n={version:"2.18.6"};Xw===!1?(e.config!==void 0&&Object.assign(au,e.config),n.config={...au},mP()):n.config=e.config||{},yP(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},EP={name:"Quasar",version:"2.18.6",install:vP,lang:zr,iconSet:ou},wP=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},bP=$u({name:"App",mounted(){document.title="BaguioBoost - Navigate Baguio's Jeepneys with Ease",console.log("BaguioBoostPH App initialized")}});function IP(t,e,n,r,s,i){const o=yR("router-view");return Pw(),xw(o)}const TP=wP(bP,[["render",IP]]),AP=t=>t,SP=AP;const ji=typeof document<"u";function Zw(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function RP(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Zw(t.default)}const Le=Object.assign;function od(t,e){const n={};for(const r in e){const s=e[r];n[r]=Nn(s)?s.map(t):t(s)}return n}const Oa=()=>{},Nn=Array.isArray;function b_(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const eb=/#/g,CP=/&/g,PP=/\//g,kP=/=/g,xP=/\?/g,tb=/\+/g,VP=/%5B/g,DP=/%5D/g,nb=/%5E/g,NP=/%60/g,rb=/%7B/g,OP=/%7C/g,sb=/%7D/g,MP=/%20/g;function Ap(t){return t==null?"":encodeURI(""+t).replace(OP,"|").replace(VP,"[").replace(DP,"]")}function LP(t){return Ap(t).replace(rb,"{").replace(sb,"}").replace(nb,"^")}function nf(t){return Ap(t).replace(tb,"%2B").replace(MP,"+").replace(eb,"%23").replace(CP,"%26").replace(NP,"`").replace(rb,"{").replace(sb,"}").replace(nb,"^")}function FP(t){return nf(t).replace(kP,"%3D")}function UP(t){return Ap(t).replace(eb,"%23").replace(xP,"%3F")}function BP(t){return UP(t).replace(PP,"%2F")}function sl(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const qP=/\/$/,$P=t=>t.replace(qP,"");function ad(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,a>0?a:e.length),s=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=HP(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:sl(o)}}function jP(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function I_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function zP(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&uo(e.matched[r],n.matched[s])&&ib(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function uo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function ib(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!KP(t[n],e[n]))return!1;return!0}function KP(t,e){return Nn(t)?T_(t,e):Nn(e)?T_(e,t):t===e}function T_(t,e){return Nn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function HP(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Or={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let rf=(function(t){return t.pop="pop",t.push="push",t})({}),ld=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function GP(t){if(!t)if(ji){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),$P(t)}const WP=/^[^#]+#/;function QP(t,e){return t.replace(WP,"#")+e}function JP(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Qu=()=>({left:window.scrollX,top:window.scrollY});function YP(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=JP(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function A_(t,e){return(history.state?history.state.position-e:-1)+t}const sf=new Map;function XP(t,e){sf.set(t,e)}function ZP(t){const e=sf.get(t);return sf.delete(t),e}function ek(t){return typeof t=="string"||t&&typeof t=="object"}function ob(t){return typeof t=="string"||typeof t=="symbol"}let it=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const ab=Symbol("");it.MATCHER_NOT_FOUND+"",it.NAVIGATION_GUARD_REDIRECT+"",it.NAVIGATION_ABORTED+"",it.NAVIGATION_CANCELLED+"",it.NAVIGATION_DUPLICATED+"";function ho(t,e){return Le(new Error,{type:t,[ab]:!0},e)}function ir(t,e){return t instanceof Error&&ab in t&&(e==null||!!(t.type&e))}const tk=["params","query","hash"];function nk(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of tk)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function rk(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(tb," "),i=s.indexOf("="),o=sl(i<0?s:s.slice(0,i)),a=i<0?null:sl(s.slice(i+1));if(o in e){let l=e[o];Nn(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function S_(t){let e="";for(let n in t){const r=t[n];if(n=FP(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Nn(r)?r.map(s=>s&&nf(s)):[r&&nf(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function sk(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Nn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const ik=Symbol(""),R_=Symbol(""),Ju=Symbol(""),lb=Symbol(""),of=Symbol("");function oa(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Kr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(ho(it.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?l(p):ek(p)?l(ho(it.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(p=>l(p))})}function cd(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Zw(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Kr(u,n,r,o,a,s))}else{let u=l();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=RP(h)?h.default:h;o.mods[a]=h,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&Kr(p,n,r,o,a,s)()}))}}return i}function ok(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>uo(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>uo(u,l))||s.push(l))}return[n,r,s]}let ak=()=>location.protocol+"//"+location.host;function cb(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),I_(a,"")}return I_(n,t)+r+s}function lk(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const g=cb(t,location),T=n.value,P=e.value;let C=0;if(p){if(n.value=g,e.value=p,o&&o===T){o=null;return}C=P?p.position-P.position:0}else r(g);s.forEach(D=>{D(n.value,T,{delta:C,type:rf.pop,direction:C?C>0?ld.forward:ld.back:ld.unknown})})};function l(){o=n.value}function u(p){s.push(p);const g=()=>{const T=s.indexOf(p);T>-1&&s.splice(T,1)};return i.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Le({},p.state,{scroll:Qu()}),"")}}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:l,listen:u,destroy:d}}function C_(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Qu():null}}function ck(t){const{history:e,location:n}=window,r={value:cb(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,h){const d=t.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:ak()+t+l;try{e[h?"replaceState":"pushState"](u,"",p),s.value=u}catch(g){console.error(g),n[h?"replace":"assign"](p)}}function o(l,u){i(l,Le({},e.state,C_(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function a(l,u){const h=Le({},s.value,e.state,{forward:l,scroll:Qu()});i(h.current,h,!0),i(l,Le({},C_(r.value,l,null),{position:h.position+1},u),!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function uk(t){t=GP(t);const e=ck(t),n=lk(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Le({location:"",base:t,go:r,createHref:QP.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let js=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var vt=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(vt||{});const hk={type:js.Static,value:""},dk=/[a-zA-Z0-9_]/;function fk(t){if(!t)return[[]];if(t==="/")return[[hk]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=vt.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,u="",h="";function d(){u&&(n===vt.Static?i.push({type:js.Static,value:u}):n===vt.Param||n===vt.ParamRegExp||n===vt.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:js.Param,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==vt.ParamRegExp){r=n,n=vt.EscapeNext;continue}switch(n){case vt.Static:l==="/"?(u&&d(),o()):l===":"?(d(),n=vt.Param):p();break;case vt.EscapeNext:p(),n=r;break;case vt.Param:l==="("?n=vt.ParamRegExp:dk.test(l)?p():(d(),n=vt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case vt.ParamRegExp:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=vt.ParamRegExpEnd:h+=l;break;case vt.ParamRegExpEnd:d(),n=vt.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===vt.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),s}const P_="[^/]+?",pk={sensitive:!1,strict:!1,start:!0,end:!0};var Qt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Qt||{});const mk=/[.+*?^${}()[\]/\\]/g;function gk(t,e){const n=Le({},pk,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[Qt.Root];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const p=u[d];let g=Qt.Segment+(n.sensitive?Qt.BonusCaseSensitive:0);if(p.type===js.Static)d||(s+="/"),s+=p.value.replace(mk,"\\$&"),g+=Qt.Static;else if(p.type===js.Param){const{value:T,repeatable:P,optional:C,regexp:D}=p;i.push({name:T,repeatable:P,optional:C});const S=D||P_;if(S!==P_){g+=Qt.BonusCustomRegExp;try{`${S}`}catch(V){throw new Error(`Invalid custom RegExp for param "${T}" (${S}): `+V.message)}}let x=P?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;d||(x=C&&u.length<2?`(?:/${x})`:"/"+x),C&&(x+="?"),s+=x,g+=Qt.Dynamic,C&&(g+=Qt.BonusOptional),P&&(g+=Qt.BonusRepeatable),S===".*"&&(g+=Qt.BonusWildcard)}h.push(g)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=Qt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),d={};if(!h)return null;for(let p=1;p<h.length;p++){const g=h[p]||"",T=i[p-1];d[T.name]=g&&T.repeatable?g.split("/"):g}return d}function l(u){let h="",d=!1;for(const p of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const g of p)if(g.type===js.Static)h+=g.value;else if(g.type===js.Param){const{value:T,repeatable:P,optional:C}=g,D=T in u?u[T]:"";if(Nn(D)&&!P)throw new Error(`Provided param "${T}" is an array but it is not repeatable (* or + modifiers)`);const S=Nn(D)?D.join("/"):D;if(!S)if(C)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${T}"`);h+=S}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function _k(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Qt.Static+Qt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Qt.Static+Qt.Segment?1:-1:0}function ub(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=_k(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(k_(r))return 1;if(k_(s))return-1}return s.length-r.length}function k_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const yk={strict:!1,end:!0,sensitive:!1};function vk(t,e,n){const r=gk(fk(t.path),n),s=Le(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Ek(t,e){const n=[],r=new Map;e=b_(yk,e);function s(d){return r.get(d)}function i(d,p,g){const T=!g,P=V_(d);P.aliasOf=g&&g.record;const C=b_(e,d),D=[P];if("alias"in d){const V=typeof d.alias=="string"?[d.alias]:d.alias;for(const L of V)D.push(V_(Le({},P,{components:g?g.record.components:P.components,path:L,aliasOf:g?g.record:P})))}let S,x;for(const V of D){const{path:L}=V;if(p&&L[0]!=="/"){const q=p.record.path,A=q[q.length-1]==="/"?"":"/";V.path=p.record.path+(L&&A+L)}if(S=vk(V,p,C),g?g.alias.push(S):(x=x||S,x!==S&&x.alias.push(S),T&&d.name&&!D_(S)&&o(d.name)),hb(S)&&l(S),P.children){const q=P.children;for(let A=0;A<q.length;A++)i(q[A],S,g&&g.children[A])}g=g||S}return x?()=>{o(x)}:Oa}function o(d){if(ob(d)){const p=r.get(d);p&&(r.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){const p=Ik(d,n);n.splice(p,0,d),d.record.name&&!D_(d)&&r.set(d.record.name,d)}function u(d,p){let g,T={},P,C;if("name"in d&&d.name){if(g=r.get(d.name),!g)throw ho(it.MATCHER_NOT_FOUND,{location:d});C=g.record.name,T=Le(x_(p.params,g.keys.filter(x=>!x.optional).concat(g.parent?g.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),d.params&&x_(d.params,g.keys.map(x=>x.name))),P=g.stringify(T)}else if(d.path!=null)P=d.path,g=n.find(x=>x.re.test(P)),g&&(T=g.parse(P),C=g.record.name);else{if(g=p.name?r.get(p.name):n.find(x=>x.re.test(p.path)),!g)throw ho(it.MATCHER_NOT_FOUND,{location:d,currentLocation:p});C=g.record.name,T=Le({},p.params,d.params),P=g.stringify(T)}const D=[];let S=g;for(;S;)D.unshift(S.record),S=S.parent;return{name:C,path:P,params:T,matched:D,meta:bk(D)}}t.forEach(d=>i(d));function h(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function x_(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function V_(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:wk(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function wk(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function D_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function bk(t){return t.reduce((e,n)=>Le(e,n.meta),{})}function Ik(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;ub(t,e[i])<0?r=i:n=i+1}const s=Tk(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function Tk(t){let e=t;for(;e=e.parent;)if(hb(e)&&ub(t,e)===0)return e}function hb({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function N_(t){const e=bn(Ju),n=bn(lb),r=$(()=>{const l=Qs(t.to);return e.resolve(l)}),s=$(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],d=n.matched;if(!h||!d.length)return-1;const p=d.findIndex(uo.bind(null,h));if(p>-1)return p;const g=O_(l[u-2]);return u>1&&O_(h)===g&&d[d.length-1].path!==g?d.findIndex(uo.bind(null,l[u-2])):p}),i=$(()=>s.value>-1&&Pk(n.params,r.value.params)),o=$(()=>s.value>-1&&s.value===n.matched.length-1&&ib(n.params,r.value.params));function a(l={}){if(Ck(l)){const u=e[Qs(t.replace)?"replace":"push"](Qs(t.to)).catch(Oa);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:$(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function Ak(t){return t.length===1?t[0]:t}const Sk=$u({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:N_,setup(t,{slots:e}){const n=gi(N_(t)),{options:r}=bn(Ju),s=$(()=>({[M_(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[M_(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&Ak(e.default(n));return t.custom?i:j("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Rk=Sk;function Ck(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Pk(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Nn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function O_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const M_=(t,e,n)=>t??e??n,kk=$u({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=bn(of),s=$(()=>t.route||r.value),i=bn(R_,0),o=$(()=>{let u=Qs(i);const{matched:h}=s.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),a=$(()=>s.value.matched[o.value]);wc(R_,$(()=>o.value+1)),wc(ik,a),wc(of,s);const l=Ne();return Ge(()=>[l.value,a.value,t.name],([u,h,d],[p,g,T])=>{h&&(h.instances[d]=u,g&&g!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!uo(h,g)||!p)&&(h.enterCallbacks[d]||[]).forEach(P=>P(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,d=a.value,p=d&&d.components[h];if(!p)return L_(n.default,{Component:p,route:u});const g=d.props[h],T=g?g===!0?u.params:typeof g=="function"?g(u):g:null,C=j(p,Le({},T,e,{onVnodeUnmounted:D=>{D.component.isUnmounted&&(d.instances[h]=null)},ref:l}));return L_(n.default,{Component:C,route:u})||C}}});function L_(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const xk=kk;function Vk(t){const e=Ek(t.routes,t),n=t.parseQuery||rk,r=t.stringifyQuery||S_,s=t.history,i=oa(),o=oa(),a=oa(),l=H0(Or);let u=Or;ji&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=od.bind(null,F=>""+F),d=od.bind(null,BP),p=od.bind(null,sl);function g(F,se){let oe,de;return ob(F)?(oe=e.getRecordMatcher(F),de=se):de=F,e.addRoute(de,oe)}function T(F){const se=e.getRecordMatcher(F);se&&e.removeRoute(se)}function P(){return e.getRoutes().map(F=>F.record)}function C(F){return!!e.getRecordMatcher(F)}function D(F,se){if(se=Le({},se||l.value),typeof F=="string"){const N=ad(n,F,se.path),G=e.resolve({path:N.path},se),W=s.createHref(N.fullPath);return Le(N,G,{params:p(G.params),hash:sl(N.hash),redirectedFrom:void 0,href:W})}let oe;if(F.path!=null)oe=Le({},F,{path:ad(n,F.path,se.path).path});else{const N=Le({},F.params);for(const G in N)N[G]==null&&delete N[G];oe=Le({},F,{params:d(N)}),se.params=d(se.params)}const de=e.resolve(oe,se),ke=F.hash||"";de.params=h(p(de.params));const R=jP(r,Le({},F,{hash:LP(ke),path:de.path})),k=s.createHref(R);return Le({fullPath:R,hash:ke,query:r===S_?sk(F.query):F.query||{}},de,{redirectedFrom:void 0,href:k})}function S(F){return typeof F=="string"?ad(n,F,l.value.path):Le({},F)}function x(F,se){if(u!==F)return ho(it.NAVIGATION_CANCELLED,{from:se,to:F})}function V(F){return A(F)}function L(F){return V(Le(S(F),{replace:!0}))}function q(F,se){const oe=F.matched[F.matched.length-1];if(oe&&oe.redirect){const{redirect:de}=oe;let ke=typeof de=="function"?de(F,se):de;return typeof ke=="string"&&(ke=ke.includes("?")||ke.includes("#")?ke=S(ke):{path:ke},ke.params={}),Le({query:F.query,hash:F.hash,params:ke.path!=null?{}:F.params},ke)}}function A(F,se){const oe=u=D(F),de=l.value,ke=F.state,R=F.force,k=F.replace===!0,N=q(oe,de);if(N)return A(Le(S(N),{state:typeof N=="object"?Le({},ke,N.state):ke,force:R,replace:k}),se||oe);const G=oe;G.redirectedFrom=se;let W;return!R&&zP(r,de,oe)&&(W=ho(it.NAVIGATION_DUPLICATED,{to:G,from:de}),Ie(de,de,!0,!1)),(W?Promise.resolve(W):E(G,de)).catch(H=>ir(H)?ir(H,it.NAVIGATION_GUARD_REDIRECT)?H:Je(H):K(H,G,de)).then(H=>{if(H){if(ir(H,it.NAVIGATION_GUARD_REDIRECT))return A(Le({replace:k},S(H.to),{state:typeof H.to=="object"?Le({},ke,H.to.state):ke,force:R}),se||G)}else H=b(G,de,!0,k,ke);return v(G,de,H),H})}function y(F,se){const oe=x(F,se);return oe?Promise.reject(oe):Promise.resolve()}function w(F){const se=Ue.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(F):F()}function E(F,se){let oe;const[de,ke,R]=ok(F,se);oe=cd(de.reverse(),"beforeRouteLeave",F,se);for(const N of de)N.leaveGuards.forEach(G=>{oe.push(Kr(G,F,se))});const k=y.bind(null,F,se);return oe.push(k),pe(oe).then(()=>{oe=[];for(const N of i.list())oe.push(Kr(N,F,se));return oe.push(k),pe(oe)}).then(()=>{oe=cd(ke,"beforeRouteUpdate",F,se);for(const N of ke)N.updateGuards.forEach(G=>{oe.push(Kr(G,F,se))});return oe.push(k),pe(oe)}).then(()=>{oe=[];for(const N of R)if(N.beforeEnter)if(Nn(N.beforeEnter))for(const G of N.beforeEnter)oe.push(Kr(G,F,se));else oe.push(Kr(N.beforeEnter,F,se));return oe.push(k),pe(oe)}).then(()=>(F.matched.forEach(N=>N.enterCallbacks={}),oe=cd(R,"beforeRouteEnter",F,se,w),oe.push(k),pe(oe))).then(()=>{oe=[];for(const N of o.list())oe.push(Kr(N,F,se));return oe.push(k),pe(oe)}).catch(N=>ir(N,it.NAVIGATION_CANCELLED)?N:Promise.reject(N))}function v(F,se,oe){a.list().forEach(de=>w(()=>de(F,se,oe)))}function b(F,se,oe,de,ke){const R=x(F,se);if(R)return R;const k=se===Or,N=ji?history.state:{};oe&&(de||k?s.replace(F.fullPath,Le({scroll:k&&N&&N.scroll},ke)):s.push(F.fullPath,ke)),l.value=F,Ie(F,se,oe,k),Je()}let _;function U(){_||(_=s.listen((F,se,oe)=>{if(!Xe.listening)return;const de=D(F),ke=q(de,Xe.currentRoute.value);if(ke){A(Le(ke,{replace:!0,force:!0}),de).catch(Oa);return}u=de;const R=l.value;ji&&XP(A_(R.fullPath,oe.delta),Qu()),E(de,R).catch(k=>ir(k,it.NAVIGATION_ABORTED|it.NAVIGATION_CANCELLED)?k:ir(k,it.NAVIGATION_GUARD_REDIRECT)?(A(Le(S(k.to),{force:!0}),de).then(N=>{ir(N,it.NAVIGATION_ABORTED|it.NAVIGATION_DUPLICATED)&&!oe.delta&&oe.type===rf.pop&&s.go(-1,!1)}).catch(Oa),Promise.reject()):(oe.delta&&s.go(-oe.delta,!1),K(k,de,R))).then(k=>{k=k||b(de,R,!1),k&&(oe.delta&&!ir(k,it.NAVIGATION_CANCELLED)?s.go(-oe.delta,!1):oe.type===rf.pop&&ir(k,it.NAVIGATION_ABORTED|it.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),v(de,R,k)}).catch(Oa)}))}let ne=oa(),ue=oa(),ee;function K(F,se,oe){Je(F);const de=ue.list();return de.length?de.forEach(ke=>ke(F,se,oe)):console.error(F),Promise.reject(F)}function ye(){return ee&&l.value!==Or?Promise.resolve():new Promise((F,se)=>{ne.add([F,se])})}function Je(F){return ee||(ee=!F,U(),ne.list().forEach(([se,oe])=>F?oe(F):se()),ne.reset()),F}function Ie(F,se,oe,de){const{scrollBehavior:ke}=t;if(!ji||!ke)return Promise.resolve();const R=!oe&&ZP(A_(F.fullPath,0))||(de||!oe)&&history.state&&history.state.scroll||null;return en().then(()=>ke(F,se,R)).then(k=>k&&YP(k)).catch(k=>K(k,F,se))}const Q=F=>s.go(F);let Re;const Ue=new Set,Xe={currentRoute:l,listening:!0,addRoute:g,removeRoute:T,clearRoutes:e.clearRoutes,hasRoute:C,getRoutes:P,resolve:D,options:t,push:V,replace:L,go:Q,back:()=>Q(-1),forward:()=>Q(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ue.add,isReady:ye,install(F){F.component("RouterLink",Rk),F.component("RouterView",xk),F.config.globalProperties.$router=Xe,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>Qs(l)}),ji&&!Re&&l.value===Or&&(Re=!0,V(s.location).catch(de=>{}));const se={};for(const de in Or)Object.defineProperty(se,de,{get:()=>l.value[de],enumerable:!0});F.provide(Ju,Xe),F.provide(lb,HE(se)),F.provide(of,l);const oe=F.unmount;Ue.add(F),F.unmount=function(){Ue.delete(F),Ue.size<1&&(u=Or,_&&_(),_=null,l.value=Or,Re=!1,ee=!1),oe()}}};function pe(F){return F.reduce((se,oe)=>se.then(()=>w(oe)),Promise.resolve())}return Xe}function eB(){return bn(Ju)}const Dk=[{path:"/",component:()=>mt(()=>import("./MainLayout-BIoo8L_Q.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])),children:[{path:"",component:()=>mt(()=>import("./IndexPage-BfKyLAy8.js"),__vite__mapDeps([20,21,10,22,15,9,13,14,7,23,8,24,18,25,6,26,27,17,28,29,30]))},{path:"pagnaam",component:()=>mt(()=>import("./PagnaamPage-6AkBN3As.js"),__vite__mapDeps([31,32,14,7,33,27,17,28,25,6,34,24,16,18,35,36,26,10,9,29,37]))},{path:"maykan",component:()=>mt(()=>import("./MaykanPage-B6CQCRcq.js"),__vite__mapDeps([38,39,24,18,26,10,9,27,17,28,29,40]))},{path:"aramidem",component:()=>mt(()=>import("./AramidemPage-Bqs8aEmL.js"),__vite__mapDeps([41,39,32,14,7,33,42,24,18,26,10,9,27,17,28,29,43]))},{path:"apanam",component:()=>mt(()=>import("./ApanamPage-DFPJTiiA.js"),__vite__mapDeps([44,10,22,15,9,13,14,7,23,8,32,24,18,35,36,26,27,17,28,29,45]))},{path:"ayanmo",component:()=>mt(()=>import("./AyanMoPage-fWHEDfql.js"),__vite__mapDeps([46,9,10,11,12,13,14,7,32,27,17,28,24,16,18,35,36,47]))},{path:"/login",component:()=>mt(()=>import("./AuthPage-BTlSFuPN.js"),__vite__mapDeps([48,49,3,23,25,6,7,50,24,18,51])),meta:{requiresGuest:!0}},{path:"/account",component:()=>mt(()=>import("./AccountPage-BuYGGQpA.js"),__vite__mapDeps([52,10,9,11,42,33,49,3,23,25,6,7,39,32,14,15,5,2,8,24,16,18])),meta:{requiresAuth:!0}},{path:"/contact",component:()=>mt(()=>import("./ContactPage-IM0luBmg.js"),__vite__mapDeps([53,54]))},{path:"/saved-routes",component:()=>mt(()=>import("./SavedRoutesPage-ClSm8Td2.js"),__vite__mapDeps([55,32,14,7,34,15,10,11,12,13,56,24,16,18,57])),meta:{requiresAuth:!0,requiresPremium:!0}},{path:"/offline",component:()=>mt(()=>import("./OfflinePage-DcynzcLX.js"),__vite__mapDeps([58,9,10,11,24,18,59])),meta:{requiresAuth:!0,requiresPremium:!0}}]},{path:"/admin",component:()=>mt(()=>import("./BlankLayout-BcBmkr3x.js"),__vite__mapDeps([60,1,2,3])),children:[{path:"adminlogin",name:"AdminLogin",component:()=>mt(()=>import("./AdminLogin-dr6PRFE-.js"),__vite__mapDeps([61,39,50,24,18,62])),meta:{requiresGuest:!0}},{path:"signup",name:"AdminSignup",component:()=>mt(()=>import("./AdminSignup-BVc3gEfh.js"),__vite__mapDeps([63,22,15,10,9,13,14,7,23,8,39,50,24,18,64])),meta:{requiresGuest:!0}},{path:"dashboard",name:"AdminDashboard",component:()=>mt(()=>import("./AdminDashboard-DoAqZLkP.js"),__vite__mapDeps([65,42,4,3,5,2,6,7,8,9,10,11,12,13,14,24,1,16,18,15,34,32,22,23,56,21,50,33,35,36,66])),meta:{requiresAuth:!0,requiresAdmin:!0}}]},{path:"/:catchAll(.*)*",component:()=>mt(()=>import("./ErrorNotFound-B_nlysMW.js"),[])}];let db;const Yu=t=>db=t,fb=Symbol();function af(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ma;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ma||(Ma={}));function tB(){const t=kE(!0),e=t.run(()=>Ne({}));let n=[],r=[];const s=_i({install(i){Yu(s),s._a=i,i.provide(fb,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const pb=()=>{};function F_(t,e,n,r=pb){t.add(e);const s=()=>{t.delete(e)&&r()};return!n&&xE()&&S0(s),s}function xi(t,...e){t.forEach(n=>{n(...e)})}const Nk=t=>t(),U_=Symbol(),ud=Symbol();function lf(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];af(s)&&af(r)&&t.hasOwnProperty(n)&&!dt(r)&&!ns(r)?t[n]=lf(s,r):t[n]=r}return t}const Ok=Symbol();function Mk(t){return!af(t)||!Object.prototype.hasOwnProperty.call(t,Ok)}const{assign:qr}=Object;function Lk(t){return!!(dt(t)&&t.effect)}function Fk(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function u(){a||(n.state.value[t]=s?s():{});const h=Q0(n.state.value[t]);return qr(h,i,Object.keys(o||{}).reduce((d,p)=>(d[p]=_i($(()=>{Yu(n);const g=n._s.get(t);return o[p].call(g,g)})),d),{}))}return l=mb(t,u,e,n,r,!0),l}function mb(t,e,n={},r,s,i){let o;const a=qr({actions:{}},n),l={deep:!0};let u,h,d=new Set,p=new Set,g;const T=r.state.value[t];!i&&!T&&(r.state.value[t]={}),Ne({});let P;function C(y){let w;u=h=!1,typeof y=="function"?(y(r.state.value[t]),w={type:Ma.patchFunction,storeId:t,events:g}):(lf(r.state.value[t],y),w={type:Ma.patchObject,payload:y,storeId:t,events:g});const E=P=Symbol();en().then(()=>{P===E&&(u=!0)}),h=!0,xi(d,w,r.state.value[t])}const D=i?function(){const{state:w}=n,E=w?w():{};this.$patch(v=>{qr(v,E)})}:pb;function S(){o.stop(),d.clear(),p.clear(),r._s.delete(t)}const x=(y,w="")=>{if(U_ in y)return y[ud]=w,y;const E=function(){Yu(r);const v=Array.from(arguments),b=new Set,_=new Set;function U(ee){b.add(ee)}function ne(ee){_.add(ee)}xi(p,{args:v,name:E[ud],store:L,after:U,onError:ne});let ue;try{ue=y.apply(this&&this.$id===t?this:L,v)}catch(ee){throw xi(_,ee),ee}return ue instanceof Promise?ue.then(ee=>(xi(b,ee),ee)).catch(ee=>(xi(_,ee),Promise.reject(ee))):(xi(b,ue),ue)};return E[U_]=!0,E[ud]=w,E},V={_p:r,$id:t,$onAction:F_.bind(null,p),$patch:C,$reset:D,$subscribe(y,w={}){const E=F_(d,y,w.detached,()=>v()),v=o.run(()=>Ge(()=>r.state.value[t],b=>{(w.flush==="sync"?h:u)&&y({storeId:t,type:Ma.direct,events:g},b)},qr({},l,w)));return E},$dispose:S},L=gi(V);r._s.set(t,L);const A=(r._a&&r._a.runWithContext||Nk)(()=>r._e.run(()=>(o=kE()).run(()=>e({action:x}))));for(const y in A){const w=A[y];if(dt(w)&&!Lk(w)||ns(w))i||(T&&Mk(w)&&(dt(w)?w.value=T[y]:lf(w,T[y])),r.state.value[t][y]=w);else if(typeof w=="function"){const E=x(w,y);A[y]=E,a.actions[y]=w}}return qr(L,A),qr(Ae(L),A),Object.defineProperty(L,"$state",{get:()=>r.state.value[t],set:y=>{C(w=>{qr(w,y)})}}),r._p.forEach(y=>{qr(L,o.run(()=>y({store:L,app:r._a,pinia:r,options:a})))}),T&&i&&n.hydrate&&n.hydrate(L.$state,T),u=!0,h=!0,L}function Uk(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,a){const l=PR();return o=o||(l?bn(fb,null):null),o&&Yu(o),o=db,o._s.has(t)||(s?mb(t,e,r,o):Fk(t,r,o)),o._s.get(t)}return i.$id=t,i}const Bk=()=>{};var B_={};const gb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},qk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},_b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||d==null)throw new $k;const p=i<<2|a>>4;if(r.push(p),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const T=u<<6&192|d;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $k extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jk=function(t){const e=gb(t);return _b.encodeByteArray(e,!0)},lu=function(t){return jk(t).replace(/\./g,"")},yb=function(t){try{return _b.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const zk=()=>vb().__FIREBASE_DEFAULTS__,Kk=()=>{if(typeof process>"u"||typeof B_>"u")return;const t=B_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Hk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yb(t[1]);return e&&JSON.parse(e)},Xu=()=>{try{return Bk()||zk()||Kk()||Hk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Eb=t=>Xu()?.emulatorHosts?.[t],Gk=t=>{const e=Eb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wb=()=>Xu()?.config,bb=t=>Xu()?.[`_${t}`];class Wk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function _s(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sp(t){return(await fetch(t,{credentials:"include"})).ok}function Qk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[lu(JSON.stringify(n)),lu(JSON.stringify(o)),""].join(".")}const La={};function Jk(){const t={prod:[],emulator:[]};for(const e of Object.keys(La))La[e]?t.emulator.push(e):t.prod.push(e);return t}function Yk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let q_=!1;function Ib(t,e){if(typeof window>"u"||typeof document>"u"||!_s(window.location.host)||La[t]===e||La[t]||q_)return;La[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=Jk().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{q_=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=Yk(r),g=n("text"),T=document.getElementById(g)||document.createElement("span"),P=n("learnmore"),C=document.getElementById(P)||document.createElement("a"),D=n("preprendIcon"),S=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;a(x),h(C,P);const V=u();l(S,D),x.append(S,T,C,V),document.body.appendChild(x)}i?(T.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function Tb(){const t=Xu()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ex(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nx(){const t=bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ab(){return!Tb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Sb(){return!Tb()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Rb(){try{return typeof indexedDB=="object"}catch{return!1}}function rx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const sx="FirebaseError";class rr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sx,Object.setPrototypeOf(this,rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sl.prototype.create)}}class Sl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?ix(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new rr(s,a,r)}}function ix(t,e){return t.replace(ox,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ox=/\{\$([^}]+)}/g;function ax(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function si(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if($_(i)&&$_(o)){if(!si(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function $_(t){return t!==null&&typeof t=="object"}function Rl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ya(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function va(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lx(t,e){const n=new cx(t,e);return n.subscribe.bind(n)}class cx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ux(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=hd),s.error===void 0&&(s.error=hd),s.complete===void 0&&(s.complete=hd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ux(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hd(){}function et(t){return t&&t._delegate?t._delegate:t}class hs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Os="[DEFAULT]";class hx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Wk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fx(e))try{this.getOrInitializeService({instanceIdentifier:Os})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Os){return this.instances.has(e)}getOptions(e=Os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Os){return this.component?this.component.multipleInstances?e:Os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dx(t){return t===Os?void 0:t}function fx(t){return t.instantiationMode==="EAGER"}class px{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const mx={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},gx=xe.INFO,_x={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},yx=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=_x[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rp{constructor(e){this.name=e,this._logLevel=gx,this._logHandler=yx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const vx=(t,e)=>e.some(n=>t instanceof n);let j_,z_;function Ex(){return j_||(j_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wx(){return z_||(z_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cb=new WeakMap,cf=new WeakMap,Pb=new WeakMap,dd=new WeakMap,Cp=new WeakMap;function bx(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(rs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Cb.set(n,t)}).catch(()=>{}),Cp.set(e,t),e}function Ix(t){if(cf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});cf.set(t,e)}let uf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Pb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Tx(t){uf=t(uf)}function Ax(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fd(this),e,...n);return Pb.set(r,e.sort?e.sort():[e]),rs(r)}:wx().includes(t)?function(...e){return t.apply(fd(this),e),rs(Cb.get(this))}:function(...e){return rs(t.apply(fd(this),e))}}function Sx(t){return typeof t=="function"?Ax(t):(t instanceof IDBTransaction&&Ix(t),vx(t,Ex())?new Proxy(t,uf):t)}function rs(t){if(t instanceof IDBRequest)return bx(t);if(dd.has(t))return dd.get(t);const e=Sx(t);return e!==t&&(dd.set(t,e),Cp.set(e,t)),e}const fd=t=>Cp.get(t);function Rx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=rs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(rs(o.result),l.oldVersion,l.newVersion,rs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Cx=["get","getKey","getAll","getAllKeys","count"],Px=["put","add","delete","clear"],pd=new Map;function K_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pd.get(e))return pd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Px.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Cx.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return pd.set(e,i),i}Tx(t=>({...t,get:(e,n,r)=>K_(e,n)||t.get(e,n,r),has:(e,n)=>!!K_(e,n)||t.has(e,n)}));class kx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xx(t){return t.getComponent()?.type==="VERSION"}const hf="@firebase/app",H_="0.14.6";const yr=new Rp("@firebase/app"),Vx="@firebase/app-compat",Dx="@firebase/analytics-compat",Nx="@firebase/analytics",Ox="@firebase/app-check-compat",Mx="@firebase/app-check",Lx="@firebase/auth",Fx="@firebase/auth-compat",Ux="@firebase/database",Bx="@firebase/data-connect",qx="@firebase/database-compat",$x="@firebase/functions",jx="@firebase/functions-compat",zx="@firebase/installations",Kx="@firebase/installations-compat",Hx="@firebase/messaging",Gx="@firebase/messaging-compat",Wx="@firebase/performance",Qx="@firebase/performance-compat",Jx="@firebase/remote-config",Yx="@firebase/remote-config-compat",Xx="@firebase/storage",Zx="@firebase/storage-compat",e1="@firebase/firestore",t1="@firebase/ai",n1="@firebase/firestore-compat",r1="firebase",s1="12.6.0";const df="[DEFAULT]",i1={[hf]:"fire-core",[Vx]:"fire-core-compat",[Nx]:"fire-analytics",[Dx]:"fire-analytics-compat",[Mx]:"fire-app-check",[Ox]:"fire-app-check-compat",[Lx]:"fire-auth",[Fx]:"fire-auth-compat",[Ux]:"fire-rtdb",[Bx]:"fire-data-connect",[qx]:"fire-rtdb-compat",[$x]:"fire-fn",[jx]:"fire-fn-compat",[zx]:"fire-iid",[Kx]:"fire-iid-compat",[Hx]:"fire-fcm",[Gx]:"fire-fcm-compat",[Wx]:"fire-perf",[Qx]:"fire-perf-compat",[Jx]:"fire-rc",[Yx]:"fire-rc-compat",[Xx]:"fire-gcs",[Zx]:"fire-gcs-compat",[e1]:"fire-fst",[n1]:"fire-fst-compat",[t1]:"fire-vertex","fire-js":"fire-js",[r1]:"fire-js-all"};const cu=new Map,o1=new Map,ff=new Map;function G_(t,e){try{t.container.addComponent(e)}catch(n){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ii(t){const e=t.name;if(ff.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;ff.set(e,t);for(const n of cu.values())G_(n,t);for(const n of o1.values())G_(n,t);return!0}function Zu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cn(t){return t==null?!1:t.settings!==void 0}const a1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new Sl("app","Firebase",a1);class l1{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}const vi=s1;function kb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:df,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ss.create("bad-app-name",{appName:String(s)});if(n||(n=wb()),!n)throw ss.create("no-options");const i=cu.get(s);if(i){if(si(n,i.options)&&si(r,i.config))return i;throw ss.create("duplicate-app",{appName:s})}const o=new px(s);for(const l of ff.values())o.addComponent(l);const a=new l1(n,r,o);return cu.set(s,a),a}function xb(t=df){const e=cu.get(t);if(!e&&t===df&&wb())return kb();if(!e)throw ss.create("no-app",{appName:t});return e}function Wn(t,e,n){let r=i1[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(o.join(" "));return}ii(new hs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const c1="firebase-heartbeat-database",u1=1,il="firebase-heartbeat-store";let md=null;function Vb(){return md||(md=Rx(c1,u1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(il)}catch(n){console.warn(n)}}}}).catch(t=>{throw ss.create("idb-open",{originalErrorMessage:t.message})})),md}async function h1(t){try{const n=(await Vb()).transaction(il),r=await n.objectStore(il).get(Db(t));return await n.done,r}catch(e){if(e instanceof rr)yr.warn(e.message);else{const n=ss.create("idb-get",{originalErrorMessage:e?.message});yr.warn(n.message)}}}async function W_(t,e){try{const r=(await Vb()).transaction(il,"readwrite");await r.objectStore(il).put(e,Db(t)),await r.done}catch(n){if(n instanceof rr)yr.warn(n.message);else{const r=ss.create("idb-set",{originalErrorMessage:n?.message});yr.warn(r.message)}}}function Db(t){return`${t.name}!${t.options.appId}`}const d1=1024,f1=30;class p1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new g1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Q_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>f1){const s=_1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){yr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Q_(),{heartbeatsToSend:n,unsentEntries:r}=m1(this._heartbeatsCache.heartbeats),s=lu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return yr.warn(e),""}}}function Q_(){return new Date().toISOString().substring(0,10)}function m1(t,e=d1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),J_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),J_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class g1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rb()?rx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await h1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return W_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return W_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function J_(t){return lu(JSON.stringify({version:2,heartbeats:t})).length}function _1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function y1(t){ii(new hs("platform-logger",e=>new kx(e),"PRIVATE")),ii(new hs("heartbeat",e=>new p1(e),"PRIVATE")),Wn(hf,H_,t),Wn(hf,H_,"esm2020"),Wn("fire-js","")}y1("");function Nb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v1=Nb,Ob=new Sl("auth","Firebase",Nb());const uu=new Rp("@firebase/auth");function E1(t,...e){uu.logLevel<=xe.WARN&&uu.warn(`Auth (${vi}): ${t}`,...e)}function Ac(t,...e){uu.logLevel<=xe.ERROR&&uu.error(`Auth (${vi}): ${t}`,...e)}function On(t,...e){throw Pp(t,...e)}function Qn(t,...e){return Pp(t,...e)}function Mb(t,e,n){const r={...v1(),[e]:n};return new Sl("auth","Firebase",r).create(e,{appName:t.name})}function pr(t){return Mb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ob.create(t,...e)}function we(t,e,...n){if(!t)throw Pp(e,...n)}function hr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ac(e),new Error(e)}function vr(t,e){t||hr(e)}function pf(){return typeof self<"u"&&self.location?.href||""}function w1(){return Y_()==="http:"||Y_()==="https:"}function Y_(){return typeof self<"u"&&self.location?.protocol||null}function b1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w1()||ex()||"connection"in navigator)?navigator.onLine:!0}function I1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Cl{constructor(e,n){this.shortDelay=e,this.longDelay=n,vr(n>e,"Short delay should be less than long delay!"),this.isMobile=Xk()||tx()}get(){return b1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kp(t,e){vr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Lb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const T1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const A1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],S1=new Cl(3e4,6e4);function ys(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ar(t,e,n,r,s={}){return Fb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Rl({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return Zk()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&_s(t.emulatorConfig.host)&&(u.credentials="include"),Lb.fetch()(await Ub(t,t.config.apiHost,n,a),u)})}async function Fb(t,e,n){t._canInitEmulator=!1;const r={...T1,...e};try{const s=new C1(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw sc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw sc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw sc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Mb(t,h,u);On(t,h)}}catch(s){if(s instanceof rr)throw s;On(t,"network-request-failed",{message:String(s)})}}async function Pl(t,e,n,r,s={}){const i=await Ar(t,e,n,r,s);return"mfaPendingCredential"in i&&On(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Ub(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?kp(t.config,s):`${t.config.apiScheme}://${s}`;return A1.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function R1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class C1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qn(this.auth,"network-request-failed")),S1.get())})}}function sc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Qn(t,e,r);return s.customData._tokenResponse=n,s}function X_(t){return t!==void 0&&t.enterprise!==void 0}class P1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return R1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function k1(t,e){return Ar(t,"GET","/v2/recaptchaConfig",ys(t,e))}async function x1(t,e){return Ar(t,"POST","/v1/accounts:delete",e)}async function hu(t,e){return Ar(t,"POST","/v1/accounts:lookup",e)}function Fa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function V1(t,e=!1){const n=et(t),r=await n.getIdToken(e),s=xp(r);we(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Fa(gd(s.auth_time)),issuedAtTime:Fa(gd(s.iat)),expirationTime:Fa(gd(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function gd(t){return Number(t)*1e3}function xp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ac("JWT malformed, contained fewer than 3 sections"),null;try{const s=yb(n);return s?JSON.parse(s):(Ac("Failed to decode base64 JWT payload"),null)}catch(s){return Ac("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Z_(t){const e=xp(t);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function fo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof rr&&D1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function D1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class N1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class mf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fa(this.lastLoginAt),this.creationTime=Fa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function du(t){const e=t.auth,n=await t.getIdToken(),r=await fo(t,hu(e,{idToken:n}));we(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?Bb(s.providerUserInfo):[],o=M1(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new mf(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function O1(t){const e=et(t);await du(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function M1(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Bb(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function L1(t,e){const n=await Fb(t,{},async()=>{const r=Rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Ub(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&_s(t.emulatorConfig.host)&&(l.credentials="include"),Lb.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function F1(t,e){return Ar(t,"POST","/v2/accounts:revokeToken",ys(t,e))}class so{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=Z_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await L1(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new so;return r&&(we(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(we(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(we(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new so,this.toJSON())}_performRefresh(){return hr("not implemented")}}function Mr(t,e){we(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class kn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new N1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await fo(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return V1(this,e)}reload(){return O1(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new kn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await du(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject(pr(this.auth));const e=await this.getIdToken();return await fo(this,x1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:p,isAnonymous:g,providerData:T,stsTokenManager:P}=n;we(d&&P,e,"internal-error");const C=so.fromJSON(this.name,P);we(typeof d=="string",e,"internal-error"),Mr(r,e.name),Mr(s,e.name),we(typeof p=="boolean",e,"internal-error"),we(typeof g=="boolean",e,"internal-error"),Mr(i,e.name),Mr(o,e.name),Mr(a,e.name),Mr(l,e.name),Mr(u,e.name),Mr(h,e.name);const D=new kn({uid:d,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:C,createdAt:u,lastLoginAt:h});return T&&Array.isArray(T)&&(D.providerData=T.map(S=>({...S}))),l&&(D._redirectEventId=l),D}static async _fromIdTokenResponse(e,n,r=!1){const s=new so;s.updateFromServerResponse(n);const i=new kn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await du(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];we(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Bb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,a=new so;a.updateFromIdToken(r);const l=new kn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new mf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const ey=new Map;function dr(t){vr(t instanceof Function,"Expected a class definition");let e=ey.get(t);return e?(vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ey.set(t,e),e)}class qb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}qb.type="NONE";const ty=qb;function Sc(t,e,n){return`firebase:${t}:${e}:${n}`}class io{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Sc(this.userKey,s.apiKey,i),this.fullPersistenceKey=Sc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await hu(this.auth,{idToken:e}).catch(()=>{});return n?kn._fromGetAccountInfoResponse(this.auth,n,e):null}return kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new io(dr(ty),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||dr(ty);const o=Sc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const p=await hu(e,{idToken:h}).catch(()=>{});if(!p)break;d=await kn._fromGetAccountInfoResponse(e,p,h)}else d=kn._fromJSON(e,h);u!==i&&(a=d),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new io(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new io(i,e,r))}}function ny(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($b(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Gb(e))return"Blackberry";if(Wb(e))return"Webos";if(jb(e))return"Safari";if((e.includes("chrome/")||zb(e))&&!e.includes("edge/"))return"Chrome";if(Hb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function $b(t=bt()){return/firefox\//i.test(t)}function jb(t=bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zb(t=bt()){return/crios\//i.test(t)}function Kb(t=bt()){return/iemobile/i.test(t)}function Hb(t=bt()){return/android/i.test(t)}function Gb(t=bt()){return/blackberry/i.test(t)}function Wb(t=bt()){return/webos/i.test(t)}function Vp(t=bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function U1(t=bt()){return Vp(t)&&!!window.navigator?.standalone}function B1(){return nx()&&document.documentMode===10}function Qb(t=bt()){return Vp(t)||Hb(t)||Wb(t)||Gb(t)||/windows phone/i.test(t)||Kb(t)}function Jb(t,e=[]){let n;switch(t){case"Browser":n=ny(bt());break;case"Worker":n=`${ny(bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vi}/${r}`}class q1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function $1(t,e={}){return Ar(t,"GET","/v2/passwordPolicy",ys(t,e))}const j1=6;class z1{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??j1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class K1{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ry(this),this.idTokenSubscription=new ry(this),this.beforeStateQueue=new q1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ob,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await io.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hu(this,{idToken:e}),r=await kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(cn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===o)&&a?.user&&(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await du(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=I1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cn(this.app))return Promise.reject(pr(this));const n=e?et(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject(pr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cn(this.app)?Promise.reject(pr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $1(this),n=new z1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await F1(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&dr(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await io.create(this,[dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&E1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ei(t){return et(t)}class ry{constructor(e){this.auth=e,this.observer=null,this.addObserver=lx(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let eh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H1(t){eh=t}function Yb(t){return eh.loadJS(t)}function G1(){return eh.recaptchaEnterpriseScript}function W1(){return eh.gapiScript}function Q1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class J1{constructor(){this.enterprise=new Y1}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Y1{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const X1="recaptcha-enterprise",Xb="NO_RECAPTCHA";class Z1{constructor(e){this.type=X1,this.auth=Ei(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{k1(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new P1(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;X_(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Xb)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new J1().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&X_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=G1();l.length!==0&&(l+=a),Yb(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function sy(t,e,n,r=!1,s=!1){const i=new Z1(t);let o;if(s)o=Xb;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function gf(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await sy(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await sy(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}function eV(t,e){const n=Zu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(si(i,e??{}))return s;On(s,"already-initialized")}return n.initialize({options:e})}function tV(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(dr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function nV(t,e,n){const r=Ei(t);we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Zb(e),{host:o,port:a}=rV(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){we(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),we(si(u,r.config.emulator)&&si(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,_s(o)?(Sp(`${i}//${o}${l}`),Ib("Auth",!0)):sV()}function Zb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rV(t){const e=Zb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:iy(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:iy(o)}}}function iy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Dp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}async function iV(t,e){return Ar(t,"POST","/v1/accounts:signUp",e)}async function oV(t,e){return Pl(t,"POST","/v1/accounts:signInWithPassword",ys(t,e))}async function aV(t,e){return Pl(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}async function lV(t,e){return Pl(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}class ol extends Dp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ol(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ol(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gf(e,n,"signInWithPassword",oV);case"emailLink":return aV(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gf(e,r,"signUpPassword",iV);case"emailLink":return lV(e,{idToken:n,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function oo(t,e){return Pl(t,"POST","/v1/accounts:signInWithIdp",ys(t,e))}const cV="http://localhost";class oi extends Dp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):On("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new oi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return oo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,oo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oo(e,n)}buildRequest(){const e={requestUri:cV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rl(n)}return e}}function uV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hV(t){const e=ya(va(t)).link,n=e?ya(va(e)).deep_link_id:null,r=ya(va(t)).deep_link_id;return(r?ya(va(r)).link:null)||r||n||e||t}class Np{constructor(e){const n=ya(va(e)),r=n.apiKey??null,s=n.oobCode??null,i=uV(n.mode??null);we(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=hV(e);try{return new Np(n)}catch{return null}}}class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,n){return ol._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Np.parseLink(n);return we(r,"argument-error"),ol._fromEmailAndCode(e,r.code,r.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class eI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class kl extends eI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Wr extends kl{constructor(){super("facebook.com")}static credential(e){return oi._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";class Qr extends kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oi._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Qr.credential(n,r)}catch{return null}}}Qr.GOOGLE_SIGN_IN_METHOD="google.com";Qr.PROVIDER_ID="google.com";class Jr extends kl{constructor(){super("github.com")}static credential(e){return oi._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.GITHUB_SIGN_IN_METHOD="github.com";Jr.PROVIDER_ID="github.com";class Yr extends kl{constructor(){super("twitter.com")}static credential(e,n){return oi._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Yr.credential(n,r)}catch{return null}}}Yr.TWITTER_SIGN_IN_METHOD="twitter.com";Yr.PROVIDER_ID="twitter.com";async function dV(t,e){return Pl(t,"POST","/v1/accounts:signUp",ys(t,e))}class ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await kn._fromIdTokenResponse(e,r,s),o=oy(r);return new ai({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=oy(r);return new ai({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function oy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class fu extends rr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,fu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new fu(e,n,r,s)}}function tI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?fu._fromErrorAndOperation(t,i,e,r):i})}async function fV(t,e,n=!1){const r=await fo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ai._forOperation(t,"link",r)}async function pV(t,e,n=!1){const{auth:r}=t;if(cn(r.app))return Promise.reject(pr(r));const s="reauthenticate";try{const i=await fo(t,tI(r,s,e,t),n);we(i.idToken,r,"internal-error");const o=xp(i.idToken);we(o,r,"internal-error");const{sub:a}=o;return we(t.uid===a,r,"user-mismatch"),ai._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&On(r,"user-mismatch"),i}}async function nI(t,e,n=!1){if(cn(t.app))return Promise.reject(pr(t));const r="signIn",s=await tI(t,r,e),i=await ai._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function mV(t,e){return nI(Ei(t),e)}async function rI(t){const e=Ei(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gV(t,e,n){if(cn(t.app))return Promise.reject(pr(t));const r=Ei(t),o=await gf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dV).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&rI(t),l}),a=await ai._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function _V(t,e,n){return cn(t.app)?Promise.reject(pr(t)):mV(et(t),Oo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&rI(t),r})}async function yV(t,e){return Ar(t,"POST","/v1/accounts:update",e)}async function vV(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=et(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await fo(r,yV(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function EV(t,e,n,r){return et(t).onIdTokenChanged(e,n,r)}function wV(t,e,n){return et(t).beforeAuthStateChanged(e,n)}function bV(t,e,n,r){return et(t).onAuthStateChanged(e,n,r)}function IV(t){return et(t).signOut()}const pu="__sak";class sI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pu,"1"),this.storage.removeItem(pu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const TV=1e3,AV=10;class iI extends sI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);B1()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},TV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iI.type="LOCAL";const SV=iI;class oI extends sI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oI.type="SESSION";const aI=oI;function RV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class th{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new th(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await RV(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}th.receivers=[];function Op(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class CV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Op("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const p=d;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Jn(){return window}function PV(t){Jn().location.href=t}function lI(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function kV(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xV(){return navigator?.serviceWorker?.controller||null}function VV(){return lI()?self:null}const cI="firebaseLocalStorageDb",DV=1,mu="firebaseLocalStorage",uI="fbase_key";class xl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nh(t,e){return t.transaction([mu],e?"readwrite":"readonly").objectStore(mu)}function NV(){const t=indexedDB.deleteDatabase(cI);return new xl(t).toPromise()}function _f(){const t=indexedDB.open(cI,DV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mu,{keyPath:uI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mu)?e(r):(r.close(),await NV(),e(await _f()))})})}async function ay(t,e,n){const r=nh(t,!0).put({[uI]:e,value:n});return new xl(r).toPromise()}async function OV(t,e){const n=nh(t,!1).get(e),r=await new xl(n).toPromise();return r===void 0?null:r.value}function ly(t,e){const n=nh(t,!0).delete(e);return new xl(n).toPromise()}const MV=800,LV=3;class hI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _f(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>LV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=th._getInstance(VV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await kV(),!this.activeServiceWorker)return;this.sender=new CV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _f();return await ay(e,pu,"1"),await ly(e,pu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ay(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>OV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ly(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=nh(s,!1).getAll();return new xl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hI.type="LOCAL";const FV=hI;new Cl(3e4,6e4);function UV(t,e){return e?dr(e):(we(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Mp extends Dp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BV(t){return nI(t.auth,new Mp(t),t.bypassAuthState)}function qV(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),pV(n,new Mp(t),t.bypassAuthState)}async function $V(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),fV(n,new Mp(t),t.bypassAuthState)}class dI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BV;case"linkViaPopup":case"linkViaRedirect":return $V;case"reauthViaPopup":case"reauthViaRedirect":return qV;default:On(this.auth,"internal-error")}}resolve(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jV=new Cl(2e3,1e4);class Qi extends dI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Qi.currentPopupAction&&Qi.currentPopupAction.cancel(),Qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){vr(this.filter.length===1,"Popup operations only handle one event");const e=Op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jV.get())};e()}}Qi.currentPopupAction=null;const zV="pendingRedirect",Rc=new Map;class KV extends dI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Rc.get(this.auth._key());if(!e){try{const r=await HV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Rc.set(this.auth._key(),e)}return this.bypassAuthState||Rc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HV(t,e){const n=QV(e),r=WV(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function GV(t,e){Rc.set(t._key(),e)}function WV(t){return dr(t._redirectPersistence)}function QV(t){return Sc(zV,t.config.apiKey,t.name)}async function JV(t,e,n=!1){if(cn(t.app))return Promise.reject(pr(t));const r=Ei(t),s=UV(r,e),o=await new KV(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const YV=600*1e3;class XV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!fI(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Qn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YV&&this.cachedEventUids.clear(),this.cachedEventUids.has(cy(e))}saveEventToCache(e){this.cachedEventUids.add(cy(e)),this.lastProcessedEventTime=Date.now()}}function cy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fI({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function ZV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fI(t);default:return!1}}async function eD(t,e={}){return Ar(t,"GET","/v1/projects",e)}const tD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nD=/^https?/;async function rD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eD(t);for(const n of e)try{if(sD(n))return}catch{}On(t,"unauthorized-domain")}function sD(t){const e=pf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!nD.test(n))return!1;if(tD.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const iD=new Cl(3e4,6e4);function uy(){const t=Jn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oD(t){return new Promise((e,n)=>{function r(){uy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uy(),n(Qn(t,"network-request-failed"))},timeout:iD.get()})}if(Jn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Jn().gapi?.load)r();else{const s=Q1("iframefcb");return Jn()[s]=()=>{gapi.load?r():n(Qn(t,"network-request-failed"))},Yb(`${W1()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw Cc=null,e})}let Cc=null;function aD(t){return Cc=Cc||oD(t),Cc}const lD=new Cl(5e3,15e3),cD="__/auth/iframe",uD="emulator/auth/iframe",hD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fD(t){const e=t.config;we(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?kp(e,uD):`https://${t.config.authDomain}/${cD}`,r={apiKey:e.apiKey,appName:t.name,v:vi},s=dD.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Rl(r).slice(1)}`}async function pD(t){const e=await aD(t),n=Jn().gapi;return we(n,t,"internal-error"),e.open({where:document.body,url:fD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hD,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Qn(t,"network-request-failed"),a=Jn().setTimeout(()=>{i(o)},lD.get());function l(){Jn().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const mD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gD=500,_D=600,yD="_blank",vD="http://localhost";class hy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ED(t,e,n,r=gD,s=_D){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...mD,width:r.toString(),height:s.toString(),top:i,left:o},u=bt().toLowerCase();n&&(a=zb(u)?yD:n),$b(u)&&(e=e||vD,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[g,T])=>`${p}${g}=${T},`,"");if(U1(u)&&a!=="_self")return wD(e||"",a),new hy(null);const d=window.open(e||"",a,h);we(d,t,"popup-blocked");try{d.focus()}catch{}return new hy(d)}function wD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const bD="__/auth/handler",ID="emulator/auth/handler",TD=encodeURIComponent("fac");async function dy(t,e,n,r,s,i){we(t.config.authDomain,t,"auth-domain-config-required"),we(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vi,eventId:s};if(e instanceof eI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ax(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof kl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${TD}=${encodeURIComponent(l)}`:"";return`${AD(t)}?${Rl(a).slice(1)}${u}`}function AD({config:t}){return t.emulator?kp(t,ID):`https://${t.authDomain}/${bD}`}const _d="webStorageSupport";class SD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aI,this._completeRedirectFn=JV,this._overrideRedirectResult=GV}async _openPopup(e,n,r,s){vr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await dy(e,n,r,pf(),s);return ED(e,i,Op())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await dy(e,n,r,pf(),s);return PV(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(vr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await pD(e),r=new XV(e);return n.register("authEvent",s=>(we(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_d,{type:_d},s=>{const i=s?.[0]?.[_d];i!==void 0&&n(!!i),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qb()||jb()||Vp()}}const RD=SD;var fy="@firebase/auth",py="1.11.1";class CD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function PD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kD(t){ii(new hs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;we(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jb(t)},u=new K1(r,s,i,l);return tV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ii(new hs("auth-internal",e=>{const n=Ei(e.getProvider("auth").getImmediate());return(r=>new CD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(fy,py,PD(t)),Wn(fy,py,"esm2020")}const xD=300,VD=bb("authIdTokenMaxAge")||xD;let my=null;const DD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>VD)return;const s=n?.token;my!==s&&(my=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ND(t=xb()){const e=Zu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=eV(t,{popupRedirectResolver:RD,persistence:[FV,SV,aI]}),r=bb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=DD(i.toString());wV(n,o,()=>o(n.currentUser)),EV(n,a=>o(a))}}const s=Eb("auth");return s&&nV(n,`http://${s}`),n}function OD(){return document.getElementsByTagName("head")?.[0]??document}H1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Qn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",OD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kD("Browser");var gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var is,pI;(function(){var t;function e(A,y){function w(){}w.prototype=y.prototype,A.F=y.prototype,A.prototype=new w,A.prototype.constructor=A,A.D=function(E,v,b){for(var _=Array(arguments.length-2),U=2;U<arguments.length;U++)_[U-2]=arguments[U];return y.prototype[v].apply(E,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,y,w){w||(w=0);const E=Array(16);if(typeof y=="string")for(var v=0;v<16;++v)E[v]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(v=0;v<16;++v)E[v]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=A.g[0],w=A.g[1],v=A.g[2];let b=A.g[3],_;_=y+(b^w&(v^b))+E[0]+3614090360&4294967295,y=w+(_<<7&4294967295|_>>>25),_=b+(v^y&(w^v))+E[1]+3905402710&4294967295,b=y+(_<<12&4294967295|_>>>20),_=v+(w^b&(y^w))+E[2]+606105819&4294967295,v=b+(_<<17&4294967295|_>>>15),_=w+(y^v&(b^y))+E[3]+3250441966&4294967295,w=v+(_<<22&4294967295|_>>>10),_=y+(b^w&(v^b))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=b+(v^y&(w^v))+E[5]+1200080426&4294967295,b=y+(_<<12&4294967295|_>>>20),_=v+(w^b&(y^w))+E[6]+2821735955&4294967295,v=b+(_<<17&4294967295|_>>>15),_=w+(y^v&(b^y))+E[7]+4249261313&4294967295,w=v+(_<<22&4294967295|_>>>10),_=y+(b^w&(v^b))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=b+(v^y&(w^v))+E[9]+2336552879&4294967295,b=y+(_<<12&4294967295|_>>>20),_=v+(w^b&(y^w))+E[10]+4294925233&4294967295,v=b+(_<<17&4294967295|_>>>15),_=w+(y^v&(b^y))+E[11]+2304563134&4294967295,w=v+(_<<22&4294967295|_>>>10),_=y+(b^w&(v^b))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=b+(v^y&(w^v))+E[13]+4254626195&4294967295,b=y+(_<<12&4294967295|_>>>20),_=v+(w^b&(y^w))+E[14]+2792965006&4294967295,v=b+(_<<17&4294967295|_>>>15),_=w+(y^v&(b^y))+E[15]+1236535329&4294967295,w=v+(_<<22&4294967295|_>>>10),_=y+(v^b&(w^v))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=b+(w^v&(y^w))+E[6]+3225465664&4294967295,b=y+(_<<9&4294967295|_>>>23),_=v+(y^w&(b^y))+E[11]+643717713&4294967295,v=b+(_<<14&4294967295|_>>>18),_=w+(b^y&(v^b))+E[0]+3921069994&4294967295,w=v+(_<<20&4294967295|_>>>12),_=y+(v^b&(w^v))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=b+(w^v&(y^w))+E[10]+38016083&4294967295,b=y+(_<<9&4294967295|_>>>23),_=v+(y^w&(b^y))+E[15]+3634488961&4294967295,v=b+(_<<14&4294967295|_>>>18),_=w+(b^y&(v^b))+E[4]+3889429448&4294967295,w=v+(_<<20&4294967295|_>>>12),_=y+(v^b&(w^v))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=b+(w^v&(y^w))+E[14]+3275163606&4294967295,b=y+(_<<9&4294967295|_>>>23),_=v+(y^w&(b^y))+E[3]+4107603335&4294967295,v=b+(_<<14&4294967295|_>>>18),_=w+(b^y&(v^b))+E[8]+1163531501&4294967295,w=v+(_<<20&4294967295|_>>>12),_=y+(v^b&(w^v))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=b+(w^v&(y^w))+E[2]+4243563512&4294967295,b=y+(_<<9&4294967295|_>>>23),_=v+(y^w&(b^y))+E[7]+1735328473&4294967295,v=b+(_<<14&4294967295|_>>>18),_=w+(b^y&(v^b))+E[12]+2368359562&4294967295,w=v+(_<<20&4294967295|_>>>12),_=y+(w^v^b)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=b+(y^w^v)+E[8]+2272392833&4294967295,b=y+(_<<11&4294967295|_>>>21),_=v+(b^y^w)+E[11]+1839030562&4294967295,v=b+(_<<16&4294967295|_>>>16),_=w+(v^b^y)+E[14]+4259657740&4294967295,w=v+(_<<23&4294967295|_>>>9),_=y+(w^v^b)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=b+(y^w^v)+E[4]+1272893353&4294967295,b=y+(_<<11&4294967295|_>>>21),_=v+(b^y^w)+E[7]+4139469664&4294967295,v=b+(_<<16&4294967295|_>>>16),_=w+(v^b^y)+E[10]+3200236656&4294967295,w=v+(_<<23&4294967295|_>>>9),_=y+(w^v^b)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=b+(y^w^v)+E[0]+3936430074&4294967295,b=y+(_<<11&4294967295|_>>>21),_=v+(b^y^w)+E[3]+3572445317&4294967295,v=b+(_<<16&4294967295|_>>>16),_=w+(v^b^y)+E[6]+76029189&4294967295,w=v+(_<<23&4294967295|_>>>9),_=y+(w^v^b)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=b+(y^w^v)+E[12]+3873151461&4294967295,b=y+(_<<11&4294967295|_>>>21),_=v+(b^y^w)+E[15]+530742520&4294967295,v=b+(_<<16&4294967295|_>>>16),_=w+(v^b^y)+E[2]+3299628645&4294967295,w=v+(_<<23&4294967295|_>>>9),_=y+(v^(w|~b))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=b+(w^(y|~v))+E[7]+1126891415&4294967295,b=y+(_<<10&4294967295|_>>>22),_=v+(y^(b|~w))+E[14]+2878612391&4294967295,v=b+(_<<15&4294967295|_>>>17),_=w+(b^(v|~y))+E[5]+4237533241&4294967295,w=v+(_<<21&4294967295|_>>>11),_=y+(v^(w|~b))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=b+(w^(y|~v))+E[3]+2399980690&4294967295,b=y+(_<<10&4294967295|_>>>22),_=v+(y^(b|~w))+E[10]+4293915773&4294967295,v=b+(_<<15&4294967295|_>>>17),_=w+(b^(v|~y))+E[1]+2240044497&4294967295,w=v+(_<<21&4294967295|_>>>11),_=y+(v^(w|~b))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=b+(w^(y|~v))+E[15]+4264355552&4294967295,b=y+(_<<10&4294967295|_>>>22),_=v+(y^(b|~w))+E[6]+2734768916&4294967295,v=b+(_<<15&4294967295|_>>>17),_=w+(b^(v|~y))+E[13]+1309151649&4294967295,w=v+(_<<21&4294967295|_>>>11),_=y+(v^(w|~b))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=b+(w^(y|~v))+E[11]+3174756917&4294967295,b=y+(_<<10&4294967295|_>>>22),_=v+(y^(b|~w))+E[2]+718787259&4294967295,v=b+(_<<15&4294967295|_>>>17),_=w+(b^(v|~y))+E[9]+3951481745&4294967295,A.g[0]=A.g[0]+y&4294967295,A.g[1]=A.g[1]+(v+(_<<21&4294967295|_>>>11))&4294967295,A.g[2]=A.g[2]+v&4294967295,A.g[3]=A.g[3]+b&4294967295}r.prototype.v=function(A,y){y===void 0&&(y=A.length);const w=y-this.blockSize,E=this.C;let v=this.h,b=0;for(;b<y;){if(v==0)for(;b<=w;)s(this,A,b),b+=this.blockSize;if(typeof A=="string"){for(;b<y;)if(E[v++]=A.charCodeAt(b++),v==this.blockSize){s(this,E),v=0;break}}else for(;b<y;)if(E[v++]=A[b++],v==this.blockSize){s(this,E),v=0;break}}this.h=v,this.o+=y},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var y=1;y<A.length-8;++y)A[y]=0;y=this.o*8;for(var w=A.length-8;w<A.length;++w)A[w]=y&255,y/=256;for(this.v(A),A=Array(16),y=0,w=0;w<4;++w)for(let E=0;E<32;E+=8)A[y++]=this.g[w]>>>E&255;return A};function i(A,y){var w=a;return Object.prototype.hasOwnProperty.call(w,A)?w[A]:w[A]=y(A)}function o(A,y){this.h=y;const w=[];let E=!0;for(let v=A.length-1;v>=0;v--){const b=A[v]|0;E&&b==y||(w[v]=b,E=!1)}this.g=w}var a={};function l(A){return-128<=A&&A<128?i(A,function(y){return new o([y|0],y<0?-1:0)}):new o([A|0],A<0?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return d;if(A<0)return C(u(-A));const y=[];let w=1;for(let E=0;A>=w;E++)y[E]=A/w|0,w*=4294967296;return new o(y,0)}function h(A,y){if(A.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(A.charAt(0)=="-")return C(h(A.substring(1),y));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=u(Math.pow(y,8));let E=d;for(let b=0;b<A.length;b+=8){var v=Math.min(8,A.length-b);const _=parseInt(A.substring(b,b+v),y);v<8?(v=u(Math.pow(y,v)),E=E.j(v).add(u(_))):(E=E.j(w),E=E.add(u(_)))}return E}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(P(this))return-C(this).m();let A=0,y=1;for(let w=0;w<this.g.length;w++){const E=this.i(w);A+=(E>=0?E:4294967296+E)*y,y*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(T(this))return"0";if(P(this))return"-"+C(this).toString(A);const y=u(Math.pow(A,6));var w=this;let E="";for(;;){const v=V(w,y).g;w=D(w,v.j(y));let b=((w.g.length>0?w.g[0]:w.h)>>>0).toString(A);if(w=v,T(w))return b+E;for(;b.length<6;)b="0"+b;E=b+E}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function T(A){if(A.h!=0)return!1;for(let y=0;y<A.g.length;y++)if(A.g[y]!=0)return!1;return!0}function P(A){return A.h==-1}t.l=function(A){return A=D(this,A),P(A)?-1:T(A)?0:1};function C(A){const y=A.g.length,w=[];for(let E=0;E<y;E++)w[E]=~A.g[E];return new o(w,~A.h).add(p)}t.abs=function(){return P(this)?C(this):this},t.add=function(A){const y=Math.max(this.g.length,A.g.length),w=[];let E=0;for(let v=0;v<=y;v++){let b=E+(this.i(v)&65535)+(A.i(v)&65535),_=(b>>>16)+(this.i(v)>>>16)+(A.i(v)>>>16);E=_>>>16,b&=65535,_&=65535,w[v]=_<<16|b}return new o(w,w[w.length-1]&-2147483648?-1:0)};function D(A,y){return A.add(C(y))}t.j=function(A){if(T(this)||T(A))return d;if(P(this))return P(A)?C(this).j(C(A)):C(C(this).j(A));if(P(A))return C(this.j(C(A)));if(this.l(g)<0&&A.l(g)<0)return u(this.m()*A.m());const y=this.g.length+A.g.length,w=[];for(var E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(let v=0;v<A.g.length;v++){const b=this.i(E)>>>16,_=this.i(E)&65535,U=A.i(v)>>>16,ne=A.i(v)&65535;w[2*E+2*v]+=_*ne,S(w,2*E+2*v),w[2*E+2*v+1]+=b*ne,S(w,2*E+2*v+1),w[2*E+2*v+1]+=_*U,S(w,2*E+2*v+1),w[2*E+2*v+2]+=b*U,S(w,2*E+2*v+2)}for(A=0;A<y;A++)w[A]=w[2*A+1]<<16|w[2*A];for(A=y;A<2*y;A++)w[A]=0;return new o(w,0)};function S(A,y){for(;(A[y]&65535)!=A[y];)A[y+1]+=A[y]>>>16,A[y]&=65535,y++}function x(A,y){this.g=A,this.h=y}function V(A,y){if(T(y))throw Error("division by zero");if(T(A))return new x(d,d);if(P(A))return y=V(C(A),y),new x(C(y.g),C(y.h));if(P(y))return y=V(A,C(y)),new x(C(y.g),y.h);if(A.g.length>30){if(P(A)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var w=p,E=y;E.l(A)<=0;)w=L(w),E=L(E);var v=q(w,1),b=q(E,1);for(E=q(E,2),w=q(w,2);!T(E);){var _=b.add(E);_.l(A)<=0&&(v=v.add(w),b=_),E=q(E,1),w=q(w,1)}return y=D(A,v.j(y)),new x(v,y)}for(v=d;A.l(y)>=0;){for(w=Math.max(1,Math.floor(A.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),b=u(w),_=b.j(y);P(_)||_.l(A)>0;)w-=E,b=u(w),_=b.j(y);T(b)&&(b=p),v=v.add(b),A=D(A,_)}return new x(v,A)}t.B=function(A){return V(this,A).h},t.and=function(A){const y=Math.max(this.g.length,A.g.length),w=[];for(let E=0;E<y;E++)w[E]=this.i(E)&A.i(E);return new o(w,this.h&A.h)},t.or=function(A){const y=Math.max(this.g.length,A.g.length),w=[];for(let E=0;E<y;E++)w[E]=this.i(E)|A.i(E);return new o(w,this.h|A.h)},t.xor=function(A){const y=Math.max(this.g.length,A.g.length),w=[];for(let E=0;E<y;E++)w[E]=this.i(E)^A.i(E);return new o(w,this.h^A.h)};function L(A){const y=A.g.length+1,w=[];for(let E=0;E<y;E++)w[E]=A.i(E)<<1|A.i(E-1)>>>31;return new o(w,A.h)}function q(A,y){const w=y>>5;y%=32;const E=A.g.length-w,v=[];for(let b=0;b<E;b++)v[b]=y>0?A.i(b+w)>>>y|A.i(b+w+1)<<32-y:A.i(b+w);return new o(v,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,pI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,is=o}).apply(typeof gy<"u"?gy:typeof self<"u"?self:typeof window<"u"?window:{});var ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mI,Ea,gI,Pc,yf,_I,yI,vI;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ic=="object"&&ic];for(var f=0;f<c.length;++f){var m=c[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(c,f){if(f)e:{var m=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var M=c[I];if(!(M in m))break e;m=m[M]}c=c[c.length-1],I=m[c],f=f(I),f!=I&&f!=null&&e(m,c,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(f){var m=[],I;for(I in f)Object.prototype.hasOwnProperty.call(f,I)&&m.push([I,f[I]]);return m}});var i=i||{},o=this||self;function a(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function l(c,f,m){return c.call.apply(c.bind,arguments)}function u(c,f,m){return u=l,u.apply(null,arguments)}function h(c,f){var m=Array.prototype.slice.call(arguments,1);return function(){var I=m.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function d(c,f){function m(){}m.prototype=f.prototype,c.Z=f.prototype,c.prototype=new m,c.prototype.constructor=c,c.Ob=function(I,M,B){for(var re=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)re[Se-2]=arguments[Se];return f.prototype[M].apply(I,re)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const f=c.length;if(f>0){const m=Array(f);for(let I=0;I<f;I++)m[I]=c[I];return m}return[]}function T(c,f){for(let I=1;I<arguments.length;I++){const M=arguments[I];var m=typeof M;if(m=m!="object"?m:M?Array.isArray(M)?"array":m:"null",m=="array"||m=="object"&&typeof M.length=="number"){m=c.length||0;const B=M.length||0;c.length=m+B;for(let re=0;re<B;re++)c[m+re]=M[re]}else c.push(M)}}class P{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function C(c){o.setTimeout(()=>{throw c},0)}function D(){var c=A;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class S{constructor(){this.h=this.g=null}add(f,m){const I=x.get();I.set(f,m),this.h?this.h.next=I:this.g=I,this.h=I}}var x=new P(()=>new V,c=>c.reset());class V{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let L,q=!1,A=new S,y=()=>{const c=Promise.resolve(void 0);L=()=>{c.then(w)}};function w(){for(var c;c=D();){try{c.h.call(c.g)}catch(m){C(m)}var f=x;f.j(c),f.h<100&&(f.h++,c.next=f.g,f.g=c)}q=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function v(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}v.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};o.addEventListener("test",m,f),o.removeEventListener("test",m,f)}catch{}return c})();function _(c){return/^[\s\xa0]*$/.test(c)}function U(c,f){v.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,f)}d(U,v),U.prototype.init=function(c,f){const m=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget,f||(m=="mouseover"?f=c.fromElement:m=="mouseout"&&(f=c.toElement)),this.relatedTarget=f,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&U.Z.h.call(this)},U.prototype.h=function(){U.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ne="closure_listenable_"+(Math.random()*1e6|0),ue=0;function ee(c,f,m,I,M){this.listener=c,this.proxy=null,this.src=f,this.type=m,this.capture=!!I,this.ha=M,this.key=++ue,this.da=this.fa=!1}function K(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ye(c,f,m){for(const I in c)f.call(m,c[I],I,c)}function Je(c,f){for(const m in c)f.call(void 0,c[m],m,c)}function Ie(c){const f={};for(const m in c)f[m]=c[m];return f}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Re(c,f){let m,I;for(let M=1;M<arguments.length;M++){I=arguments[M];for(m in I)c[m]=I[m];for(let B=0;B<Q.length;B++)m=Q[B],Object.prototype.hasOwnProperty.call(I,m)&&(c[m]=I[m])}}function Ue(c){this.src=c,this.g={},this.h=0}Ue.prototype.add=function(c,f,m,I,M){const B=c.toString();c=this.g[B],c||(c=this.g[B]=[],this.h++);const re=pe(c,f,I,M);return re>-1?(f=c[re],m||(f.fa=!1)):(f=new ee(f,this.src,B,!!I,M),f.fa=m,c.push(f)),f};function Xe(c,f){const m=f.type;if(m in c.g){var I=c.g[m],M=Array.prototype.indexOf.call(I,f,void 0),B;(B=M>=0)&&Array.prototype.splice.call(I,M,1),B&&(K(f),c.g[m].length==0&&(delete c.g[m],c.h--))}}function pe(c,f,m,I){for(let M=0;M<c.length;++M){const B=c[M];if(!B.da&&B.listener==f&&B.capture==!!m&&B.ha==I)return M}return-1}var F="closure_lm_"+(Math.random()*1e6|0),se={};function oe(c,f,m,I,M){if(Array.isArray(f)){for(let B=0;B<f.length;B++)oe(c,f[B],m,I,M);return null}return m=ae(m),c&&c[ne]?c.J(f,m,a(I)?!!I.capture:!1,M):de(c,f,m,!1,I,M)}function de(c,f,m,I,M,B){if(!f)throw Error("Invalid event type");const re=a(M)?!!M.capture:!!M;let Se=W(c);if(Se||(c[F]=Se=new Ue(c)),m=Se.add(f,m,I,re,B),m.proxy)return m;if(I=ke(),m.proxy=I,I.src=c,I.listener=m,c.addEventListener)b||(M=re),M===void 0&&(M=!1),c.addEventListener(f.toString(),I,M);else if(c.attachEvent)c.attachEvent(N(f.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ke(){function c(m){return f.call(c.src,c.listener,m)}const f=G;return c}function R(c,f,m,I,M){if(Array.isArray(f))for(var B=0;B<f.length;B++)R(c,f[B],m,I,M);else I=a(I)?!!I.capture:!!I,m=ae(m),c&&c[ne]?(c=c.i,B=String(f).toString(),B in c.g&&(f=c.g[B],m=pe(f,m,I,M),m>-1&&(K(f[m]),Array.prototype.splice.call(f,m,1),f.length==0&&(delete c.g[B],c.h--)))):c&&(c=W(c))&&(f=c.g[f.toString()],c=-1,f&&(c=pe(f,m,I,M)),(m=c>-1?f[c]:null)&&k(m))}function k(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[ne])Xe(f.i,c);else{var m=c.type,I=c.proxy;f.removeEventListener?f.removeEventListener(m,I,c.capture):f.detachEvent?f.detachEvent(N(m),I):f.addListener&&f.removeListener&&f.removeListener(I),(m=W(f))?(Xe(m,c),m.h==0&&(m.src=null,f[F]=null)):K(c)}}}function N(c){return c in se?se[c]:se[c]="on"+c}function G(c,f){if(c.da)c=!0;else{f=new U(f,this);const m=c.listener,I=c.ha||c.src;c.fa&&k(c),c=m.call(I,f)}return c}function W(c){return c=c[F],c instanceof Ue?c:null}var H="__closure_events_fn_"+(Math.random()*1e9>>>0);function ae(c){return typeof c=="function"?c:(c[H]||(c[H]=function(f){return c.handleEvent(f)}),c[H])}function Z(){E.call(this),this.i=new Ue(this),this.M=this,this.G=null}d(Z,E),Z.prototype[ne]=!0,Z.prototype.removeEventListener=function(c,f,m,I){R(this,c,f,m,I)};function X(c,f){var m,I=c.G;if(I)for(m=[];I;I=I.G)m.push(I);if(c=c.M,I=f.type||f,typeof f=="string")f=new v(f,c);else if(f instanceof v)f.target=f.target||c;else{var M=f;f=new v(I,c),Re(f,M)}M=!0;let B,re;if(m)for(re=m.length-1;re>=0;re--)B=f.g=m[re],M=J(B,I,!0,f)&&M;if(B=f.g=c,M=J(B,I,!0,f)&&M,M=J(B,I,!1,f)&&M,m)for(re=0;re<m.length;re++)B=f.g=m[re],M=J(B,I,!1,f)&&M}Z.prototype.N=function(){if(Z.Z.N.call(this),this.i){var c=this.i;for(const f in c.g){const m=c.g[f];for(let I=0;I<m.length;I++)K(m[I]);delete c.g[f],c.h--}}this.G=null},Z.prototype.J=function(c,f,m,I){return this.i.add(String(c),f,!1,m,I)},Z.prototype.K=function(c,f,m,I){return this.i.add(String(c),f,!0,m,I)};function J(c,f,m,I){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();let M=!0;for(let B=0;B<f.length;++B){const re=f[B];if(re&&!re.da&&re.capture==m){const Se=re.listener,yt=re.ha||re.src;re.fa&&Xe(c.i,re),M=Se.call(yt,I)!==!1&&M}}return M&&!I.defaultPrevented}function ve(c,f){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(c,f||0)}function le(c){c.g=ve(()=>{c.g=null,c.i&&(c.i=!1,le(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class ge extends E{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:le(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ee(c){E.call(this),this.h=c,this.g={}}d(Ee,E);var Pe=[];function Be(c){ye(c.g,function(f,m){this.g.hasOwnProperty(m)&&k(f)},c),c.g={}}Ee.prototype.N=function(){Ee.Z.N.call(this),Be(this)},Ee.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oe=o.JSON.stringify,Dt=o.JSON.parse,Nt=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function rn(){}function sn(){}var An={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Si(){v.call(this,"d")}d(Si,v);function Ct(){v.call(this,"c")}d(Ct,v);var Tt={},$o=null;function Is(){return $o=$o||new Z}Tt.Ia="serverreachability";function qm(c){v.call(this,Tt.Ia,c)}d(qm,v);function jo(c){const f=Is();X(f,new qm(f))}Tt.STAT_EVENT="statevent";function $m(c,f){v.call(this,Tt.STAT_EVENT,c),this.stat=f}d($m,v);function Ht(c){const f=Is();X(f,new $m(f,c))}Tt.Ja="timingevent";function jm(c,f){v.call(this,Tt.Ja,c),this.size=f}d(jm,v);function zo(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},f)}function Ko(){this.g=!0}Ko.prototype.ua=function(){this.g=!1};function $S(c,f,m,I,M,B){c.info(function(){if(c.g)if(B){var re="",Se=B.split("&");for(let Ke=0;Ke<Se.length;Ke++){var yt=Se[Ke].split("=");if(yt.length>1){const At=yt[0];yt=yt[1];const Ln=At.split("_");re=Ln.length>=2&&Ln[1]=="type"?re+(At+"="+yt+"&"):re+(At+"=redacted&")}}}else re=null;else re=B;return"XMLHTTP REQ ("+I+") [attempt "+M+"]: "+f+`
`+m+`
`+re})}function jS(c,f,m,I,M,B,re){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+M+"]: "+f+`
`+m+`
`+B+" "+re})}function Ri(c,f,m,I){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+KS(c,m)+(I?" "+I:"")})}function zS(c,f){c.info(function(){return"TIMEOUT: "+f})}Ko.prototype.info=function(){};function KS(c,f){if(!c.g)return f;if(!f)return null;try{const B=JSON.parse(f);if(B){for(c=0;c<B.length;c++)if(Array.isArray(B[c])){var m=B[c];if(!(m.length<2)){var I=m[1];if(Array.isArray(I)&&!(I.length<1)){var M=I[0];if(M!="noop"&&M!="stop"&&M!="close")for(let re=1;re<I.length;re++)I[re]=""}}}}return Oe(B)}catch{return f}}var $l={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zm={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Km;function Vh(){}d(Vh,rn),Vh.prototype.g=function(){return new XMLHttpRequest},Km=new Vh;function Ho(c){return encodeURIComponent(String(c))}function HS(c){var f=1;c=c.split(":");const m=[];for(;f>0&&c.length;)m.push(c.shift()),f--;return c.length&&m.push(c.join(":")),m}function Cr(c,f,m,I){this.j=c,this.i=f,this.l=m,this.S=I||1,this.V=new Ee(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hm}function Hm(){this.i=null,this.g="",this.h=!1}var Gm={},Dh={};function Nh(c,f,m){c.M=1,c.A=zl(Mn(f)),c.u=m,c.R=!0,Wm(c,null)}function Wm(c,f){c.F=Date.now(),jl(c),c.B=Mn(c.A);var m=c.B,I=c.S;Array.isArray(I)||(I=[String(I)]),ag(m.i,"t",I),c.C=0,m=c.j.L,c.h=new Hm,c.g=Ag(c.j,m?f:null,!c.u),c.P>0&&(c.O=new ge(u(c.Y,c,c.g),c.P)),f=c.V,m=c.g,I=c.ba;var M="readystatechange";Array.isArray(M)||(M&&(Pe[0]=M.toString()),M=Pe);for(let B=0;B<M.length;B++){const re=oe(m,M[B],I||f.handleEvent,!1,f.h||f);if(!re)break;f.g[re.key]=re}f=c.J?Ie(c.J):{},c.u?(c.v||(c.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,f)):(c.v="GET",c.g.ea(c.B,c.v,null,f)),jo(),$S(c.i,c.v,c.B,c.l,c.S,c.u)}Cr.prototype.ba=function(c){c=c.target;const f=this.O;f&&xr(c)==3?f.j():this.Y(c)},Cr.prototype.Y=function(c){try{if(c==this.g)e:{const Se=xr(this.g),yt=this.g.ya(),Ke=this.g.ca();if(!(Se<3)&&(Se!=3||this.g&&(this.h.h||this.g.la()||pg(this.g)))){this.K||Se!=4||yt==7||(yt==8||Ke<=0?jo(3):jo(2)),Oh(this);var f=this.g.ca();this.X=f;var m=GS(this);if(this.o=f==200,jS(this.i,this.v,this.B,this.l,this.S,Se,f),this.o){if(this.U&&!this.L){t:{if(this.g){var I,M=this.g;if((I=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(I)){var B=I;break t}}B=null}if(c=B)Ri(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mh(this,c);else{this.o=!1,this.m=3,Ht(12),Ts(this),Go(this);break e}}if(this.R){c=!0;let At;for(;!this.K&&this.C<m.length;)if(At=WS(this,m),At==Dh){Se==4&&(this.m=4,Ht(14),c=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Gm){this.m=4,Ht(15),Ri(this.i,this.l,m,"[Invalid Chunk]"),c=!1;break}else Ri(this.i,this.l,At,null),Mh(this,At);if(Qm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Se!=4||m.length!=0||this.h.h||(this.m=1,Ht(16),c=!1),this.o=this.o&&c,!c)Ri(this.i,this.l,m,"[Invalid Chunked Response]"),Ts(this),Go(this);else if(m.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+m.length),zh(re),re.P=!0,Ht(11))}}else Ri(this.i,this.l,m,null),Mh(this,m);Se==4&&Ts(this),this.o&&!this.K&&(Se==4?wg(this.j,this):(this.o=!1,jl(this)))}else l0(this.g),f==400&&m.indexOf("Unknown SID")>0?(this.m=3,Ht(12)):(this.m=0,Ht(13)),Ts(this),Go(this)}}}catch{}finally{}};function GS(c){if(!Qm(c))return c.g.la();const f=pg(c.g);if(f==="")return"";let m="";const I=f.length,M=xr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Ts(c),Go(c),"";c.h.i=new o.TextDecoder}for(let B=0;B<I;B++)c.h.h=!0,m+=c.h.i.decode(f[B],{stream:!(M&&B==I-1)});return f.length=0,c.h.g+=m,c.C=0,c.h.g}function Qm(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function WS(c,f){var m=c.C,I=f.indexOf(`
`,m);return I==-1?Dh:(m=Number(f.substring(m,I)),isNaN(m)?Gm:(I+=1,I+m>f.length?Dh:(f=f.slice(I,I+m),c.C=I+m,f)))}Cr.prototype.cancel=function(){this.K=!0,Ts(this)};function jl(c){c.T=Date.now()+c.H,Jm(c,c.H)}function Jm(c,f){if(c.D!=null)throw Error("WatchDog timer not null");c.D=zo(u(c.aa,c),f)}function Oh(c){c.D&&(o.clearTimeout(c.D),c.D=null)}Cr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(zS(this.i,this.B),this.M!=2&&(jo(),Ht(17)),Ts(this),this.m=2,Go(this)):Jm(this,this.T-c)};function Go(c){c.j.I==0||c.K||wg(c.j,c)}function Ts(c){Oh(c);var f=c.O;f&&typeof f.dispose=="function"&&f.dispose(),c.O=null,Be(c.V),c.g&&(f=c.g,c.g=null,f.abort(),f.dispose())}function Mh(c,f){try{var m=c.j;if(m.I!=0&&(m.g==c||Lh(m.h,c))){if(!c.L&&Lh(m.h,c)&&m.I==3){try{var I=m.Ba.g.parse(f)}catch{I=null}if(Array.isArray(I)&&I.length==3){var M=I;if(M[0]==0){e:if(!m.v){if(m.g)if(m.g.F+3e3<c.F)Ql(m),Gl(m);else break e;jh(m),Ht(18)}}else m.xa=M[1],0<m.xa-m.K&&M[2]<37500&&m.F&&m.A==0&&!m.C&&(m.C=zo(u(m.Va,m),6e3));Zm(m.h)<=1&&m.ta&&(m.ta=void 0)}else Ss(m,11)}else if((c.L||m.g==c)&&Ql(m),!_(f))for(M=m.Ba.g.parse(f),f=0;f<M.length;f++){let Ke=M[f];const At=Ke[0];if(!(At<=m.K))if(m.K=At,Ke=Ke[1],m.I==2)if(Ke[0]=="c"){m.M=Ke[1],m.ba=Ke[2];const Ln=Ke[3];Ln!=null&&(m.ka=Ln,m.j.info("VER="+m.ka));const Rs=Ke[4];Rs!=null&&(m.za=Rs,m.j.info("SVER="+m.za));const Vr=Ke[5];Vr!=null&&typeof Vr=="number"&&Vr>0&&(I=1.5*Vr,m.O=I,m.j.info("backChannelRequestTimeoutMs_="+I)),I=m;const Dr=c.g;if(Dr){const Yl=Dr.g?Dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yl){var B=I.h;B.g||Yl.indexOf("spdy")==-1&&Yl.indexOf("quic")==-1&&Yl.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Fh(B,B.h),B.h=null))}if(I.G){const Kh=Dr.g?Dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Kh&&(I.wa=Kh,Ye(I.J,I.G,Kh))}}m.I=3,m.l&&m.l.ra(),m.aa&&(m.T=Date.now()-c.F,m.j.info("Handshake RTT: "+m.T+"ms")),I=m;var re=c;if(I.na=Tg(I,I.L?I.ba:null,I.W),re.L){eg(I.h,re);var Se=re,yt=I.O;yt&&(Se.H=yt),Se.D&&(Oh(Se),jl(Se)),I.g=re}else vg(I);m.i.length>0&&Wl(m)}else Ke[0]!="stop"&&Ke[0]!="close"||Ss(m,7);else m.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Ss(m,7):$h(m):Ke[0]!="noop"&&m.l&&m.l.qa(Ke),m.A=0)}}jo(4)}catch{}}var QS=class{constructor(c,f){this.g=c,this.map=f}};function Ym(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xm(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Zm(c){return c.h?1:c.g?c.g.size:0}function Lh(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Fh(c,f){c.g?c.g.add(f):c.h=f}function eg(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Ym.prototype.cancel=function(){if(this.i=tg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function tg(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const m of c.g.values())f=f.concat(m.G);return f}return g(c.i)}var ng=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function JS(c,f){if(c){c=c.split("&");for(let m=0;m<c.length;m++){const I=c[m].indexOf("=");let M,B=null;I>=0?(M=c[m].substring(0,I),B=c[m].substring(I+1)):M=c[m],f(M,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Pr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;c instanceof Pr?(this.l=c.l,Wo(this,c.j),this.o=c.o,this.g=c.g,Qo(this,c.u),this.h=c.h,Uh(this,lg(c.i)),this.m=c.m):c&&(f=String(c).match(ng))?(this.l=!1,Wo(this,f[1]||"",!0),this.o=Jo(f[2]||""),this.g=Jo(f[3]||"",!0),Qo(this,f[4]),this.h=Jo(f[5]||"",!0),Uh(this,f[6]||"",!0),this.m=Jo(f[7]||"")):(this.l=!1,this.i=new Xo(null,this.l))}Pr.prototype.toString=function(){const c=[];var f=this.j;f&&c.push(Yo(f,rg,!0),":");var m=this.g;return(m||f=="file")&&(c.push("//"),(f=this.o)&&c.push(Yo(f,rg,!0),"@"),c.push(Ho(m).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.u,m!=null&&c.push(":",String(m))),(m=this.h)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(Yo(m,m.charAt(0)=="/"?ZS:XS,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",Yo(m,t0)),c.join("")},Pr.prototype.resolve=function(c){const f=Mn(this);let m=!!c.j;m?Wo(f,c.j):m=!!c.o,m?f.o=c.o:m=!!c.g,m?f.g=c.g:m=c.u!=null;var I=c.h;if(m)Qo(f,c.u);else if(m=!!c.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var M=f.h.lastIndexOf("/");M!=-1&&(I=f.h.slice(0,M+1)+I)}if(M=I,M==".."||M==".")I="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){I=M.lastIndexOf("/",0)==0,M=M.split("/");const B=[];for(let re=0;re<M.length;){const Se=M[re++];Se=="."?I&&re==M.length&&B.push(""):Se==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),I&&re==M.length&&B.push("")):(B.push(Se),I=!0)}I=B.join("/")}else I=M}return m?f.h=I:m=c.i.toString()!=="",m?Uh(f,lg(c.i)):m=!!c.m,m&&(f.m=c.m),f};function Mn(c){return new Pr(c)}function Wo(c,f,m){c.j=m?Jo(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Qo(c,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);c.u=f}else c.u=null}function Uh(c,f,m){f instanceof Xo?(c.i=f,n0(c.i,c.l)):(m||(f=Yo(f,e0)),c.i=new Xo(f,c.l))}function Ye(c,f,m){c.i.set(f,m)}function zl(c){return Ye(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Jo(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Yo(c,f,m){return typeof c=="string"?(c=encodeURI(c).replace(f,YS),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function YS(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var rg=/[#\/\?@]/g,XS=/[#\?:]/g,ZS=/[#\?]/g,e0=/[#\?@]/g,t0=/#/g;function Xo(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function As(c){c.g||(c.g=new Map,c.h=0,c.i&&JS(c.i,function(f,m){c.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Xo.prototype,t.add=function(c,f){As(this),this.i=null,c=Ci(this,c);let m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(f),this.h+=1,this};function sg(c,f){As(c),f=Ci(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function ig(c,f){return As(c),f=Ci(c,f),c.g.has(f)}t.forEach=function(c,f){As(this),this.g.forEach(function(m,I){m.forEach(function(M){c.call(f,M,I,this)},this)},this)};function og(c,f){As(c);let m=[];if(typeof f=="string")ig(c,f)&&(m=m.concat(c.g.get(Ci(c,f))));else for(c=Array.from(c.g.values()),f=0;f<c.length;f++)m=m.concat(c[f]);return m}t.set=function(c,f){return As(this),this.i=null,c=Ci(this,c),ig(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=og(this,c),c.length>0?String(c[0]):f):f};function ag(c,f,m){sg(c,f),m.length>0&&(c.i=null,c.g.set(Ci(c,f),g(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(let I=0;I<f.length;I++){var m=f[I];const M=Ho(m);m=og(this,m);for(let B=0;B<m.length;B++){let re=M;m[B]!==""&&(re+="="+Ho(m[B])),c.push(re)}}return this.i=c.join("&")};function lg(c){const f=new Xo;return f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),f}function Ci(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function n0(c,f){f&&!c.j&&(As(c),c.i=null,c.g.forEach(function(m,I){const M=I.toLowerCase();I!=M&&(sg(this,I),ag(this,M,m))},c)),c.j=f}function r0(c,f){const m=new Ko;if(o.Image){const I=new Image;I.onload=h(kr,m,"TestLoadImage: loaded",!0,f,I),I.onerror=h(kr,m,"TestLoadImage: error",!1,f,I),I.onabort=h(kr,m,"TestLoadImage: abort",!1,f,I),I.ontimeout=h(kr,m,"TestLoadImage: timeout",!1,f,I),o.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else f(!1)}function s0(c,f){const m=new Ko,I=new AbortController,M=setTimeout(()=>{I.abort(),kr(m,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:I.signal}).then(B=>{clearTimeout(M),B.ok?kr(m,"TestPingServer: ok",!0,f):kr(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),kr(m,"TestPingServer: error",!1,f)})}function kr(c,f,m,I,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),I(m)}catch{}}function i0(){this.g=new Nt}function Bh(c){this.i=c.Sb||null,this.h=c.ab||!1}d(Bh,rn),Bh.prototype.g=function(){return new Kl(this.i,this.h)};function Kl(c,f){Z.call(this),this.H=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(Kl,Z),t=Kl.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=f,this.readyState=1,ea(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(f.body=c),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zo(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cg(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function cg(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Zo(this):ea(this),this.readyState==3&&cg(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Zo(this))},t.Na=function(c){this.g&&(this.response=c,Zo(this))},t.ga=function(){this.g&&Zo(this)};function Zo(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ea(c)}t.setRequestHeader=function(c,f){this.A.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=f.next();return c.join(`\r
`)};function ea(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Kl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ug(c){let f="";return ye(c,function(m,I){f+=I,f+=":",f+=m,f+=`\r
`}),f}function qh(c,f,m){e:{for(I in m){var I=!1;break e}I=!0}I||(m=ug(m),typeof c=="string"?m!=null&&Ho(m):Ye(c,f,m))}function st(c){Z.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(st,Z);var o0=/^https?$/i,a0=["POST","PUT"];t=st.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,f,m,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Km.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(B){hg(this,B);return}if(c=m||"",m=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var M in I)m.set(M,I[M]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const B of I.keys())m.set(B,I.get(B));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(m.keys()).find(B=>B.toLowerCase()=="content-type"),M=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(a0,f,void 0)>=0)||I||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,re]of m)this.g.setRequestHeader(B,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(B){hg(this,B)}};function hg(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.o=5,dg(c),Hl(c)}function dg(c){c.A||(c.A=!0,X(c,"complete"),X(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,X(this,"complete"),X(this,"abort"),Hl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hl(this,!0)),st.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?fg(this):this.Xa())},t.Xa=function(){fg(this)};function fg(c){if(c.h&&typeof i<"u"){if(c.v&&xr(c)==4)setTimeout(c.Ca.bind(c),0);else if(X(c,"readystatechange"),xr(c)==4){c.h=!1;try{const B=c.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var I;if(I=B===0){let re=String(c.D).match(ng)[1]||null;!re&&o.self&&o.self.location&&(re=o.self.location.protocol.slice(0,-1)),I=!o0.test(re?re.toLowerCase():"")}m=I}if(m)X(c,"complete"),X(c,"success");else{c.o=6;try{var M=xr(c)>2?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.ca()+"]",dg(c)}}finally{Hl(c)}}}}function Hl(c,f){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const m=c.g;c.g=null,f||X(c,"ready");try{m.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function xr(c){return c.g?c.g.readyState:0}t.ca=function(){try{return xr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),Dt(f)}};function pg(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function l0(c){const f={};c=(c.g&&xr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(_(c[I]))continue;var m=HS(c[I]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const B=f[M]||[];f[M]=B,B.push(m)}Je(f,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ta(c,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||f}function mg(c){this.za=0,this.i=[],this.j=new Ko,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ta("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ta("baseRetryDelayMs",5e3,c),this.Za=ta("retryDelaySeedMs",1e4,c),this.Ta=ta("forwardChannelMaxRetries",2,c),this.va=ta("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Ym(c&&c.concurrentRequestLimit),this.Ba=new i0,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=mg.prototype,t.ka=8,t.I=1,t.connect=function(c,f,m,I){Ht(0),this.W=c,this.H=f||{},m&&I!==void 0&&(this.H.OSID=m,this.H.OAID=I),this.F=this.X,this.J=Tg(this,null,this.W),Wl(this)};function $h(c){if(gg(c),c.I==3){var f=c.V++,m=Mn(c.J);if(Ye(m,"SID",c.M),Ye(m,"RID",f),Ye(m,"TYPE","terminate"),na(c,m),f=new Cr(c,c.j,f),f.M=2,f.A=zl(Mn(m)),m=!1,o.navigator&&o.navigator.sendBeacon)try{m=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!m&&o.Image&&(new Image().src=f.A,m=!0),m||(f.g=Ag(f.j,null),f.g.ea(f.A)),f.F=Date.now(),jl(f)}Ig(c)}function Gl(c){c.g&&(zh(c),c.g.cancel(),c.g=null)}function gg(c){Gl(c),c.v&&(o.clearTimeout(c.v),c.v=null),Ql(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Wl(c){if(!Xm(c.h)&&!c.m){c.m=!0;var f=c.Ea;L||y(),q||(L(),q=!0),A.add(f,c),c.D=0}}function c0(c,f){return Zm(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=f.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=zo(u(c.Ea,c,f),bg(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const M=new Cr(this,this.j,c);let B=this.o;if(this.U&&(B?(B=Ie(B),Re(B,this.U)):B=this.U),this.u!==null||this.R||(M.J=B,B=null),this.S)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var I=this.i[m];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(f+=I,f>4096){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=yg(this,M,f),m=Mn(this.J),Ye(m,"RID",c),Ye(m,"CVER",22),this.G&&Ye(m,"X-HTTP-Session-Id",this.G),na(this,m),B&&(this.R?f="headers="+Ho(ug(B))+"&"+f:this.u&&qh(m,this.u,B)),Fh(this.h,M),this.Ra&&Ye(m,"TYPE","init"),this.S?(Ye(m,"$req",f),Ye(m,"SID","null"),M.U=!0,Nh(M,m,null)):Nh(M,m,f),this.I=2}}else this.I==3&&(c?_g(this,c):this.i.length==0||Xm(this.h)||_g(this))};function _g(c,f){var m;f?m=f.l:m=c.V++;const I=Mn(c.J);Ye(I,"SID",c.M),Ye(I,"RID",m),Ye(I,"AID",c.K),na(c,I),c.u&&c.o&&qh(I,c.u,c.o),m=new Cr(c,c.j,m,c.D+1),c.u===null&&(m.J=c.o),f&&(c.i=f.G.concat(c.i)),f=yg(c,m,1e3),m.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Fh(c.h,m),Nh(m,I,f)}function na(c,f){c.H&&ye(c.H,function(m,I){Ye(f,I,m)}),c.l&&ye({},function(m,I){Ye(f,I,m)})}function yg(c,f,m){m=Math.min(c.i.length,m);const I=c.l?u(c.l.Ka,c.l,c):null;e:{var M=c.i;let Se=-1;for(;;){const yt=["count="+m];Se==-1?m>0?(Se=M[0].g,yt.push("ofs="+Se)):Se=0:yt.push("ofs="+Se);let Ke=!0;for(let At=0;At<m;At++){var B=M[At].g;const Ln=M[At].map;if(B-=Se,B<0)Se=Math.max(0,M[At].g-100),Ke=!1;else try{B="req"+B+"_"||"";try{var re=Ln instanceof Map?Ln:Object.entries(Ln);for(const[Rs,Vr]of re){let Dr=Vr;a(Vr)&&(Dr=Oe(Vr)),yt.push(B+Rs+"="+encodeURIComponent(Dr))}}catch(Rs){throw yt.push(B+"type="+encodeURIComponent("_badmap")),Rs}}catch{I&&I(Ln)}}if(Ke){re=yt.join("&");break e}}re=void 0}return c=c.i.splice(0,m),f.G=c,re}function vg(c){if(!c.g&&!c.v){c.Y=1;var f=c.Da;L||y(),q||(L(),q=!0),A.add(f,c),c.A=0}}function jh(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=zo(u(c.Da,c),bg(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Eg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=zo(u(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ht(10),Gl(this),Eg(this))};function zh(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function Eg(c){c.g=new Cr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var f=Mn(c.na);Ye(f,"RID","rpc"),Ye(f,"SID",c.M),Ye(f,"AID",c.K),Ye(f,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ye(f,"TO",c.ia),Ye(f,"TYPE","xmlhttp"),na(c,f),c.u&&c.o&&qh(f,c.u,c.o),c.O&&(c.g.H=c.O);var m=c.g;c=c.ba,m.M=1,m.A=zl(Mn(f)),m.u=null,m.R=!0,Wm(m,c)}t.Va=function(){this.C!=null&&(this.C=null,Gl(this),jh(this),Ht(19))};function Ql(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function wg(c,f){var m=null;if(c.g==f){Ql(c),zh(c),c.g=null;var I=2}else if(Lh(c.h,f))m=f.G,eg(c.h,f),I=1;else return;if(c.I!=0){if(f.o)if(I==1){m=f.u?f.u.length:0,f=Date.now()-f.F;var M=c.D;I=Is(),X(I,new jm(I,m)),Wl(c)}else vg(c);else if(M=f.m,M==3||M==0&&f.X>0||!(I==1&&c0(c,f)||I==2&&jh(c)))switch(m&&m.length>0&&(f=c.h,f.i=f.i.concat(m)),M){case 1:Ss(c,5);break;case 4:Ss(c,10);break;case 3:Ss(c,6);break;default:Ss(c,2)}}}function bg(c,f){let m=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(m*=2),m*f}function Ss(c,f){if(c.j.info("Error code "+f),f==2){var m=u(c.bb,c),I=c.Ua;const M=!I;I=new Pr(I||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Wo(I,"https"),zl(I),M?r0(I.toString(),m):s0(I.toString(),m)}else Ht(2);c.I=0,c.l&&c.l.pa(f),Ig(c),gg(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function Ig(c){if(c.I=0,c.ja=[],c.l){const f=tg(c.h);(f.length!=0||c.i.length!=0)&&(T(c.ja,f),T(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function Tg(c,f,m){var I=m instanceof Pr?Mn(m):new Pr(m);if(I.g!="")f&&(I.g=f+"."+I.g),Qo(I,I.u);else{var M=o.location;I=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;const B=new Pr(null);I&&Wo(B,I),f&&(B.g=f),M&&Qo(B,M),m&&(B.h=m),I=B}return m=c.G,f=c.wa,m&&f&&Ye(I,m,f),Ye(I,"VER",c.ka),na(c,I),I}function Ag(c,f,m){if(f&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Aa&&!c.ma?new st(new Bh({ab:m})):new st(c.ma),f.Fa(c.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sg(){}t=Sg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Jl(){}Jl.prototype.g=function(c,f){return new on(c,f)};function on(c,f){Z.call(this),this.g=new mg(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(c?c["X-WebChannel-Client-Profile"]=f.sa:c={"X-WebChannel-Client-Profile":f.sa}),this.g.U=c,(c=f&&f.Qb)&&!_(c)&&(this.g.u=c),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!_(f)&&(this.g.G=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Pi(this)}d(on,Z),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){$h(this.g)},on.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.v&&(m={},m.__data__=Oe(c),c=m);f.i.push(new QS(f.Ya++,c)),f.I==3&&Wl(f)},on.prototype.N=function(){this.g.l=null,delete this.j,$h(this.g),delete this.g,on.Z.N.call(this)};function Rg(c){Si.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const m in f){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}d(Rg,Si);function Cg(){Ct.call(this),this.status=1}d(Cg,Ct);function Pi(c){this.g=c}d(Pi,Sg),Pi.prototype.ra=function(){X(this.g,"a")},Pi.prototype.qa=function(c){X(this.g,new Rg(c))},Pi.prototype.pa=function(c){X(this.g,new Cg)},Pi.prototype.oa=function(){X(this.g,"b")},Jl.prototype.createWebChannel=Jl.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,vI=function(){return new Jl},yI=function(){return Is()},_I=Tt,yf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$l.NO_ERROR=0,$l.TIMEOUT=8,$l.HTTP_ERROR=6,Pc=$l,zm.COMPLETE="complete",gI=zm,sn.EventType=An,An.OPEN="a",An.CLOSE="b",An.ERROR="c",An.MESSAGE="d",Z.prototype.listen=Z.prototype.J,Ea=sn,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,mI=st}).apply(typeof ic<"u"?ic:typeof self<"u"?self:typeof window<"u"?window:{});const _y="@firebase/firestore",yy="4.9.2";class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");let Mo="12.3.0";const li=new Rp("@firebase/firestore");function zi(){return li.logLevel}function Y(t,...e){if(li.logLevel<=xe.DEBUG){const n=e.map(Lp);li.debug(`Firestore (${Mo}): ${t}`,...n)}}function ct(t,...e){if(li.logLevel<=xe.ERROR){const n=e.map(Lp);li.error(`Firestore (${Mo}): ${t}`,...n)}}function al(t,...e){if(li.logLevel<=xe.WARN){const n=e.map(Lp);li.warn(`Firestore (${Mo}): ${t}`,...n)}}function Lp(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ce(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,EI(t,r,n)}function EI(t,e,n){let r=`FIRESTORE (${Mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ct(r),new Error(r)}function fe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||EI(e,s,r)}function he(t,e){return t}const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yn{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class MD{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ft.UNAUTHENTICATED)))}shutdown(){}}class FD{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Yn,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},a=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Yn)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new MD(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class UD{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new UD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new vy(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function $D(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Fp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=$D(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function be(t,e){return t<e?-1:t>e?1:0}function vf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return yd(s)===yd(i)?be(s,i):yd(s)?1:-1}return be(t.length,e.length)}const jD=55296,zD=57343;function yd(t){const e=t.charCodeAt(0);return e>=jD&&e<=zD}function po(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}function wI(t){return t+"\0"}const Ey="__name__";class Bn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ce(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ce(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Bn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Bn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return be(e.length,n.length)}static compareSegments(e,n){const r=Bn.isNumericId(e),s=Bn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Bn.extractNumericId(e).compare(Bn.extractNumericId(n)):vf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return is.fromString(e.substring(4,e.length-2))}}class Me extends Bn{construct(e,n,r){return new Me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new te(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Me(n)}static emptyPath(){return new Me([])}}const KD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends Bn{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return KD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ey}static keyField(){return new nt([Ey])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new te(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new te(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new te(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Me.fromString(e))}static fromName(e){return new ie(Me.fromString(e).popFirst(5))}static empty(){return new ie(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Me(e.slice()))}}function bI(t,e,n){if(!n)throw new te(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HD(t,e,n,r){if(e===!0&&r===!0)throw new te(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wy(t){if(!ie.isDocumentKey(t))throw new te(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function by(t){if(ie.isDocumentKey(t))throw new te(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function II(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function rh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce(12329,{type:typeof t})}function tr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rh(t);throw new te(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function _t(t,e){const n={typeString:t};return e&&(n.value=e),n}function Vl(t,e){if(!II(t))throw new te(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new te(z.INVALID_ARGUMENT,n);return!0}const Iy=-62135596800,Ty=1e6;class qe{static now(){return qe.fromMillis(Date.now())}static fromDate(e){return qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ty);return new qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Iy)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ty}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vl(e,qe._jsonSchema))return new qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Iy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:_t("string",qe._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new qe(0,0))}static max(){return new me(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const mo=-1;class gu{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Ef(t){return t.fields.find((e=>e.kind===2))}function Ms(t){return t.fields.filter((e=>e.kind!==2))}gu.UNKNOWN_ID=-1;class kc{constructor(e,n){this.fieldPath=e,this.kind=n}}class ll{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ll(0,mn.min())}}function TI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=me.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new mn(s,ie.empty(),e)}function AI(t){return new mn(t.readTime,t.key,mo)}class mn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mn(me.min(),ie.empty(),mo)}static max(){return new mn(me.max(),ie.empty(),mo)}}function Up(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}const SI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function vs(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==SI)throw t;Y("LocalStore","Unexpectedly lost primary lease")}class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):O.reject(n)}static resolve(e){return new O(((n,r)=>{n(e)}))}static reject(e){return new O(((n,r)=>{r(e)}))}static waitFor(e){return new O(((n,r)=>{let s=0,i=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next((s=>s?O.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new O(((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((h=>{o[u]=h,++a,a===i&&r(o)}),(h=>s(h)))}}))}static doWhile(e,n){return new O(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}const an="SimpleDb";class sh{static open(e,n,r,s){try{return new sh(n,e.transaction(s,r))}catch(i){throw new Ua(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Yn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Ua(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Bp(r.target.error);this.S.reject(new Ua(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Y(an,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new WD(n)}}class os{static delete(e){return Y(an,"Removing database:",e),Us(vb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Rb())return!1;if(os.F())return!0;const e=bt(),n=os.M(e),r=0<n&&n<10,s=CI(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,os.M(bt())===12.2&&ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Y(an,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Ua(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new te(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new te(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ua(e,o))},s.onupgradeneeded=i=>{Y(an,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next((()=>{Y(an,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=sh.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next((u=>(a.C(),u))).catch((u=>(a.abort(u),O.reject(u)))).toPromise();return l.catch((()=>{})),await a.D,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(Y(an,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function CI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class GD{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Us(this.U.delete())}}class Ua extends te{constructor(e,n){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Es(t){return t.name==="IndexedDbTransactionError"}class WD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Y(an,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Y(an,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Us(r)}add(e){return Y(an,"ADD",this.store.name,e,e),Us(this.store.add(e))}get(e){return Us(this.store.get(e)).next((n=>(n===void 0&&(n=null),Y(an,"GET",this.store.name,e,n),n)))}delete(e){return Y(an,"DELETE",this.store.name,e),Us(this.store.delete(e))}count(){return Y(an,"COUNT",this.store.name),Us(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new O(((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}}))}{const i=this.cursor(r),o=[];return this.H(i,((a,l)=>{o.push(l)})).next((()=>o))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O(((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}}))}Z(e,n){Y(an,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,((i,o,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new O(((r,s)=>{n.onerror=i=>{const o=Bp(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}H(e,n){const r=[];return new O(((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new GD(a),u=n(a.primaryKey,a.value,l);if(u instanceof O){const h=u.catch((d=>(l.done(),O.reject(d))));r.push(h)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}})).next((()=>O.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Us(t){return new O(((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Bp(r.target.error);n(s)}}))}let Ay=!1;function Bp(t){const e=os.M(bt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ay||(Ay=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Ba="IndexBackfiller";class QD{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Y(Ba,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();Y(Ba,`Documents written: ${n}`)}catch(n){Es(n)?Y(Ba,"Ignoring IndexedDB error during index backfill: ",n):await vs(n)}await this.re(6e4)}))}}class JD{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let s=n,i=!0;return O.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return Y(Ba,`Processing collection: ${o}`),this.oe(e,o,s).next((a=>{s-=a,r.add(o)}));i=!1})))).next((()=>n-s))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(s,i))).next((a=>(Y(Ba,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((s,i)=>{const o=AI(i);Up(o,r)>0&&(r=o)})),new mn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class tn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}tn.ce=-1;const Ys=-1;function ih(t){return t==null}function cl(t){return t===0&&1/t==-1/0}function PI(t){return typeof t=="number"&&Number.isInteger(t)&&!cl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const _u="";function Kt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Sy(e)),e=YD(t.get(n),e);return Sy(e)}function YD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case _u:n+="";break;default:n+=i}}return n}function Sy(t){return t+_u+""}function zn(t){const e=t.length;if(fe(e>=2,64408,{path:t}),e===2)return fe(t.charAt(0)===_u&&t.charAt(1)==="",56145,{path:t}),Me.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(_u,i);switch((o<0||o>n)&&ce(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ce(61167,{path:t})}i=o+2}return new Me(r)}const Ls="remoteDocuments",Dl="owner",Vi="owner",ul="mutationQueues",XD="userId",Rn="mutations",Ry="batchId",zs="userMutationsIndex",Cy=["userId","batchId"];function xc(t,e){return[t,Kt(e)]}function kI(t,e,n){return[t,Kt(e),n]}const ZD={},go="documentMutations",yu="remoteDocumentsV14",eN=["prefixPath","collectionGroup","readTime","documentId"],Vc="documentKeyIndex",tN=["prefixPath","collectionGroup","documentId"],xI="collectionGroupIndex",nN=["collectionGroup","readTime","prefixPath","documentId"],hl="remoteDocumentGlobal",wf="remoteDocumentGlobalKey",_o="targets",VI="queryTargetsIndex",rN=["canonicalId","targetId"],yo="targetDocuments",sN=["targetId","path"],qp="documentTargetsIndex",iN=["path","targetId"],vu="targetGlobalKey",Xs="targetGlobal",dl="collectionParents",oN=["collectionId","parent"],vo="clientMetadata",aN="clientId",oh="bundles",lN="bundleId",ah="namedQueries",cN="name",$p="indexConfiguration",uN="indexId",bf="collectionGroupIndex",hN="collectionGroup",qa="indexState",dN=["indexId","uid"],DI="sequenceNumberIndex",fN=["uid","sequenceNumber"],$a="indexEntries",pN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],NI="documentKeyIndex",mN=["indexId","uid","orderedDocumentKey"],lh="documentOverlays",gN=["userId","collectionPath","documentId"],If="collectionPathOverlayIndex",_N=["userId","collectionPath","largestBatchId"],OI="collectionGroupOverlayIndex",yN=["userId","collectionGroup","largestBatchId"],jp="globals",vN="name",MI=[ul,Rn,go,Ls,_o,Dl,Xs,yo,vo,hl,dl,oh,ah],EN=[...MI,lh],LI=[ul,Rn,go,yu,_o,Dl,Xs,yo,vo,hl,dl,oh,ah,lh],FI=LI,zp=[...FI,$p,qa,$a],wN=zp,UI=[...zp,jp],bN=UI;class Tf extends RI{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function It(t,e){const n=he(t);return os.O(n.le,e)}function Py(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ws(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function BI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Qe{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oc(this.root,e,this.comparator,!0)}}class oc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??kt.RED,this.left=s??kt.EMPTY,this.right=i??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new kt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return kt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class je{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ky(this.data.getIterator())}getIteratorFrom(e){return new ky(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new je(this.comparator);return n.data=e,n}}class ky{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Di(t){return t.hasNext()?t.getNext():void 0}class nn{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new nn([])}unionWith(e){let n=new je(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class qI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qI("Invalid base64 string: "+i):i}})(e);return new ft(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const IN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(t){if(fe(!!t,39018),typeof t=="string"){let e=0;const n=IN.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wr(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}const $I="server_timestamp",jI="__type__",zI="__previous_value__",KI="__local_write_time__";function Kp(t){return(t?.mapValue?.fields||{})[jI]?.stringValue===$I}function ch(t){const e=t.mapValue.fields[zI];return Kp(e)?ch(e):e}function fl(t){const e=Er(t.mapValue.fields[KI].timestampValue);return new qe(e.seconds,e.nanos)}class TN{constructor(e,n,r,s,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Eu="(default)";class ci{constructor(e,n){this.projectId=e,this.database=n||Eu}static empty(){return new ci("","")}get isDefaultDatabase(){return this.database===Eu}isEqual(e){return e instanceof ci&&e.projectId===this.projectId&&e.database===this.database}}const Hp="__type__",HI="__max__",es={mapValue:{fields:{__type__:{stringValue:HI}}}},Gp="__vector__",Eo="value",Dc={nullValue:"NULL_VALUE"};function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Kp(t)?4:GI(t)?9007199254740991:uh(t)?10:11:ce(28295,{value:t})}function nr(t,e){if(t===e)return!0;const n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fl(t).isEqual(fl(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Er(s.timestampValue),a=Er(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return wr(s.bytesValue).isEqual(wr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return Ze(s.geoPointValue.latitude)===Ze(i.geoPointValue.latitude)&&Ze(s.geoPointValue.longitude)===Ze(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ze(s.integerValue)===Ze(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ze(s.doubleValue),a=Ze(i.doubleValue);return o===a?cl(o)===cl(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return po(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Py(o)!==Py(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!nr(o[l],a[l])))return!1;return!0})(t,e);default:return ce(52216,{left:t})}}function pl(t,e){return(t.values||[]).find((n=>nr(n,e)))!==void 0}function fs(t,e){if(t===e)return 0;const n=ds(t),r=ds(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const a=Ze(i.integerValue||i.doubleValue),l=Ze(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return xy(t.timestampValue,e.timestampValue);case 4:return xy(fl(t),fl(e));case 5:return vf(t.stringValue,e.stringValue);case 6:return(function(i,o){const a=wr(i),l=wr(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=be(a[u],l[u]);if(h!==0)return h}return be(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const a=be(Ze(i.latitude),Ze(o.latitude));return a!==0?a:be(Ze(i.longitude),Ze(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Vy(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const a=i.fields||{},l=o.fields||{},u=a[Eo]?.arrayValue,h=l[Eo]?.arrayValue,d=be(u?.values?.length||0,h?.values?.length||0);return d!==0?d:Vy(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===es.mapValue&&o===es.mapValue)return 0;if(i===es.mapValue)return 1;if(o===es.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=vf(l[d],h[d]);if(p!==0)return p;const g=fs(a[l[d]],u[h[d]]);if(g!==0)return g}return be(l.length,h.length)})(t.mapValue,e.mapValue);default:throw ce(23264,{he:n})}}function xy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=Er(t),r=Er(e),s=be(n.seconds,r.seconds);return s!==0?s:be(n.nanos,r.nanos)}function Vy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=fs(n[s],r[s]);if(i)return i}return be(n.length,r.length)}function wo(t){return Af(t)}function Af(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Er(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return wr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ie.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Af(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Af(n.fields[o])}`;return s+"}"})(t.mapValue):ce(61005,{value:t})}function Nc(t){switch(ds(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ch(t);return e?16+Nc(e):16;case 5:return 2*t.stringValue.length;case 6:return wr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Nc(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return ws(r.fields,((i,o)=>{s+=i.length+Nc(o)})),s})(t.mapValue);default:throw ce(13486,{value:t})}}function ml(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sf(t){return!!t&&"integerValue"in t}function gl(t){return!!t&&"arrayValue"in t}function Dy(t){return!!t&&"nullValue"in t}function Ny(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Oc(t){return!!t&&"mapValue"in t}function uh(t){return(t?.mapValue?.fields||{})[Hp]?.stringValue===Gp}function ja(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ws(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ja(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ja(t.arrayValue.values[n]);return e}return{...t}}function GI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===HI}const WI={mapValue:{fields:{[Hp]:{stringValue:Gp},[Eo]:{arrayValue:{}}}}};function AN(t){return"nullValue"in t?Dc:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ml(ci.empty(),ie.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?uh(t)?WI:{mapValue:{}}:ce(35942,{value:t})}function SN(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ml(ci.empty(),ie.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?WI:"mapValue"in t?uh(t)?{mapValue:{}}:es:ce(61959,{value:t})}function Oy(t,e){const n=fs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function My(t,e){const n=fs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Oc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ja(n)}setAll(e){let n=nt.emptyPath(),r={},s=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ja(o):s.push(a.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Oc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Oc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ws(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new jt(ja(this.value))}}function QI(t){const e=[];return ws(t.fields,((n,r)=>{const s=new nt([n]);if(Oc(r)){const i=QI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new nn(e)}class ot{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ot(e,0,me.min(),me.min(),me.min(),jt.empty(),0)}static newFoundDocument(e,n,r,s){return new ot(e,1,n,me.min(),r,s,0)}static newNoDocument(e,n){return new ot(e,2,n,me.min(),me.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,me.min(),me.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bo{constructor(e,n){this.position=e,this.inclusive=n}}function Ly(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=fs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Fy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}class _l{constructor(e,n="asc"){this.field=e,this.dir=n}}function RN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class JI{}class Ve extends JI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CN(e,n,r):n==="array-contains"?new xN(e,r):n==="in"?new nT(e,r):n==="not-in"?new VN(e,r):n==="array-contains-any"?new DN(e,r):new Ve(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new PN(e,r):new kN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fs(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $e extends JI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new $e(e,n)}matches(e){return Io(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Io(t){return t.op==="and"}function Rf(t){return t.op==="or"}function Wp(t){return YI(t)&&Io(t)}function YI(t){for(const e of t.filters)if(e instanceof $e)return!1;return!0}function Cf(t){if(t instanceof Ve)return t.field.canonicalString()+t.op.toString()+wo(t.value);if(Wp(t))return t.filters.map((e=>Cf(e))).join(",");{const e=t.filters.map((n=>Cf(n))).join(",");return`${t.op}(${e})`}}function XI(t,e){return t instanceof Ve?(function(r,s){return s instanceof Ve&&r.op===s.op&&r.field.isEqual(s.field)&&nr(r.value,s.value)})(t,e):t instanceof $e?(function(r,s){return s instanceof $e&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,a)=>i&&XI(o,s.filters[a])),!0):!1})(t,e):void ce(19439)}function ZI(t,e){const n=t.filters.concat(e);return $e.create(n,t.op)}function eT(t){return t instanceof Ve?(function(n){return`${n.field.canonicalString()} ${n.op} ${wo(n.value)}`})(t):t instanceof $e?(function(n){return n.op.toString()+" {"+n.getFilters().map(eT).join(" ,")+"}"})(t):"Filter"}class CN extends Ve{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class PN extends Ve{constructor(e,n){super(e,"in",n),this.keys=tT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class kN extends Ve{constructor(e,n){super(e,"not-in",n),this.keys=tT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function tT(t,e){return(e.arrayValue?.values||[]).map((n=>ie.fromName(n.referenceValue)))}class xN extends Ve{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return gl(n)&&pl(n.arrayValue,this.value)}}class nT extends Ve{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pl(this.value.arrayValue,n)}}class VN extends Ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pl(this.value.arrayValue,n)}}class DN extends Ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!gl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>pl(this.value.arrayValue,r)))}}class NN{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Pf(t,e=null,n=[],r=[],s=null,i=null,o=null){return new NN(t,e,n,r,s,i,o)}function ui(t){const e=he(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Cf(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>wo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>wo(r))).join(",")),e.Te=n}return e.Te}function Nl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!XI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fy(t.startAt,e.startAt)&&Fy(t.endAt,e.endAt)}function wu(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function bu(t,e){return t.filters.filter((n=>n instanceof Ve&&n.field.isEqual(e)))}function Uy(t,e,n){let r=Dc,s=!0;for(const i of bu(t,e)){let o=Dc,a=!0;switch(i.op){case"<":case"<=":o=AN(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Dc}Oy({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Oy({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function By(t,e,n){let r=es,s=!0;for(const i of bu(t,e)){let o=es,a=!0;switch(i.op){case">=":case">":o=SN(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=es}My({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];My({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}class Lo{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rT(t,e,n,r,s,i,o,a){return new Lo(t,e,n,r,s,i,o,a)}function hh(t){return new Lo(t)}function qy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sT(t){return t.collectionGroup!==null}function za(t){const e=he(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new je(nt.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new _l(i,r))})),n.has(nt.keyField().canonicalString())||e.Ie.push(new _l(nt.keyField(),r))}return e.Ie}function pn(t){const e=he(t);return e.Ee||(e.Ee=ON(e,za(t))),e.Ee}function ON(t,e){if(t.limitType==="F")return Pf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new _l(s.field,i)}));const n=t.endAt?new bo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bo(t.startAt.position,t.startAt.inclusive):null;return Pf(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function kf(t,e){const n=t.filters.concat([e]);return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xf(t,e,n){return new Lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dh(t,e){return Nl(pn(t),pn(e))&&t.limitType===e.limitType}function iT(t){return`${ui(pn(t))}|lt:${t.limitType}`}function Ki(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>eT(s))).join(", ")}]`),ih(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>wo(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>wo(s))).join(",")),`Target(${r})`})(pn(t))}; limitType=${t.limitType})`}function Ol(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of za(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,a,l){const u=Ly(o,a,l);return o.inclusive?u<=0:u<0})(r.startAt,za(r),s)||r.endAt&&!(function(o,a,l){const u=Ly(o,a,l);return o.inclusive?u>=0:u>0})(r.endAt,za(r),s))})(t,e)}function oT(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aT(t){return(e,n)=>{let r=!1;for(const s of za(t)){const i=MN(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function MN(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):(function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?fs(l,u):ce(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ce(19790,{direction:t.dir})}}class Sr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ws(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return BI(this.inner)}size(){return this.innerSize}}const LN=new Qe(ie.comparator);function dn(){return LN}const lT=new Qe(ie.comparator);function wa(...t){let e=lT;for(const n of t)e=e.insert(n.key,n);return e}function cT(t){let e=lT;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Kn(){return Ka()}function uT(){return Ka()}function Ka(){return new Sr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const FN=new Qe(ie.comparator),UN=new je(ie.comparator);function Ce(...t){let e=UN;for(const n of t)e=e.add(n);return e}const BN=new je(be);function Qp(){return BN}function Jp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cl(e)?"-0":e}}function hT(t){return{integerValue:""+t}}function qN(t,e){return PI(e)?hT(e):Jp(t,e)}class fh{constructor(){this._=void 0}}function $N(t,e,n){return t instanceof To?(function(s,i){const o={fields:{[jI]:{stringValue:$I},[KI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Kp(i)&&(i=ch(i)),i&&(o.fields[zI]=i),{mapValue:o}})(n,e):t instanceof Ao?fT(t,e):t instanceof So?pT(t,e):(function(s,i){const o=dT(s,i),a=$y(o)+$y(s.Ae);return Sf(o)&&Sf(s.Ae)?hT(a):Jp(s.serializer,a)})(t,e)}function jN(t,e,n){return t instanceof Ao?fT(t,e):t instanceof So?pT(t,e):n}function dT(t,e){return t instanceof yl?(function(r){return Sf(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class To extends fh{}class Ao extends fh{constructor(e){super(),this.elements=e}}function fT(t,e){const n=mT(e);for(const r of t.elements)n.some((s=>nr(s,r)))||n.push(r);return{arrayValue:{values:n}}}class So extends fh{constructor(e){super(),this.elements=e}}function pT(t,e){let n=mT(e);for(const r of t.elements)n=n.filter((s=>!nr(s,r)));return{arrayValue:{values:n}}}class yl extends fh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $y(t){return Ze(t.integerValue||t.doubleValue)}function mT(t){return gl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class gT{constructor(e,n){this.field=e,this.transform=n}}function zN(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Ao&&s instanceof Ao||r instanceof So&&s instanceof So?po(r.elements,s.elements,nr):r instanceof yl&&s instanceof yl?nr(r.Ae,s.Ae):r instanceof To&&s instanceof To})(t.transform,e.transform)}class KN{constructor(e,n){this.version=e,this.transformResults=n}}class zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zt}static exists(e){return new zt(void 0,e)}static updateTime(e){return new zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ph{}function _T(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mh(t.key,zt.none()):new Fo(t.key,t.data,zt.none());{const n=t.data,r=jt.empty();let s=new je(nt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Rr(t.key,r,new nn(s.toArray()),zt.none())}}function HN(t,e,n){t instanceof Fo?(function(s,i,o){const a=s.value.clone(),l=zy(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Rr?(function(s,i,o){if(!Mc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=zy(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(yT(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Ha(t,e,n,r){return t instanceof Fo?(function(i,o,a,l){if(!Mc(i.precondition,o))return a;const u=i.value.clone(),h=Ky(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Rr?(function(i,o,a,l){if(!Mc(i.precondition,o))return a;const u=Ky(i.fieldTransforms,l,o),h=o.data;return h.setAll(yT(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(i,o,a){return Mc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function GN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=dT(r.transform,s||null);i!=null&&(n===null&&(n=jt.empty()),n.set(r.field,i))}return n||null}function jy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&po(r,s,((i,o)=>zN(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fo extends ph{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rr extends ph{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yT(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function zy(t,e,n){const r=new Map;fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,jN(o,a,n[s]))}return r}function Ky(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,$N(i,o,e))}return r}class mh extends ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vT extends ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yp{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&HN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ha(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ha(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uT();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=_T(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ce())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,((n,r)=>jy(n,r)))&&po(this.baseMutations,e.baseMutations,((n,r)=>jy(n,r)))}}class Xp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return FN})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Xp(e,n,r,s)}}class Zp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class WN{constructor(e,n){this.count=e,this.unchangedNames=n}}var gt,De;function QN(t){switch(t){case z.OK:return ce(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ce(15467,{code:t})}}function ET(t){if(t===void 0)return ct("GRPC error has no .code"),z.UNKNOWN;switch(t){case gt.OK:return z.OK;case gt.CANCELLED:return z.CANCELLED;case gt.UNKNOWN:return z.UNKNOWN;case gt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case gt.INTERNAL:return z.INTERNAL;case gt.UNAVAILABLE:return z.UNAVAILABLE;case gt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case gt.NOT_FOUND:return z.NOT_FOUND;case gt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case gt.ABORTED:return z.ABORTED;case gt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case gt.DATA_LOSS:return z.DATA_LOSS;default:return ce(39323,{code:t})}}(De=gt||(gt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";function JN(){return new TextEncoder}const YN=new is([4294967295,4294967295],0);function Hy(t){const e=JN().encode(t),n=new pI;return n.update(e),new Uint8Array(n.digest())}function Gy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new is([n,r],0),new is([s,i],0)]}class em{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ba(`Invalid padding: ${n}`);if(r<0)throw new ba(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ba(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ba(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=is.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(is.fromNumber(r)));return s.compare(YN)===1&&(s=new is([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Hy(e),[r,s]=Gy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new em(i,s,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=Hy(e),[r,s]=Gy(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ml{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ll.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ml(me.min(),s,new Qe(be),dn(),Ce())}}class Ll{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ll(r,n,Ce(),Ce(),Ce())}}class Lc{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class wT{constructor(e,n){this.targetId=e,this.Ce=n}}class bT{constructor(e,n,r=ft.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Wy{constructor(){this.ve=0,this.Fe=Qy(),this.Me=ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ce(),n=Ce(),r=Ce();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ce(38017,{changeType:i})}})),new Ll(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Qy()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class XN{constructor(e){this.Ge=e,this.ze=new Map,this.je=dn(),this.Je=ac(),this.He=ac(),this.Ye=new Qe(be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ce(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(wu(i))if(r===0){const o=new ie(i.path);this.et(n,o,ot.newNoDocument(o,me.min()))}else fe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=wr(r).toUint8Array()}catch(l){if(l instanceof qI)return al("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new em(o,s,i)}catch(l){return al(l instanceof ba?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const a=this.ot(o);if(a){if(i.current&&wu(a.target)){const l=new ie(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,ot.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=Ce();this.He.forEach(((i,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new Ml(e,n,this.Ye,this.je,r);return this.je=dn(),this.Je=ac(),this.He=ac(),this.Ye=new Qe(be),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Wy,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new je(be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new je(be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wy),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ac(){return new Qe(ie.comparator)}function Qy(){return new Qe(ie.comparator)}const ZN={asc:"ASCENDING",desc:"DESCENDING"},eO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tO={and:"AND",or:"OR"};class nO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vf(t,e){return t.useProto3Json||ih(e)?e:{value:e}}function Ro(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rO(t,e){return Ro(t,e.toTimestamp())}function Xt(t){return fe(!!t,49232),me.fromTimestamp((function(n){const r=Er(n);return new qe(r.seconds,r.nanos)})(t))}function tm(t,e){return Df(t,e).canonicalString()}function Df(t,e){const n=(function(s){return new Me(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function TT(t){const e=Me.fromString(t);return fe(DT(e),10190,{key:e.toString()}),e}function Iu(t,e){return tm(t.databaseId,e.path)}function Zs(t,e){const n=TT(e);if(n.get(1)!==t.databaseId.projectId)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(RT(n))}function AT(t,e){return tm(t.databaseId,e)}function ST(t){const e=TT(t);return e.length===4?Me.emptyPath():RT(e)}function Nf(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RT(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Jy(t,e,n){return{name:Iu(t,e),fields:n.value.mapValue.fields}}function sO(t,e,n){const r=Zs(t,e.name),s=Xt(e.updateTime),i=e.createTime?Xt(e.createTime):me.min(),o=new jt({mapValue:{fields:e.fields}}),a=ot.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function iO(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ce(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(fe(h===void 0||typeof h=="string",58123),ft.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ft.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const h=u.code===void 0?z.UNKNOWN:ET(u.code);return new te(h,u.message||"")})(o);n=new bT(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Zs(t,r.document.name),i=Xt(r.document.updateTime),o=r.document.createTime?Xt(r.document.createTime):me.min(),a=new jt({mapValue:{fields:r.document.fields}}),l=ot.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Lc(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Zs(t,r.document),i=r.readTime?Xt(r.readTime):me.min(),o=ot.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Lc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Zs(t,r.document),i=r.removedTargetIds||[];n=new Lc([],i,s,null)}else{if(!("filter"in e))return ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new WN(s,i),a=r.targetId;n=new wT(a,o)}}return n}function Tu(t,e){let n;if(e instanceof Fo)n={update:Jy(t,e.key,e.value)};else if(e instanceof mh)n={delete:Iu(t,e.key)};else if(e instanceof Rr)n={update:Jy(t,e.key,e.data),updateMask:hO(e.fieldMask)};else{if(!(e instanceof vT))return ce(16599,{Vt:e.type});n={verify:Iu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const a=o.transform;if(a instanceof To)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ao)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof So)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yl)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ce(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:rO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ce(27497)})(t,e.precondition)),n}function Of(t,e){const n=e.currentDocument?(function(i){return i.updateTime!==void 0?zt.updateTime(Xt(i.updateTime)):i.exists!==void 0?zt.exists(i.exists):zt.none()})(e.currentDocument):zt.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(o,a){let l=null;if("setToServerValue"in a)fe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new To;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];l=new Ao(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];l=new So(h)}else"increment"in a?l=new yl(o,a.increment):ce(16584,{proto:a});const u=nt.fromServerFormat(a.fieldPath);return new gT(u,l)})(t,s))):[];if(e.update){e.update.name;const s=Zs(t,e.update.name),i=new jt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(l){const u=l.fieldPaths||[];return new nn(u.map((h=>nt.fromServerFormat(h))))})(e.updateMask);return new Rr(s,i,o,n,r)}return new Fo(s,i,n,r)}if(e.delete){const s=Zs(t,e.delete);return new mh(s,n)}if(e.verify){const s=Zs(t,e.verify);return new vT(s,n)}return ce(1463,{proto:e})}function oO(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?Xt(s.updateTime):Xt(i);return o.isEqual(me.min())&&(o=Xt(i)),new KN(o,s.transformResults||[])})(n,e)))):[]}function CT(t,e){return{documents:[AT(t,e.path)]}}function PT(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AT(t,s);const i=(function(u){if(u.length!==0)return VT($e.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:Hi(p.field),direction:lO(p.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Vf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function kT(t){let e=ST(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){fe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(d){const p=xT(d);return p instanceof $e&&Wp(p)?p.getFilters():[p]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((p=>(function(T){return new _l(Gi(T.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let p;return p=typeof d=="object"?d.value:d,ih(p)?null:p})(n.limit));let l=null;n.startAt&&(l=(function(d){const p=!!d.before,g=d.values||[];return new bo(g,p)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const p=!d.before,g=d.values||[];return new bo(g,p)})(n.endAt)),rT(e,s,o,i,a,"F",l,u)}function aO(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xT(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gi(n.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Gi(n.unaryFilter.field);return Ve.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Gi(n.unaryFilter.field);return Ve.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Gi(n.unaryFilter.field);return Ve.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ve.create(Gi(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return $e.create(n.compositeFilter.filters.map((r=>xT(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ce(1026)}})(n.compositeFilter.op))})(t):ce(30097,{filter:t})}function lO(t){return ZN[t]}function cO(t){return eO[t]}function uO(t){return tO[t]}function Hi(t){return{fieldPath:t.canonicalString()}}function Gi(t){return nt.fromServerFormat(t.fieldPath)}function VT(t){return t instanceof Ve?(function(n){if(n.op==="=="){if(Ny(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NAN"}};if(Dy(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ny(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NOT_NAN"}};if(Dy(n.value))return{unaryFilter:{field:Hi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hi(n.field),op:cO(n.op),value:n.value}}})(t):t instanceof $e?(function(n){const r=n.getFilters().map((s=>VT(s)));return r.length===1?r[0]:{compositeFilter:{op:uO(n.op),filters:r}}})(t):ce(54877,{filter:t})}function hO(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function DT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class fr{constructor(e,n,r,s,i=me.min(),o=me.min(),a=ft.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class NT{constructor(e){this.yt=e}}function dO(t,e){let n;if(e.document)n=sO(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ie.fromSegments(e.noDocument.path),s=di(e.noDocument.readTime);n=ot.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ce(56709);{const r=ie.fromSegments(e.unknownDocument.path),s=di(e.unknownDocument.version);n=ot.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime((function(s){const i=new qe(s[0],s[1]);return me.fromTimestamp(i)})(e.readTime)),n}function Yy(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Au(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,o){return{name:Iu(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Ro(i,o.version.toTimestamp()),createTime:Ro(i,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:hi(e.version)};else{if(!e.isUnknownDocument())return ce(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:hi(e.version)}}return r}function Au(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function hi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function di(t){const e=new qe(t.seconds,t.nanoseconds);return me.fromTimestamp(e)}function Bs(t,e){const n=(e.baseMutations||[]).map((i=>Of(t.yt,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>Of(t.yt,i))),s=qe.fromMillis(e.localWriteTimeMs);return new Yp(e.batchId,s,n,r)}function Ia(t){const e=di(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?di(t.lastLimboFreeSnapshotVersion):me.min();let r;return r=(function(i){return i.documents!==void 0})(t.query)?(function(i){const o=i.documents.length;return fe(o===1,1966,{count:o}),pn(hh(ST(i.documents[0])))})(t.query):(function(i){return pn(kT(i))})(t.query),new fr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ft.fromBase64String(t.resumeToken))}function OT(t,e){const n=hi(e.snapshotVersion),r=hi(e.lastLimboFreeSnapshotVersion);let s;s=wu(e.target)?CT(t.yt,e.target):PT(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ui(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function MT(t){const e=kT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xf(e,e.limit,"L"):e}function vd(t,e){return new Zp(e.largestBatchId,Of(t.yt,e.overlayMutation))}function Xy(t,e){const n=e.path.lastSegment();return[t,Kt(e.path.popLast()),n]}function Zy(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:hi(r.readTime),documentKey:Kt(r.documentKey.path),largestBatchId:r.largestBatchId}}class fO{getBundleMetadata(e,n){return ev(e).get(n).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:di(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,n){return ev(e).put((function(s){return{bundleId:s.id,createTime:hi(Xt(s.createTime)),version:s.version}})(n))}getNamedQuery(e,n){return tv(e).get(n).next((r=>{if(r)return(function(i){return{name:i.name,query:MT(i.bundledQuery),readTime:di(i.readTime)}})(r)}))}saveNamedQuery(e,n){return tv(e).put((function(s){return{name:s.name,readTime:hi(Xt(s.readTime)),bundledQuery:s.bundledQuery}})(n))}}function ev(t){return It(t,oh)}function tv(t){return It(t,ah)}class gh{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new gh(e,r)}getOverlay(e,n){return aa(e).get(Xy(this.userId,n)).next((r=>r?vd(this.serializer,r):null))}getOverlays(e,n){const r=Kn();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){const s=[];return r.forEach(((i,o)=>{const a=new Zp(n,o);s.push(this.St(e,a))})),O.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach((o=>s.add(Kt(o.getCollectionPath()))));const i=[];return s.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(aa(e).Z(If,a))})),O.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Kn(),i=Kt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return aa(e).J(If,o).next((a=>{for(const l of a){const u=vd(this.serializer,l);s.set(u.getKey(),u)}return s}))}getOverlaysForCollectionGroup(e,n,r,s){const i=Kn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return aa(e).ee({index:OI,range:a},((l,u,h)=>{const d=vd(this.serializer,u);i.size()<s||d.largestBatchId===o?(i.set(d.getKey(),d),o=d.largestBatchId):h.done()})).next((()=>i))}St(e,n){return aa(e).put((function(s,i,o){const[a,l,u]=Xy(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Tu(s.yt,o.mutation)}})(this.serializer,this.userId,n))}}function aa(t){return It(t,lh)}class pO{bt(e){return It(e,jp)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?ft.fromUint8Array(r):ft.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class qs{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ze(e.integerValue));else if("doubleValue"in e){const r=Ze(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),cl(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Er(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(wr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?GI(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):uh(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):ce(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const s=Eo,i=r[s].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ze(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),ie.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}qs.Kt=new qs;const Ni=255;function mO(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function nv(t){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const o=mO(255&r[i]);if(s+=o,o!==8)break}return s})(t);return Math.ceil(e/8)}class gO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=nv(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=nv(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(Ni),this.sn(255)}_n(){this.an(Ni),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===Ni?(this.sn(Ni),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===Ni?(this.an(Ni),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class _O{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class yO{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class la{constructor(){this.cn=new gO,this.ln=new _O(this.cn),this.hn=new yO(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class $s{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new $s(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Fc(this.En),directionalValue:Fc(this.dn),orderedDocumentKey:Fc(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Lr(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=rv(t.En,e.En),n!==0?n:(n=rv(t.dn,e.dn),n!==0?n:ie.comparator(t.In,e.In)))}function rv(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Fc(t){return Sb()?(function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r})(t):t}function sv(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(t)}class iv{constructor(e){this.mn=new je(((n,r)=>nt.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(fe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=Ef(e);if(n!==void 0&&!this.wn(n))return!1;const r=Ms(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new je(nt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new kc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new kc(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new kc(r.field,r.dir==="asc"?0:1)));return new gu(gu.UNKNOWN_ID,this.collectionId,n,ll.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function LT(t){if(fe(t instanceof Ve||t instanceof $e,20012),t instanceof Ve){if(t instanceof nT){const n=t.value.arrayValue?.values?.map((r=>Ve.create(t.field,"==",r)))||[];return $e.create(n,"or")}return t}const e=t.filters.map((n=>LT(n)));return $e.create(e,t.op)}function vO(t){if(t.getFilters().length===0)return[];const e=Ff(LT(t));return fe(FT(e),7391),Mf(e)||Lf(e)?[e]:e.getFilters()}function Mf(t){return t instanceof Ve}function Lf(t){return t instanceof $e&&Wp(t)}function FT(t){return Mf(t)||Lf(t)||(function(n){if(n instanceof $e&&Rf(n)){for(const r of n.getFilters())if(!Mf(r)&&!Lf(r))return!1;return!0}return!1})(t)}function Ff(t){if(fe(t instanceof Ve||t instanceof $e,34018),t instanceof Ve)return t;if(t.filters.length===1)return Ff(t.filters[0]);const e=t.filters.map((r=>Ff(r)));let n=$e.create(e,t.op);return n=Su(n),FT(n)?n:(fe(n instanceof $e,64498),fe(Io(n),40251),fe(n.filters.length>1,57927),n.filters.reduce(((r,s)=>nm(r,s))))}function nm(t,e){let n;return fe(t instanceof Ve||t instanceof $e,38388),fe(e instanceof Ve||e instanceof $e,25473),n=t instanceof Ve?e instanceof Ve?(function(s,i){return $e.create([s,i],"and")})(t,e):ov(t,e):e instanceof Ve?ov(e,t):(function(s,i){if(fe(s.filters.length>0&&i.filters.length>0,48005),Io(s)&&Io(i))return ZI(s,i.getFilters());const o=Rf(s)?s:i,a=Rf(s)?i:s,l=o.filters.map((u=>nm(u,a)));return $e.create(l,"or")})(t,e),Su(n)}function ov(t,e){if(Io(e))return ZI(e,t.getFilters());{const n=e.filters.map((r=>nm(t,r)));return $e.create(n,"or")}}function Su(t){if(fe(t instanceof Ve||t instanceof $e,11850),t instanceof Ve)return t;const e=t.getFilters();if(e.length===1)return Su(e[0]);if(YI(t))return t;const n=e.map((s=>Su(s))),r=[];return n.forEach((s=>{s instanceof Ve?r.push(s):s instanceof $e&&(s.op===t.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:$e.create(r,t.op)}class EO{constructor(){this.Cn=new rm}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(mn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(mn.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class rm{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new je(Me.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new je(Me.comparator)).toArray()}}const av="IndexedDbIndexManager",lc=new Uint8Array(0);class wO{constructor(e,n){this.databaseId=n,this.vn=new rm,this.Fn=new Sr((r=>ui(r)),((r,s)=>Nl(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const i={collectionId:r,parent:Kt(s)};return lv(e).put(i)}return O.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[wI(n),""],!1,!0);return lv(e).J(s).next((i=>{for(const o of i){if(o.collectionId!==n)break;r.push(zn(o.parent))}return r}))}addFieldIndex(e,n){const r=ca(e),s=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=Mi(e);return i.next((a=>{o.put(Zy(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return i.next()}deleteFieldIndex(e,n){const r=ca(e),s=Mi(e),i=Oi(e);return r.delete(n.indexId).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=ca(e),r=Oi(e),s=Mi(e);return n.Z().next((()=>r.Z())).next((()=>s.Z()))}createTargetIndexes(e,n){return O.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new iv(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,n){const r=Oi(e);let s=!0;const i=new Map;return O.forEach(this.Mn(n),(o=>this.xn(e,o).next((a=>{s&&(s=!!a),i.set(o,a)})))).next((()=>{if(s){let o=Ce();const a=[];return O.forEach(i,((l,u)=>{Y(av,`Using index ${(function(x){return`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map((V=>`${V.fieldPath}:${V.kind}`)).join(",")}`})(l)} to execute ${ui(n)}`);const h=(function(x,V){const L=Ef(V);if(L===void 0)return null;for(const q of bu(x,L.fieldPath))switch(q.op){case"array-contains-any":return q.value.arrayValue.values||[];case"array-contains":return[q.value]}return null})(u,l),d=(function(x,V){const L=new Map;for(const q of Ms(V))for(const A of bu(x,q.fieldPath))switch(A.op){case"==":case"in":L.set(q.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return L.set(q.fieldPath.canonicalString(),A.value),Array.from(L.values())}return null})(u,l),p=(function(x,V){const L=[];let q=!0;for(const A of Ms(V)){const y=A.kind===0?Uy(x,A.fieldPath,x.startAt):By(x,A.fieldPath,x.startAt);L.push(y.value),q&&(q=y.inclusive)}return new bo(L,q)})(u,l),g=(function(x,V){const L=[];let q=!0;for(const A of Ms(V)){const y=A.kind===0?By(x,A.fieldPath,x.endAt):Uy(x,A.fieldPath,x.endAt);L.push(y.value),q&&(q=y.inclusive)}return new bo(L,q)})(u,l),T=this.On(l,u,p),P=this.On(l,u,g),C=this.Nn(l,u,d),D=this.Bn(l.indexId,h,T,p.inclusive,P,g.inclusive,C);return O.forEach(D,(S=>r.Y(S,n.limit).next((x=>{x.forEach((V=>{const L=ie.fromSegments(V.documentKey);o.has(L)||(o=o.add(L),a.push(L))}))}))))})).next((()=>a))}return O.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=vO($e.create(e.filters,"and")).map((r=>Pf(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),u=l/(n!=null?n.length:1),h=[];for(let d=0;d<l;++d){const p=n?this.Ln(n[d/u]):lc,g=this.kn(e,p,r[d%u],s),T=this.qn(e,p,i[d%u],o),P=a.map((C=>this.kn(e,p,C,!0)));h.push(...this.createRange(g,T,P))}return h}kn(e,n,r,s){const i=new $s(e,ie.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new $s(e,ie.empty(),n,r);return s?i.An():i}xn(e,n){const r=new iv(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let o=null;for(const a of i)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,n){let r=2;const s=this.Mn(n);return O.forEach(s,(i=>this.xn(e,i).next((o=>{o?r!==0&&o.fields.length<(function(l){let u=new je(nt.comparator),h=!1;for(const d of l.filters)for(const p of d.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?h=!0:u=u.add(p.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(h?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&s.length>1&&r===2?1:r))}Qn(e,n){const r=new la;for(const s of Ms(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);qs.Kt.Dt(i,o)}return r.un()}Ln(e){const n=new la;return qs.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new la;return qs.Kt.Dt(ml(this.databaseId,n),r.Pn((function(i){const o=Ms(i);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new la);let i=0;for(const o of Ms(e)){const a=r[i++];for(const l of s)if(this.Un(n,o.fieldPath)&&gl(a))s=this.Kn(s,o,a);else{const u=l.Pn(o.kind);qs.Kt.Dt(a,u)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new la;l.seed(a.un()),qs.Kt.Dt(o,l.Pn(n.kind)),i.push(l)}return i}Un(e,n){return!!e.filters.find((r=>r instanceof Ve&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=ca(e),s=Mi(e);return(n?r.J(bf,IDBKeyRange.bound(n,n)):r.J()).next((i=>{const o=[];return O.forEach(i,(a=>s.get([a.indexId,this.uid]).next((l=>{o.push((function(h,d){const p=d?new ll(d.sequenceNumber,new mn(di(d.readTime),new ie(zn(d.documentKey)),d.largestBatchId)):ll.empty(),g=h.fields.map((([T,P])=>new kc(nt.fromServerFormat(T),P)));return new gu(h.indexId,h.collectionGroup,g,p)})(a,l))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:be(r.collectionGroup,s.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const s=ca(e),i=Mi(e);return this.Gn(e).next((o=>s.J(bf,IDBKeyRange.bound(n,n)).next((a=>O.forEach(a,(l=>i.put(Zy(l.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,((s,i)=>{const o=r.get(s.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next((a=>(r.set(s.collectionGroup,a),O.forEach(a,(l=>this.zn(e,s,l).next((u=>{const h=this.jn(i,l);return u.isEqual(h)?O.resolve():this.Jn(e,i,l,u,h)})))))))}))}Hn(e,n,r,s){return Oi(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return Oi(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=Oi(e);let i=new je(Lr);return s.ee({index:NI,range:IDBKeyRange.only([r.indexId,this.uid,Fc(this.$n(r,n))])},((o,a)=>{i=i.add(new $s(r.indexId,n,sv(a.arrayValue),sv(a.directionalValue)))})).next((()=>i))}jn(e,n){let r=new je(Lr);const s=this.Qn(n,e);if(s==null)return r;const i=Ef(n);if(i!=null){const o=e.data.field(i.fieldPath);if(gl(o))for(const a of o.arrayValue.values||[])r=r.add(new $s(n.indexId,e.key,this.Ln(a),s))}else r=r.add(new $s(n.indexId,e.key,lc,s));return r}Jn(e,n,r,s,i){Y(av,"Updating index entries for document '%s'",n.key);const o=[];return(function(l,u,h,d,p){const g=l.getIterator(),T=u.getIterator();let P=Di(g),C=Di(T);for(;P||C;){let D=!1,S=!1;if(P&&C){const x=h(P,C);x<0?S=!0:x>0&&(D=!0)}else P!=null?S=!0:D=!0;D?(d(C),C=Di(T)):S?(p(P),P=Di(g)):(P=Di(g),C=Di(T))}})(s,i,Lr,(a=>{o.push(this.Hn(e,n,r,a))}),(a=>{o.push(this.Yn(e,n,r,a))})),O.waitFor(o)}Gn(e){let n=1;return Mi(e).ee({index:DI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),n=s.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,a)=>Lr(o,a))).filter(((o,a,l)=>!a||Lr(o,l[a-1])!==0));const s=[];s.push(e);for(const o of r){const a=Lr(o,e),l=Lr(o,n);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,lc,ie.empty()),l=s[o+1].Vn(this.uid,lc,ie.empty());i.push(IDBKeyRange.bound(a,l))}return i}Zn(e,n){return Lr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(cv)}getMinOffset(e,n){return O.mapArray(this.Mn(n),(r=>this.xn(e,r).next((s=>s||ce(44426))))).next(cv)}}function lv(t){return It(t,dl)}function Oi(t){return It(t,$a)}function ca(t){return It(t,$p)}function Mi(t){return It(t,qa)}function cv(t){fe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Up(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new mn(e.readTime,e.documentKey,n)}const uv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UT=41943040;class Ut{static withCacheSize(e){return new Ut(e,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function BT(t,e,n){const r=t.store(Rn),s=t.store(go),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},((h,d,p)=>(a++,p.delete())));i.push(l.next((()=>{fe(a===1,47070,{batchId:n.batchId})})));const u=[];for(const h of n.mutations){const d=kI(e,h.key.path,n.batchId);i.push(s.delete(d)),u.push(h.key)}return O.waitFor(i).next((()=>u))}function Ru(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ce(14731);e=t.noDocument}return JSON.stringify(e).length}Ut.DEFAULT_COLLECTION_PERCENTILE=10,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ut.DEFAULT=new Ut(UT,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ut.DISABLED=new Ut(-1,0,0);class _h{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){fe(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new _h(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fr(e).ee({index:zs,range:r},((s,i,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,s){const i=Wi(e),o=Fr(e);return o.add({}).next((a=>{fe(typeof a=="number",49019);const l=new Yp(a,n,r,s),u=(function(g,T,P){const C=P.baseMutations.map((S=>Tu(g.yt,S))),D=P.mutations.map((S=>Tu(g.yt,S)));return{userId:T,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:C,mutations:D}})(this.serializer,this.userId,l),h=[];let d=new je(((p,g)=>be(p.canonicalString(),g.canonicalString())));for(const p of s){const g=kI(this.userId,p.key.path,a);d=d.add(p.key.path.popLast()),h.push(o.put(u)),h.push(i.put(g,ZD))}return d.forEach((p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))})),e.addOnCommittedListener((()=>{this.Xn[a]=l.keys()})),O.waitFor(h).next((()=>l))}))}lookupMutationBatch(e,n){return Fr(e).get(n).next((r=>r?(fe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Bs(this.serializer,r)):null))}er(e,n){return this.Xn[n]?O.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Fr(e).ee({index:zs,range:s},((o,a,l)=>{a.userId===this.userId&&(fe(a.batchId>=r,47524,{tr:r}),i=Bs(this.serializer,a)),l.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ys;return Fr(e).ee({index:zs,range:n,reverse:!0},((s,i,o)=>{r=i.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ys],[this.userId,Number.POSITIVE_INFINITY]);return Fr(e).J(zs,n).next((r=>r.map((s=>Bs(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=xc(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Wi(e).ee({range:s},((o,a,l)=>{const[u,h,d]=o,p=zn(h);if(u===this.userId&&n.path.isEqual(p))return Fr(e).get(d).next((g=>{if(!g)throw ce(61480,{nr:o,batchId:d});fe(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:d}),i.push(Bs(this.serializer,g))}));l.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(be);const s=[];return n.forEach((i=>{const o=xc(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Wi(e).ee({range:a},((u,h,d)=>{const[p,g,T]=u,P=zn(g);p===this.userId&&i.path.isEqual(P)?r=r.add(T):d.done()}));s.push(l)})),O.waitFor(s).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=xc(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new je(be);return Wi(e).ee({range:o},((l,u,h)=>{const[d,p,g]=l,T=zn(p);d===this.userId&&r.isPrefixOf(T)?T.length===s&&(a=a.add(g)):h.done()})).next((()=>this.rr(e,a)))}rr(e,n){const r=[],s=[];return n.forEach((i=>{s.push(Fr(e).get(i).next((o=>{if(o===null)throw ce(35274,{batchId:i});fe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Bs(this.serializer,o))})))})),O.waitFor(s).next((()=>r))}removeMutationBatch(e,n){return BT(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),O.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return Wi(e).ee({range:r},((i,o,a)=>{if(i[0]===this.userId){const l=zn(i[1]);s.push(l)}else a.done()})).next((()=>{fe(s.length===0,56720,{sr:s.map((i=>i.canonicalString()))})}))}))}containsKey(e,n){return qT(e,this.userId,n)}_r(e){return $T(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ys,lastStreamToken:""}))}}function qT(t,e,n){const r=xc(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Wi(t).ee({range:i,X:!0},((a,l,u)=>{const[h,d,p]=a;h===e&&d===s&&(o=!0),u.done()})).next((()=>o))}function Fr(t){return It(t,Rn)}function Wi(t){return It(t,go)}function $T(t){return It(t,ul)}class fi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fi(0)}static cr(){return new fi(-1)}}class bO{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new fi(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>me.fromTimestamp(new qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>Li(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(fe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let s=0;const i=[];return Li(e).ee(((o,a)=>{const l=Ia(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))})).next((()=>O.waitFor(i))).next((()=>s))}forEachTarget(e,n){return Li(e).ee(((r,s)=>{const i=Ia(s);n(i)}))}lr(e){return hv(e).get(vu).next((n=>(fe(n!==null,2888),n)))}hr(e,n){return hv(e).put(vu,n)}Pr(e,n){return Li(e).put(OT(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=ui(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Li(e).ee({range:s,index:VI},((o,a,l)=>{const u=Ia(a);Nl(n,u.target)&&(i=u,l.done())})).next((()=>i))}addMatchingKeys(e,n,r){const s=[],i=Xr(e);return n.forEach((o=>{const a=Kt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))})),O.waitFor(s)}removeMatchingKeys(e,n,r){const s=Xr(e);return O.forEach(n,(i=>{const o=Kt(i.path);return O.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,n){const r=Xr(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Xr(e);let i=Ce();return s.ee({range:r,X:!0},((o,a,l)=>{const u=zn(o[1]),h=new ie(u);i=i.add(h)})).next((()=>i))}containsKey(e,n){const r=Kt(n.path),s=IDBKeyRange.bound([r],[wI(r)],!1,!0);let i=0;return Xr(e).ee({index:qp,X:!0,range:s},(([o,a],l,u)=>{o!==0&&(i++,u.done())})).next((()=>i>0))}At(e,n){return Li(e).get(n).next((r=>r?Ia(r):null))}}function Li(t){return It(t,_o)}function hv(t){return It(t,Xs)}function Xr(t){return It(t,yo)}const dv="LruGarbageCollector",jT=1048576;function fv([t,e],[n,r]){const s=be(t,n);return s===0?be(e,r):s}class IO{constructor(e){this.Ir=e,this.buffer=new je(fv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();fv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class zT{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(dv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Es(n)?Y(dv,"Ignoring IndexedDB error during garbage collection: ",n):await vs(n)}await this.Vr(3e5)}))}}class TO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return O.resolve(tn.ce);const r=new IO(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(uv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s)))).next((d=>(r=d,a=Date.now(),this.removeTargets(e,r,n)))).next((d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),zi()<=xe.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d}))))}}function KT(t,e){return new TO(t,e)}class AO{constructor(e,n){this.db=e,this.garbageCollector=KT(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,s)=>n(s)))}addReference(e,n,r){return cc(e,r)}removeReference(e,n,r){return cc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return cc(e,n)}br(e,n){return(function(s,i){let o=!1;return $T(s).te((a=>qT(s,a,i).next((l=>(l&&(o=!0),O.resolve(!l)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,((o,a)=>{if(a<=n){const l=this.br(e,o).next((u=>{if(!u)return i++,r.getEntry(e,o).next((()=>(r.removeEntry(o,me.min()),Xr(e).delete((function(d){return[0,Kt(d.path)]})(o)))))}));s.push(l)}})).next((()=>O.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return cc(e,n)}Sr(e,n){const r=Xr(e);let s,i=tn.ce;return r.ee({index:qp},(([o,a],{path:l,sequenceNumber:u})=>{o===0?(i!==tn.ce&&n(new ie(zn(s)),i),i=u,s=l):i=tn.ce})).next((()=>{i!==tn.ce&&n(new ie(zn(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cc(t,e){return Xr(t).put((function(r,s){return{targetId:0,path:Kt(r.path),sequenceNumber:s}})(e,t.currentSequenceNumber))}class HT{constructor(){this.changes=new Sr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class SO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return xs(e).put(r)}removeEntry(e,n,r){return xs(e).delete((function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Au(o),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=ot.newInvalidDocument(n);return xs(e).ee({index:Vc,range:IDBKeyRange.only(ua(n))},((s,i)=>{r=this.Cr(n,i)})).next((()=>r))}vr(e,n){let r={size:0,document:ot.newInvalidDocument(n)};return xs(e).ee({index:Vc,range:IDBKeyRange.only(ua(n))},((s,i)=>{r={document:this.Cr(n,i),size:Ru(i)}})).next((()=>r))}getEntries(e,n){let r=dn();return this.Fr(e,n,((s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)})).next((()=>r))}Mr(e,n){let r=dn(),s=new Qe(ie.comparator);return this.Fr(e,n,((i,o)=>{const a=this.Cr(i,o);r=r.insert(i,a),s=s.insert(i,Ru(o))})).next((()=>({documents:r,Or:s})))}Fr(e,n,r){if(n.isEmpty())return O.resolve();let s=new je(gv);n.forEach((l=>s=s.add(l)));const i=IDBKeyRange.bound(ua(s.first()),ua(s.last())),o=s.getIterator();let a=o.getNext();return xs(e).ee({index:Vc,range:i},((l,u,h)=>{const d=ie.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&gv(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.j(ua(a)):h.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Au(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xs(e).J(IDBKeyRange.bound(a,l,!0)).next((u=>{i?.incrementDocumentReadCount(u.length);let h=dn();for(const d of u){const p=this.Cr(ie.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);p.isFoundDocument()&&(Ol(n,p)||s.has(p.key))&&(h=h.insert(p.key,p))}return h}))}getAllFromCollectionGroup(e,n,r,s){let i=dn();const o=mv(n,r),a=mv(n,mn.max());return xs(e).ee({index:xI,range:IDBKeyRange.bound(o,a,!0)},((l,u,h)=>{const d=this.Cr(ie.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(d.key,d),i.size===s&&h.done()})).next((()=>i))}newChangeBuffer(e){return new RO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return pv(e).get(wf).next((n=>(fe(!!n,20021),n)))}Dr(e,n){return pv(e).put(wf,n)}Cr(e,n){if(n){const r=dO(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(me.min())))return r}return ot.newInvalidDocument(e)}}function GT(t){return new SO(t)}class RO extends HT{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Sr((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const n=[];let r=0,s=new je(((i,o)=>be(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=Yy(this.Nr.serializer,o);s=s.add(i.path.popLast());const u=Ru(l);r+=u-a.size,n.push(this.Nr.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=Yy(this.Nr.serializer,o.convertToNoDocument(me.min()));n.push(this.Nr.addEntry(e,i,l))}})),s.forEach((i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))})),n.push(this.Nr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:s})=>(s.forEach(((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})})),r)))}}function pv(t){return It(t,hl)}function xs(t){return It(t,yu)}function ua(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mv(t,e){const n=e.documentKey.path.toArray();return[t,Au(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function gv(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=be(n[i],r[i]),s)return s;return s=be(n.length,r.length),s||(s=be(n[n.length-2],r[r.length-2]),s||be(n[n.length-1],r[r.length-1]))}class CO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class WT{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Ha(r.mutation,s,nn.empty(),qe.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ce()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ce()){const s=Kn();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=wa();return i.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Kn();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ce())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,s){let i=dn();const o=Ka(),a=(function(){return Ka()})();return n.forEach(((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Rr)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Ha(h.mutation,u,h.mutation.getFieldMask(),qe.now())):o.set(u.key,nn.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>a.set(u,new CO(h,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=Ka();let s=new Qe(((o,a)=>o-a)),i=Ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||nn.empty();h=a.applyToLocalView(u,h),r.set(l,h);const d=(s.get(a.batchId)||Ce()).add(l);s=s.insert(a.batchId,d)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=uT();h.forEach((p=>{if(!i.has(p)){const g=_T(n.get(p),r.get(p));g!==null&&d.set(p,g),i=i.add(p)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return O.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(Kn());let a=mo,l=i;return o.next((u=>O.forEach(u,((h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{l=l.insert(h,p)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,Ce()))).next((h=>({batchId:a,changes:cT(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next((r=>{let s=wa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=wa();return this.indexManager.getCollectionParents(e,i).next((a=>O.forEach(a,(l=>{const u=(function(d,p){return new Lo(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((h=>{h.forEach(((d,p)=>{o=o.insert(d,p)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,ot.newInvalidDocument(h)))}));let a=wa();return o.forEach(((l,u)=>{const h=i.get(l);h!==void 0&&Ha(h.mutation,u,nn.empty(),qe.now()),Ol(n,u)&&(a=a.insert(l,u))})),a}))}}class PO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Xt(s.createTime)}})(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:MT(s.bundledQuery),readTime:Xt(s.readTime)}})(n)),O.resolve()}}class kO{constructor(){this.overlays=new Qe(ie.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Kn();return O.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=Kn(),i=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Qe(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Kn(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Kn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=s)););return O.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Zp(n,r));let i=this.qr.get(n);i===void 0&&(i=Ce(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class xO{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}class sm{constructor(){this.Qr=new je(Rt.$r),this.Ur=new je(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Rt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ie(new Me([])),r=new Rt(n,e),s=new Rt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ie(new Me([])),r=new Rt(n,e),s=new Rt(n,e+1);let i=Ce();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new Rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ie.comparator(e.key,n.key)||be(e.Yr,n.Yr)}static Kr(e,n){return be(e.Yr,n.Yr)||ie.comparator(e.key,n.key)}}class VO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new je(Rt.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Yp(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Rt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Ys:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rt(n,0),s=new Rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const a=this.Xr(o.Yr);i.push(a)})),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new je(be);return n.forEach((s=>{const i=new Rt(s,0),o=new Rt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(a=>{r=r.add(a.Yr)}))})),O.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new Rt(new ie(i),0);let a=new je(be);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Yr)),!0)}),o),O.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return O.forEach(n.mutations,(s=>{const i=new Rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Rt(n,0),s=this.Zr.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class DO{constructor(e){this.ri=e,this.docs=(function(){return new Qe(ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let r=dn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ot.newInvalidDocument(s))})),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=dn();const o=n.path,a=new ie(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Up(AI(h),r)<=0||(s.has(h.key)||Ol(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ce(9500)}ii(e,n){return O.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new NO(this)}getSize(e){return O.resolve(this.size)}}class NO extends HT{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class OO{constructor(e){this.persistence=e,this.si=new Sr((n=>ui(n)),Nl),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.oi=0,this._i=new sm,this.targetCount=0,this.ai=fi.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),O.waitFor(i).next((()=>s))}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}}class im{constructor(e,n){this.ui={},this.overlays={},this.ci=new tn(0),this.li=!1,this.li=!0,this.hi=new xO,this.referenceDelegate=e(this),this.Pi=new OO(this),this.indexManager=new EO,this.remoteDocumentCache=(function(s){return new DO(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new NT(n),this.Ii=new PO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new VO(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new MO(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return O.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class MO extends RI{constructor(e){super(),this.currentSequenceNumber=e}}class yh{constructor(e){this.persistence=e,this.Ri=new sm,this.Vi=null}static mi(e){return new yh(e)}get fi(){if(this.Vi)return this.Vi;throw ce(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,(r=>{const s=ie.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,me.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Cu{constructor(e,n){this.persistence=e,this.pi=new Sr((r=>Kt(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=KT(this,n)}static mi(e,n){return new Cu(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return O.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?O.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,i.removeEntry(o,me.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nc(e.data.value)),n}br(e,n,r){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return O.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class LO{constructor(e){this.serializer=e}k(e,n,r,s){const i=new sh("createOrUpgrade",n);r<1&&s>=1&&((function(l){l.createObjectStore(Dl)})(e),(function(l){l.createObjectStore(ul,{keyPath:XD}),l.createObjectStore(Rn,{keyPath:Ry,autoIncrement:!0}).createIndex(zs,Cy,{unique:!0}),l.createObjectStore(go)})(e),_v(e),(function(l){l.createObjectStore(Ls)})(e));let o=O.resolve();return r<3&&s>=3&&(r!==0&&((function(l){l.deleteObjectStore(yo),l.deleteObjectStore(_o),l.deleteObjectStore(Xs)})(e),_v(e)),o=o.next((()=>(function(l){const u=l.store(Xs),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:me.min().toTimestamp(),targetCount:0};return u.put(vu,h)})(i)))),r<4&&s>=4&&(r!==0&&(o=o.next((()=>(function(l,u){return u.store(Rn).J().next((d=>{l.deleteObjectStore(Rn),l.createObjectStore(Rn,{keyPath:Ry,autoIncrement:!0}).createIndex(zs,Cy,{unique:!0});const p=u.store(Rn),g=d.map((T=>p.put(T)));return O.waitFor(g)}))})(e,i)))),o=o.next((()=>{(function(l){l.createObjectStore(vo,{keyPath:aN})})(e)}))),r<5&&s>=5&&(o=o.next((()=>this.yi(i)))),r<6&&s>=6&&(o=o.next((()=>((function(l){l.createObjectStore(hl)})(e),this.wi(i))))),r<7&&s>=7&&(o=o.next((()=>this.Si(i)))),r<8&&s>=8&&(o=o.next((()=>this.bi(e,i)))),r<9&&s>=9&&(o=o.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(o=o.next((()=>this.Di(i)))),r<11&&s>=11&&(o=o.next((()=>{(function(l){l.createObjectStore(oh,{keyPath:lN})})(e),(function(l){l.createObjectStore(ah,{keyPath:cN})})(e)}))),r<12&&s>=12&&(o=o.next((()=>{(function(l){const u=l.createObjectStore(lh,{keyPath:gN});u.createIndex(If,_N,{unique:!1}),u.createIndex(OI,yN,{unique:!1})})(e)}))),r<13&&s>=13&&(o=o.next((()=>(function(l){const u=l.createObjectStore(yu,{keyPath:eN});u.createIndex(Vc,tN),u.createIndex(xI,nN)})(e))).next((()=>this.Ci(e,i))).next((()=>e.deleteObjectStore(Ls)))),r<14&&s>=14&&(o=o.next((()=>this.Fi(e,i)))),r<15&&s>=15&&(o=o.next((()=>(function(l){l.createObjectStore($p,{keyPath:uN,autoIncrement:!0}).createIndex(bf,hN,{unique:!1}),l.createObjectStore(qa,{keyPath:dN}).createIndex(DI,fN,{unique:!1}),l.createObjectStore($a,{keyPath:pN}).createIndex(NI,mN,{unique:!1})})(e)))),r<16&&s>=16&&(o=o.next((()=>{n.objectStore(qa).clear()})).next((()=>{n.objectStore($a).clear()}))),r<17&&s>=17&&(o=o.next((()=>{(function(l){l.createObjectStore(jp,{keyPath:vN})})(e)}))),r<18&&s>=18&&Sb()&&(o=o.next((()=>{n.objectStore(qa).clear()})).next((()=>{n.objectStore($a).clear()}))),o}wi(e){let n=0;return e.store(Ls).ee(((r,s)=>{n+=Ru(s)})).next((()=>{const r={byteSize:n};return e.store(hl).put(wf,r)}))}yi(e){const n=e.store(ul),r=e.store(Rn);return n.J().next((s=>O.forEach(s,(i=>{const o=IDBKeyRange.bound([i.userId,Ys],[i.userId,i.lastAcknowledgedBatchId]);return r.J(zs,o).next((a=>O.forEach(a,(l=>{fe(l.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=Bs(this.serializer,l);return BT(e,i.userId,u).next((()=>{}))}))))}))))}Si(e){const n=e.store(yo),r=e.store(Ls);return e.store(Xs).get(vu).next((s=>{const i=[];return r.ee(((o,a)=>{const l=new Me(o),u=(function(d){return[0,Kt(d)]})(l);i.push(n.get(u).next((h=>h?O.resolve():(d=>n.put({targetId:0,path:Kt(d),sequenceNumber:s.highestListenSequenceNumber}))(l))))})).next((()=>O.waitFor(i)))}))}bi(e,n){e.createObjectStore(dl,{keyPath:oN});const r=n.store(dl),s=new rm,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Kt(l)})}};return n.store(Ls).ee({X:!0},((o,a)=>{const l=new Me(o);return i(l.popLast())})).next((()=>n.store(go).ee({X:!0},(([o,a,l],u)=>{const h=zn(a);return i(h.popLast())}))))}Di(e){const n=e.store(_o);return n.ee(((r,s)=>{const i=Ia(s),o=OT(this.serializer,i);return n.put(o)}))}Ci(e,n){const r=n.store(Ls),s=[];return r.ee(((i,o)=>{const a=n.store(yu),l=(function(d){return d.document?new ie(Me.fromString(d.document.name).popFirst(5)):d.noDocument?ie.fromSegments(d.noDocument.path):d.unknownDocument?ie.fromSegments(d.unknownDocument.path):ce(36783)})(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))})).next((()=>O.waitFor(s)))}Fi(e,n){const r=n.store(Rn),s=GT(this.serializer),i=new im(yh.mi,this.serializer.yt);return r.J().next((o=>{const a=new Map;return o.forEach((l=>{let u=a.get(l.userId)??Ce();Bs(this.serializer,l).keys().forEach((h=>u=u.add(h))),a.set(l.userId,u)})),O.forEach(a,((l,u)=>{const h=new Ft(u),d=gh.wt(this.serializer,h),p=i.getIndexManager(h),g=_h.wt(h,this.serializer,p,i.referenceDelegate);return new WT(s,g,d,p).recalculateAndSaveOverlaysForDocumentKeys(new Tf(n,tn.ce),l).next()}))}))}}function _v(t){t.createObjectStore(yo,{keyPath:sN}).createIndex(qp,iN,{unique:!0}),t.createObjectStore(_o,{keyPath:"targetId"}).createIndex(VI,rN,{unique:!0}),t.createObjectStore(Xs)}const Ur="IndexedDbPersistence",Ed=18e5,wd=5e3,bd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",FO="main";class om{constructor(e,n,r,s,i,o,a,l,u,h,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=o,this.document=a,this.xi=u,this.Oi=h,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!om.v())throw new te(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AO(this,s),this.$i=n+FO,this.serializer=new NT(l),this.Ui=new os(this.$i,this.Ni,new LO(this.serializer)),this.hi=new pO,this.Pi=new bO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=GT(this.serializer),this.Ii=new fO,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&ct(Ur,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new te(z.FAILED_PRECONDITION,bd);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new tn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>uc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Es(e))return Y(Ur,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Y(Ur,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return ha(e).get(Vi).next((n=>O.resolve(this.es(n))))}ts(e){return uc(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ed)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=It(n,vo);return r.J().next((s=>{const i=this.ss(s,Ed),o=s.filter((a=>i.indexOf(a)===-1));return O.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?O.resolve(!0):ha(e).get(Vi).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,wd)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new te(z.FAILED_PRECONDITION,bd);return!1}}return!(!this.networkEnabled||!this.inForeground)||uc(e).J().next((r=>this.ss(r,wd).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&Y(Ur,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Dl,vo],(e=>{const n=new Tf(e,tn.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>uc(e).J().next((n=>this.ss(n,Ed).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return _h.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wO(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return gh.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y(Ur,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(function(l){return l===18?bN:l===17?UI:l===16?wN:l===15?zp:l===14?FI:l===13?LI:l===12?EN:l===11?MI:void ce(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,s,i,(a=>(o=new Tf(a,this.ci?this.ci.next():tn.ce),n==="readwrite-primary"?this.Hi(o).next((l=>!!l||this.Yi(o))).next((l=>{if(!l)throw ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new te(z.FAILED_PRECONDITION,SI);return r(o)})).next((l=>this.Xi(o).next((()=>l)))):this.Is(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Is(e){return ha(e).get(Vi).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,wd)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new te(z.FAILED_PRECONDITION,bd)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ha(e).put(Vi,n)}static v(){return os.v()}Zi(e){const n=ha(e);return n.get(Vi).next((r=>this.es(r)?(Y(Ur,"Releasing primary lease."),n.delete(Vi)):O.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(ct(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;Ab()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return Y(Ur,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ct(Ur,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ct("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ha(t){return It(t,Dl)}function uc(t){return It(t,vo)}function QT(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class am{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ce(),s=Ce();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new am(e,n.fromCache,r,s)}}class UO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class JT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Ab()?8:CI(bt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new UO;return this.Ss(e,n,o).next((a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(zi()<=xe.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Ki(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(zi()<=xe.DEBUG&&Y("QueryEngine","Query:",Ki(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(zi()<=xe.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Ki(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(n))):O.resolve())}ys(e,n){if(qy(n))return O.resolve(null);let r=pn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=xf(n,null,"F"),r=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Ce(...i);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,xf(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,s){return qy(n)||s.isEqual(me.min())?O.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?O.resolve(null):(zi()<=xe.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ki(n)),this.vs(e,o,n,TI(s,mo)).next((a=>a)))}))}Ds(e,n){let r=new je(aT(e));return n.forEach(((s,i)=>{Ol(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return zi()<=xe.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Ki(n)),this.ps.getDocumentsMatchingQuery(e,n,mn.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const lm="LocalStore",BO=3e8;class qO{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Qe(be),this.xs=new Sr((i=>ui(i)),Nl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function YT(t,e,n,r){return new qO(t,e,n,r)}async function XT(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],a=[];let l=Ce();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function $O(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,h){const d=u.batch,p=d.keys();let g=O.resolve();return p.forEach((T=>{g=g.next((()=>h.getEntry(l,T))).next((P=>{const C=u.docVersions.get(T);fe(C!==null,48541),P.version.compareTo(C)<0&&(d.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),h.addEntry(P)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,d)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=Ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function ZT(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function jO(t,e){const n=he(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach(((h,d)=>{const p=s.get(d);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d))));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ft.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(d,g),(function(P,C,D){return P.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=BO?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(p,g,h)&&a.push(n.Pi.updateTargetData(i,g))}));let l=dn(),u=Ce();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),a.push(zO(i,o,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!r.isEqual(me.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));a.push(h)}return O.waitFor(a).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function zO(t,e,n){let r=Ce(),s=Ce();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=dn();return n.forEach(((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Y(lm,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function KO(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ys),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Pu(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,O.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new fr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Co(t,e,n){const r=he(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Es(o))throw o;Y(lm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Uf(t,e,n){const r=he(t);let s=me.min(),i=Ce();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,h){const d=he(l),p=d.xs.get(h);return p!==void 0?O.resolve(d.Ms.get(p)):d.Pi.getTargetData(u,h)})(r,o,pn(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:me.min(),n?i:Ce()))).next((a=>(nA(r,oT(e),a),{documents:a,Qs:i})))))}function eA(t,e){const n=he(t),r=he(n.Pi),s=n.Ms.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(i=>r.At(i,e).next((o=>o?o.target:null))))}function tA(t,e){const n=he(t),r=n.Os.get(e)||me.min();return n.persistence.runTransaction("Get new document changes","readonly",(s=>n.Ns.getAllFromCollectionGroup(s,e,TI(r,mo),Number.MAX_SAFE_INTEGER))).then((s=>(nA(n,e,s),s)))}function nA(t,e,n){let r=t.Os.get(e)||me.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}const rA="firestore_clients";function yv(t,e){return`${rA}_${t}_${e}`}const sA="firestore_mutations";function vv(t,e,n){let r=`${sA}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const iA="firestore_targets";function Id(t,e){return`${iA}_${t}_${e}`}const $n="SharedClientState";class ku{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ws(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new te(s.error.code,s.error.message))),o?new ku(e,n,s.state,i):(ct($n,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ga{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new te(r.error.code,r.error.message))),i?new Ga(e,r.state,s):(ct($n,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xu{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Qp();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=PI(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new xu(e,i):(ct($n,`Failed to parse client data for instance '${e}': ${n}`),null)}}class cm{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new cm(n.clientId,n.onlineState):(ct($n,`Failed to parse online state: ${e}`),null)}}class Bf{constructor(){this.activeTargetIds=Qp()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Td{constructor(e,n,r,s,i){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Qe(be),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=yv(this.persistenceKey,this.Js),this.no=(function(l){return`firestore_sequence_number_${l}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Bf),this.ro=new RegExp(`^${rA}_${o}_([^_]*)$`),this.io=new RegExp(`^${sA}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${iA}_${o}_(\\d+)$`),this.oo=(function(l){return`firestore_online_state_${l}`})(this.persistenceKey),this._o=(function(l){return`firestore_bundle_loaded_v2_${l}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(yv(this.persistenceKey,r));if(s){const i=xu.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Id(this.persistenceKey,e));if(s){const i=Ga.Ws(e,s);i&&(r=i.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Id(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((s=>{this.Po(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Y($n,"READ",e,n),n}setItem(e,n){Y($n,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Y($n,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(Y($n,"EVENT",n.key,n.newValue),n.key===this.eo)return void ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(i){let o=tn.ce;if(i!=null)try{const a=JSON.parse(i);fe(typeof a=="number",30636,{So:i}),o=a}catch(a){ct($n,"Failed to read sequence number from WebStorage",a)}return o})(n.newValue);r!==tn.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const s=new ku(this.currentUser,e,n,r),i=vv(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const n=vv(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const s=Id(this.persistenceKey,e),i=new Ga(e,n,r);this.setItem(s,i.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return xu.Ws(r,n)}fo(e,n){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return ku.Ws(new Ft(i),s,n)}yo(e,n){const r=this.so.exec(e),s=Number(r[1]);return Ga.Ws(s,n)}uo(e){return cm.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Y($n,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],a=[];return i.forEach((l=>{s.has(l)||o.push(l)})),s.forEach((l=>{i.has(l)||a.push(l)})),this.syncEngine.Fo(o,a).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Qp();return e.forEach(((r,s)=>{n=n.unionWith(s.activeTargetIds)})),n}}class oA{constructor(){this.Mo=new Bf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Bf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class HO{Oo(e){}shutdown(){}}const Ev="ConnectivityMonitor";class wv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(Ev,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(Ev,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let hc=null;function qf(){return hc===null?hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():hc++,"0x"+hc.toString(16)}const Ad="RestConnection",GO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class WO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Eu?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=qf(),a=this.zo(e,n.toUriEncodedString());Y(Ad,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(a),h=_s(u);return this.Jo(e,a,l,r,h).then((d=>(Y(Ad,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw al(Ad,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=GO[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class QO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ot="WebChannelConnection";class JO extends WO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=qf();return new Promise(((a,l)=>{const u=new mI;u.setWithCredentials(!0),u.listenOnce(gI.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Pc.NO_ERROR:const d=u.getResponseJson();Y(Ot,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case Pc.TIMEOUT:Y(Ot,`RPC '${e}' ${o} timed out`),l(new te(z.DEADLINE_EXCEEDED,"Request time out"));break;case Pc.HTTP_ERROR:const p=u.getStatus();if(Y(Ot,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const T=g?.error;if(T&&T.status&&T.message){const P=(function(D){const S=D.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(S)>=0?S:z.UNKNOWN})(T.status);l(new te(P,T.message))}else l(new te(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new te(z.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Y(Ot,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(s);Y(Ot,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)}))}T_(e,n,r){const s=qf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vI(),a=yI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");Y(Ot,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);this.I_(d);let p=!1,g=!1;const T=new QO({Yo:C=>{g?Y(Ot,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(p||(Y(Ot,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),Y(Ot,`RPC '${e}' stream ${s} sending:`,C),d.send(C))},Zo:()=>d.close()}),P=(C,D,S)=>{C.listen(D,(x=>{try{S(x)}catch(V){setTimeout((()=>{throw V}),0)}}))};return P(d,Ea.EventType.OPEN,(()=>{g||(Y(Ot,`RPC '${e}' stream ${s} transport opened.`),T.o_())})),P(d,Ea.EventType.CLOSE,(()=>{g||(g=!0,Y(Ot,`RPC '${e}' stream ${s} transport closed`),T.a_(),this.E_(d))})),P(d,Ea.EventType.ERROR,(C=>{g||(g=!0,al(Ot,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),T.a_(new te(z.UNAVAILABLE,"The operation could not be completed")))})),P(d,Ea.EventType.MESSAGE,(C=>{if(!g){const D=C.data[0];fe(!!D,16349);const S=D,x=S?.error||S[0]?.error;if(x){Y(Ot,`RPC '${e}' stream ${s} received error:`,x);const V=x.status;let L=(function(y){const w=gt[y];if(w!==void 0)return ET(w)})(V),q=x.message;L===void 0&&(L=z.INTERNAL,q="Unknown error status: "+V+" with message "+x.message),g=!0,T.a_(new te(L,q)),d.close()}else Y(Ot,`RPC '${e}' stream ${s} received:`,D),T.u_(D)}})),P(a,_I.STAT_EVENT,(C=>{C.stat===yf.PROXY?Y(Ot,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===yf.NOPROXY&&Y(Ot,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{T.__()}),0),T}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function aA(){return typeof window<"u"?window:null}function Uc(){return typeof document<"u"?document:null}function vh(t){return new nO(t,!0)}class lA{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const bv="PersistentStream";class cA{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(ct(n.toString()),ct("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new te(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Y(bv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Y(bv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class YO extends cA{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=iO(this.serializer,e),r=(function(i){if(!("targetChange"in i))return me.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?Xt(o.readTime):me.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Nf(this.serializer),n.addTarget=(function(i,o){let a;const l=o.target;if(a=wu(l)?{documents:CT(i,l)}:{query:PT(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=IT(i,o.resumeToken);const u=Vf(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=Ro(i,o.snapshotVersion.toTimestamp());const u=Vf(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=aO(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Nf(this.serializer),n.removeTarget=e,this.q_(n)}}class XO extends cA{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=oO(e.writeResults,e.commitTime),r=Xt(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Nf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Tu(this.serializer,r)))};this.q_(n)}}class ZO{}class eM extends ZO{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Df(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(z.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Df(n,r),s,o,a,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(z.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class tM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ct(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const pi="RemoteStore";class nM{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{wi(this)&&(Y(pi,"Restarting streams for network reachability change."),await(async function(l){const u=he(l);u.Ea.add(4),await Fl(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Eh(u)})(this))}))})),this.Ra=new tM(r,s)}}async function Eh(t){if(wi(t))for(const e of t.da)await e(!0)}async function Fl(t){for(const e of t.da)await e(!1)}function wh(t,e){const n=he(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),dm(n)?hm(n):Bo(n).O_()&&um(n,e))}function Po(t,e){const n=he(t),r=Bo(n);n.Ia.delete(e),r.O_()&&uA(n,e),n.Ia.size===0&&(r.O_()?r.L_():wi(n)&&n.Ra.set("Unknown"))}function um(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bo(t).Y_(e)}function uA(t,e){t.Va.Ue(e),Bo(t).Z_(e)}function hm(t){t.Va=new XN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Bo(t).start(),t.Ra.ua()}function dm(t){return wi(t)&&!Bo(t).x_()&&t.Ia.size>0}function wi(t){return he(t).Ea.size===0}function hA(t){t.Va=void 0}async function rM(t){t.Ra.set("Online")}async function sM(t){t.Ia.forEach(((e,n)=>{um(t,e)}))}async function iM(t,e){hA(t),dm(t)?(t.Ra.ha(e),hm(t)):t.Ra.set("Unknown")}async function oM(t,e,n){if(t.Ra.set("Online"),e instanceof bT&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))})(t,e)}catch(r){Y(pi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vu(t,r)}else if(e instanceof Lc?t.Va.Ze(e):e instanceof wT?t.Va.st(e):t.Va.tt(e),!n.isEqual(me.min()))try{const r=await ZT(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(ft.EMPTY_BYTE_STRING,h.snapshotVersion)),uA(i,l);const d=new fr(h.target,l,u,h.sequenceNumber);um(i,d)})),i.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){Y(pi,"Failed to raise snapshot:",r),await Vu(t,r)}}async function Vu(t,e,n){if(!Es(e))throw e;t.Ea.add(1),await Fl(t),t.Ra.set("Offline"),n||(n=()=>ZT(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Y(pi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Eh(t)}))}function dA(t,e){return e().catch((n=>Vu(t,n,e)))}async function Uo(t){const e=he(t),n=ps(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ys;for(;aM(e);)try{const s=await KO(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,lM(e,s)}catch(s){await Vu(e,s)}fA(e)&&pA(e)}function aM(t){return wi(t)&&t.Ta.length<10}function lM(t,e){t.Ta.push(e);const n=ps(t);n.O_()&&n.X_&&n.ea(e.mutations)}function fA(t){return wi(t)&&!ps(t).x_()&&t.Ta.length>0}function pA(t){ps(t).start()}async function cM(t){ps(t).ra()}async function uM(t){const e=ps(t);for(const n of t.Ta)e.ea(n.mutations)}async function hM(t,e,n){const r=t.Ta.shift(),s=Xp.from(r,e,n);await dA(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Uo(t)}async function dM(t,e){e&&ps(t).X_&&await(async function(r,s){if((function(o){return QN(o)&&o!==z.ABORTED})(s.code)){const i=r.Ta.shift();ps(r).B_(),await dA(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Uo(r)}})(t,e),fA(t)&&pA(t)}async function Iv(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),Y(pi,"RemoteStore received new credentials");const r=wi(n);n.Ea.add(3),await Fl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Eh(n)}async function $f(t,e){const n=he(t);e?(n.Ea.delete(2),await Eh(n)):e||(n.Ea.add(2),await Fl(n),n.Ra.set("Unknown"))}function Bo(t){return t.ma||(t.ma=(function(n,r,s){const i=he(n);return i.sa(),new YO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:rM.bind(null,t),t_:sM.bind(null,t),r_:iM.bind(null,t),H_:oM.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),dm(t)?hm(t):t.Ra.set("Unknown")):(await t.ma.stop(),hA(t))}))),t.ma}function ps(t){return t.fa||(t.fa=(function(n,r,s){const i=he(n);return i.sa(),new XO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:cM.bind(null,t),r_:dM.bind(null,t),ta:uM.bind(null,t),na:hM.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Uo(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(pi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class fm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new fm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pm(t,e){if(ct("AsyncQueue",`${e}: ${t}`),Es(t))return new te(z.UNAVAILABLE,`${e}: ${t}`);throw t}class ao{static emptySet(e){return new ao(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=wa(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ao;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Tv{constructor(){this.ga=new Qe(ie.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class ko{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new ko(e,n,ao.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class fM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class pM{constructor(){this.queries=Av(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=Av(),i.forEach(((o,a)=>{for(const l of a.Sa)l.onError(r)}))})(this,new te(z.ABORTED,"Firestore shutting down"))}}function Av(){return new Sr((t=>iT(t)),dh)}async function mA(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new fM,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=pm(o,`Initialization of query '${Ki(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&mm(n)}async function gA(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function mM(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&mm(n)}function gM(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function mm(t){t.Ca.forEach((e=>{e.next()}))}var jf,Sv;(Sv=jf||(jf={})).Ma="default",Sv.Cache="cache";class _A{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ko(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jf.Cache}}class yA{constructor(e){this.key=e}}class vA{constructor(e){this.key=e}}class _M{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ce(),this.mutatedKeys=Ce(),this.eu=aT(e),this.tu=new ao(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Tv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,d)=>{const p=s.get(h),g=Ol(this.query,d)?d:null,T=!!p&&this.mutatedKeys.has(p.key),P=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;p&&g?p.data.isEqual(g.data)?T!==P&&(r.track({type:3,doc:g}),C=!0):this.su(p,g)||(r.track({type:2,doc:g}),C=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),C=!0):p&&!g&&(r.track({type:1,doc:p}),C=!0,(l||u)&&(a=!0)),C&&(g?(o=o.add(g),i=P?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,d)=>(function(g,T){const P=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{Rt:C})}};return P(g)-P(T)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new ko(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ce(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new vA(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new yA(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ko.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qo="SyncEngine";class yM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vM{constructor(e){this.key=e,this.hu=!1}}class EM{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Sr((a=>iT(a)),dh),this.Iu=new Map,this.Eu=new Set,this.du=new Qe(ie.comparator),this.Au=new Map,this.Ru=new sm,this.Vu={},this.mu=new Map,this.fu=fi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wM(t,e,n=!0){const r=bh(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await EA(r,e,n,!0),s}async function bM(t,e){const n=bh(t);await EA(n,e,!0,!1)}async function EA(t,e,n,r){const s=await Pu(t.localStore,pn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await gm(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&wh(t.remoteStore,s),a}async function gm(t,e,n,r,s){t.pu=(d,p,g)=>(async function(P,C,D,S){let x=C.view.ru(D);x.Cs&&(x=await Uf(P.localStore,C.query,!1).then((({documents:A})=>C.view.ru(A,x))));const V=S&&S.targetChanges.get(C.targetId),L=S&&S.targetMismatches.get(C.targetId)!=null,q=C.view.applyChanges(x,P.isPrimaryClient,V,L);return zf(P,C.targetId,q.au),q.snapshot})(t,d,p,g);const i=await Uf(t.localStore,e,!0),o=new _M(e,i.Qs),a=o.ru(i.documents),l=Ll.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);zf(t,n,u.au);const h=new yM(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function IM(t,e,n){const r=he(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!dh(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Co(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Po(r.remoteStore,s.targetId),xo(r,s.targetId)})).catch(vs)):(xo(r,s.targetId),await Co(r.localStore,s.targetId,!0))}async function TM(t,e){const n=he(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Po(n.remoteStore,r.targetId))}async function AM(t,e,n){const r=Em(t);try{const s=await(function(o,a){const l=he(o),u=qe.now(),h=a.reduce(((g,T)=>g.add(T.key)),Ce());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let T=dn(),P=Ce();return l.Ns.getEntries(g,h).next((C=>{T=C,T.forEach(((D,S)=>{S.isValidDocument()||(P=P.add(D))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,T))).next((C=>{d=C;const D=[];for(const S of a){const x=GN(S,d.get(S.key).overlayedDocument);x!=null&&D.push(new Rr(S.key,x,QI(x.value.mapValue),zt.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,D,a)})).next((C=>{p=C;const D=C.applyToLocalDocumentSet(d,P);return l.documentOverlayCache.saveOverlays(g,C.batchId,D)}))})).then((()=>({batchId:p.batchId,changes:cT(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Qe(be)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await bs(r,s.changes),await Uo(r.remoteStore)}catch(s){const i=pm(s,"Failed to persist write");n.reject(i)}}async function wA(t,e){const n=he(t);try{const r=await jO(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?fe(o.hu,14607):s.removedDocuments.size>0&&(fe(o.hu,42227),o.hu=!1))})),await bs(n,r,e)}catch(r){await vs(r)}}function Rv(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const l=he(o);l.onlineState=a;let u=!1;l.queries.forEach(((h,d)=>{for(const p of d.Sa)p.va(a)&&(u=!0)})),u&&mm(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SM(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Qe(ie.comparator);o=o.insert(i,ot.newNoDocument(i,me.min()));const a=Ce().add(i),l=new Ml(me.min(),new Map,new Qe(be),o,a);await wA(r,l),r.du=r.du.remove(i),r.Au.delete(e),vm(r)}else await Co(r.localStore,e,!1).then((()=>xo(r,e,n))).catch(vs)}async function RM(t,e){const n=he(t),r=e.batch.batchId;try{const s=await $O(n.localStore,e);ym(n,r,null),_m(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await bs(n,s)}catch(s){await vs(s)}}async function CM(t,e,n){const r=he(t);try{const s=await(function(o,a){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next((d=>(fe(d!==null,37113),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);ym(r,e,n),_m(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await bs(r,s)}catch(s){await vs(s)}}function _m(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function ym(t,e,n){const r=he(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function xo(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||bA(t,r)}))}function bA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Po(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),vm(t))}function zf(t,e,n){for(const r of n)r instanceof yA?(t.Ru.addReference(r.key,e),PM(t,r)):r instanceof vA?(Y(qo,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||bA(t,r.key)):ce(19791,{wu:r})}function PM(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Y(qo,"New document in limbo: "+n),t.Eu.add(r),vm(t))}function vm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ie(Me.fromString(e)),r=t.fu.next();t.Au.set(r,new vM(n)),t.du=t.du.insert(n,r),wh(t.remoteStore,new fr(pn(hh(n.path)),r,"TargetPurposeLimboResolution",tn.ce))}}async function bs(t,e,n){const r=he(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){s.push(u);const h=am.As(l.targetId,u);i.push(h)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const h=he(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>O.forEach(u,(p=>O.forEach(p.Es,(g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g))).next((()=>O.forEach(p.ds,(g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))))))}catch(d){if(!Es(d))throw d;Y(lm,"Failed to update sequence numbers: "+d)}for(const d of u){const p=d.targetId;if(!d.fromCache){const g=h.Ms.get(p),T=g.snapshotVersion,P=g.withLastLimboFreeSnapshotVersion(T);h.Ms=h.Ms.insert(p,P)}}})(r.localStore,i))}async function kM(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){Y(qo,"User change. New user:",e.toKey());const r=await XT(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((a=>{a.forEach((l=>{l.reject(new te(z.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bs(n,r.Ls)}}function xM(t,e){const n=he(t),r=n.Au.get(e);if(r&&r.hu)return Ce().add(r.key);{let s=Ce();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function VM(t,e){const n=he(t),r=await Uf(n.localStore,e.query,!0),s=e.view.cu(r);return n.isPrimaryClient&&zf(n,e.targetId,s.au),s}async function DM(t,e){const n=he(t);return tA(n.localStore,e).then((r=>bs(n,r)))}async function NM(t,e,n,r){const s=he(t),i=await(function(a,l){const u=he(a),h=he(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(d=>h.er(d,l).next((p=>p?u.localDocuments.getDocuments(d,p):O.resolve(null)))))})(s.localStore,e);i!==null?(n==="pending"?await Uo(s.remoteStore):n==="acknowledged"||n==="rejected"?(ym(s,e,r||null),_m(s,e),(function(a,l){he(he(a).mutationQueue).ir(l)})(s.localStore,e)):ce(6720,"Unknown batchState",{Su:n}),await bs(s,i)):Y(qo,"Cannot apply mutation batch with id: "+e)}async function OM(t,e){const n=he(t);if(bh(n),Em(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await Cv(n,r.toArray());n.gu=!0,await $f(n.remoteStore,!0);for(const i of s)wh(n.remoteStore,i)}else if(e===!1&&n.gu!==!1){const r=[];let s=Promise.resolve();n.Iu.forEach(((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then((()=>(xo(n,o),Co(n.localStore,o,!0)))),Po(n.remoteStore,o)})),await s,await Cv(n,r),(function(o){const a=he(o);a.Au.forEach(((l,u)=>{Po(a.remoteStore,u)})),a.Ru.Jr(),a.Au=new Map,a.du=new Qe(ie.comparator)})(n),n.gu=!1,await $f(n.remoteStore,!1)}}async function Cv(t,e,n){const r=he(t),s=[],i=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await Pu(r.localStore,pn(l[0]));for(const u of l){const h=r.Tu.get(u),d=await VM(r,h);d.snapshot&&i.push(d.snapshot)}}else{const u=await eA(r.localStore,o);a=await Pu(r.localStore,u),await gm(r,IA(u),o,!1,a.resumeToken)}s.push(a)}return r.Pu.H_(i),s}function IA(t){return rT(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function MM(t){return(function(n){return he(he(n).persistence).Ts()})(he(t).localStore)}async function LM(t,e,n,r){const s=he(t);if(s.gu)return void Y(qo,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await tA(s.localStore,oT(i[0])),a=Ml.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ft.EMPTY_BYTE_STRING);await bs(s,o,a);break}case"rejected":await Co(s.localStore,e,!0),xo(s,e,r);break;default:ce(64155,n)}}async function FM(t,e,n){const r=bh(t);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){Y(qo,"Adding an already active target "+s);continue}const i=await eA(r.localStore,s),o=await Pu(r.localStore,i);await gm(r,IA(i),o.targetId,!1,o.resumeToken),wh(r.remoteStore,o)}for(const s of n)r.Iu.has(s)&&await Co(r.localStore,s,!1).then((()=>{Po(r.remoteStore,s),xo(r,s)})).catch(vs)}}function bh(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SM.bind(null,e),e.Pu.H_=mM.bind(null,e.eventManager),e.Pu.yu=gM.bind(null,e.eventManager),e}function Em(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CM.bind(null,e),e}class vl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return YT(this.persistence,new JT,e.initialUser,this.serializer)}Cu(e){return new im(yh.mi,this.serializer)}Du(e){return new oA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vl.provider={build:()=>new vl};class UM extends vl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){fe(this.persistence.referenceDelegate instanceof Cu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new zT(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new im((r=>Cu.mi(r,n)),this.serializer)}}class TA extends vl{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Em(this.xu.syncEngine),await Uo(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return YT(this.persistence,new JT,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new zT(r,e.asyncQueue,n)}Mu(e,n){const r=new JD(n,this.persistence);return new QD(e.asyncQueue,r)}Cu(e){const n=QT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new om(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,aA(),Uc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new oA}}class BM extends TA{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Td&&(this.sharedClientState.syncEngine={Co:NM.bind(null,n),vo:LM.bind(null,n),Fo:FM.bind(null,n),Ts:MM.bind(null,n),Do:DM.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await OM(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=aA();if(!Td.v(n))throw new te(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=QT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Td(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class El{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kM.bind(null,this.syncEngine),await $f(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new pM})()}createDatastore(e){const n=vh(e.databaseInfo.databaseId),r=(function(i){return new JO(i)})(e.databaseInfo);return(function(i,o,a,l){return new eM(i,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,a){return new nM(r,s,i,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>Rv(this.syncEngine,n,0)),(function(){return wv.v()?new wv:new HO})())}createSyncEngine(e,n){return(function(s,i,o,a,l,u,h){const d=new EM(s,i,o,a,l,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=he(n);Y(pi,"RemoteStore shutting down."),r.Ea.add(5),await Fl(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}El.provider={build:()=>new El};class AA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ct("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ms="FirestoreClient";class qM{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ft.UNAUTHENTICATED,this.clientId=Fp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{Y(ms,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Y(ms,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pm(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Sd(t,e){t.asyncQueue.verifyOperationInProgress(),Y(ms,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await XT(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Pv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $M(t);Y(ms,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Iv(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Iv(e.remoteStore,s))),t._onlineComponents=e}async function $M(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(ms,"Using user provided OfflineComponentProvider");try{await Sd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;al("Error using user provided cache. Falling back to memory cache: "+n),await Sd(t,new vl)}}else Y(ms,"Using default OfflineComponentProvider"),await Sd(t,new UM(void 0));return t._offlineComponents}async function SA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(ms,"Using user provided OnlineComponentProvider"),await Pv(t,t._uninitializedComponentsProvider._online)):(Y(ms,"Using default OnlineComponentProvider"),await Pv(t,new El))),t._onlineComponents}function jM(t){return SA(t).then((e=>e.syncEngine))}async function RA(t){const e=await SA(t),n=e.eventManager;return n.onListen=wM.bind(null,e.syncEngine),n.onUnlisten=IM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TM.bind(null,e.syncEngine),n}function zM(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new AA({next:p=>{h.Nu(),o.enqueueAndForget((()=>gA(i,d)));const g=p.docs.has(a);!g&&p.fromCache?u.reject(new te(z.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?u.reject(new te(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new _A(hh(a.path),h,{includeMetadataChanges:!0,qa:!0});return mA(i,d)})(await RA(t),t.asyncQueue,e,n,r))),r.promise}function KM(t,e,n={}){const r=new Yn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,a,l,u){const h=new AA({next:p=>{h.Nu(),o.enqueueAndForget((()=>gA(i,d))),p.fromCache&&l.source==="server"?u.reject(new te(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),d=new _A(a,h,{includeMetadataChanges:!0,qa:!0});return mA(i,d)})(await RA(t),t.asyncQueue,e,n,r))),r.promise}function CA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const kv=new Map;const HM="firestore.googleapis.com",xv=!0;class Vv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HM,this.ssl=xv}else this.host=e.host,this.ssl=e.ssl??xv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jT)throw new te(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new LD;switch(r.type){case"firstParty":return new BD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new te(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=kv.get(n);r&&(Y("ComponentProvider","Removing Datastore"),kv.delete(n),r.terminate())})(this),Promise.resolve()}}class bi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bi(this.firestore,e,this._query)}}class ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}toJSON(){return{type:ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Vl(n,ht._jsonSchema))return new ht(e,r||null,new ie(Me.fromString(n.referencePath)))}}ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:_t("string",ht._jsonSchemaVersion),referencePath:_t("string")};class as extends bi{constructor(e,n,r){super(e,n,hh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new ie(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function rB(t,e,...n){if(t=et(t),bI("collection","path",e),t instanceof wm){const r=Me.fromString(e,...n);return by(r),new as(t,null,r)}{if(!(t instanceof ht||t instanceof as))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return by(r),new as(t.firestore,null,r)}}function Ta(t,e,...n){if(t=et(t),arguments.length===1&&(e=Fp.newId()),bI("doc","path",e),t instanceof wm){const r=Me.fromString(e,...n);return wy(r),new ht(t,null,new ie(r))}{if(!(t instanceof ht||t instanceof as))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Me.fromString(e,...n));return wy(r),new ht(t.firestore,t instanceof as?t.converter:null,new ie(r))}}const Dv="AsyncQueue";class Nv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lA(this,"async_queue_retry"),this._c=()=>{const r=Uc();r&&Y(Dv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Uc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Uc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Yn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Es(e))throw e;Y(Dv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ct("INTERNAL UNHANDLED ERROR: ",Ov(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=fm.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ce(47125,{Pc:Ov(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ov(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ii extends wm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Nv,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nv(e),this._firestoreClient=void 0,await e}}}function GM(t,e,n){n||(n=Eu);const r=Zu(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(si(i,e))return s;throw new te(z.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new te(z.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<jT)throw new te(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&_s(e.host)&&Sp(e.host),r.initialize({options:e,instanceIdentifier:n})}function bm(t){if(t._terminated)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WM(t),t._firestoreClient}function WM(t){const e=t._freezeSettings(),n=(function(s,i,o,a){return new TN(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,CA(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new qM(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class En{constructor(e){this._byteString=e}static fromBase64String(e){try{return new En(ft.fromBase64String(e))}catch(n){throw new te(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new En(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:En._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vl(e,En._jsonSchema))return En.fromBase64String(e.bytes)}}En._jsonSchemaVersion="firestore/bytes/1.0",En._jsonSchema={type:_t("string",En._jsonSchemaVersion),bytes:_t("string")};class Ih{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Th{constructor(e){this._methodName=e}}class Xn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xn._jsonSchemaVersion}}static fromJSON(e){if(Vl(e,Xn._jsonSchema))return new Xn(e.latitude,e.longitude)}}Xn._jsonSchemaVersion="firestore/geoPoint/1.0",Xn._jsonSchema={type:_t("string",Xn._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};class Zn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vl(e,Zn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Zn(e.vectorValues);throw new te(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zn._jsonSchemaVersion="firestore/vectorValue/1.0",Zn._jsonSchema={type:_t("string",Zn._jsonSchemaVersion),vectorValues:_t("object")};const QM=/^__.*__$/;class JM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fo(e,this.data,n,this.fieldTransforms)}}class PA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{Ac:t})}}class Im{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Im({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Du(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kA(this.Ac)&&QM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class YM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||vh(e)}Cc(e,n,r,s=!1){return new Im({Ac:e,methodName:n,Dc:r,path:nt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(t){const e=t._freezeSettings(),n=vh(t._databaseId);return new YM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xA(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Am("Data must be an object, but it was:",o,r);const a=VA(r,o);let l,u;if(i.merge)l=new nn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=Kf(e,d,n);if(!o.contains(p))throw new te(z.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);NA(h,p)||h.push(p)}l=new nn(h),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new JM(new jt(a),l,u)}class Sh extends Th{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sh}}class Tm extends Th{_toFieldTransform(e){return new gT(e.path,new To)}isEqual(e){return e instanceof Tm}}function XM(t,e,n,r){const s=t.Cc(1,e,n);Am("Data must be an object, but it was:",s,r);const i=[],o=jt.empty();ws(r,((l,u)=>{const h=Sm(e,l,n);u=et(u);const d=s.yc(h);if(u instanceof Sh)i.push(h);else{const p=Ul(u,d);p!=null&&(i.push(h),o.set(h,p))}}));const a=new nn(i);return new PA(o,a,s.fieldTransforms)}function ZM(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[Kf(e,r,n)],l=[s];if(i.length%2!=0)throw new te(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Kf(e,i[p])),l.push(i[p+1]);const u=[],h=jt.empty();for(let p=a.length-1;p>=0;--p)if(!NA(u,a[p])){const g=a[p];let T=l[p];T=et(T);const P=o.yc(g);if(T instanceof Sh)u.push(g);else{const C=Ul(T,P);C!=null&&(u.push(g),h.set(g,C))}}const d=new nn(u);return new PA(h,d,o.fieldTransforms)}function eL(t,e,n,r=!1){return Ul(n,t.Cc(r?4:3,e))}function Ul(t,e){if(DA(t=et(t)))return Am("Unsupported field value:",e,t),VA(t,e);if(t instanceof Th)return(function(r,s){if(!kA(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const a of r){let l=Ul(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=qe.fromDate(r);return{timestampValue:Ro(s.serializer,i)}}if(r instanceof qe){const i=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ro(s.serializer,i)}}if(r instanceof Xn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof En)return{bytesValue:IT(s.serializer,r._byteString)};if(r instanceof ht){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:tm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Zn)return(function(o,a){return{mapValue:{fields:{[Hp]:{stringValue:Gp},[Eo]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Jp(a.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${rh(r)}`)})(t,e)}function VA(t,e){const n={};return BI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ws(t,((r,s)=>{const i=Ul(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function DA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof Xn||t instanceof En||t instanceof ht||t instanceof Th||t instanceof Zn)}function Am(t,e,n){if(!DA(n)||!II(n)){const r=rh(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Kf(t,e,n){if((e=et(e))instanceof Ih)return e._internalPath;if(typeof e=="string")return Sm(t,e);throw Du("Field path arguments must be of type string or ",t,!1,void 0,n)}const tL=new RegExp("[~\\*/\\[\\]]");function Sm(t,e,n){if(e.search(tL)>=0)throw Du(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ih(...e.split("."))._internalPath}catch{throw Du(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Du(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new te(z.INVALID_ARGUMENT,a+t+l)}function NA(t,e){return t.some((n=>n.isEqual(e)))}class OA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nL extends OA{data(){return super.data()}}function Rh(t,e){return typeof e=="string"?Sm(t,e):e instanceof Ih?e._internalPath:e._delegate._internalPath}function rL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rm{}class MA extends Rm{}function sB(t,e,...n){let r=[];e instanceof Rm&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof Cm)).length,a=i.filter((l=>l instanceof Ch)).length;if(o>1||o>0&&a>0)throw new te(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class Ch extends MA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ch(e,n,r)}_apply(e){const n=this._parse(e);return LA(e._query,n),new bi(e.firestore,e.converter,kf(e._query,n))}_parse(e){const n=Ah(e.firestore);return(function(i,o,a,l,u,h,d){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Lv(d,h);const T=[];for(const P of d)T.push(Mv(l,i,P));p={arrayValue:{values:T}}}else p=Mv(l,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Lv(d,h),p=eL(a,o,d,h==="in"||h==="not-in");return Ve.create(u,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function iB(t,e,n){const r=e,s=Rh("where",t);return Ch._create(s,r,n)}class Cm extends Rm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cm(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:$e.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)LA(o,l),o=kf(o,l)})(e._query,n),new bi(e.firestore,e.converter,kf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pm extends MA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pm(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new te(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new te(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _l(i,o)})(e._query,this._field,this._direction);return new bi(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new Lo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function oB(t,e="asc"){const n=e,r=Rh("orderBy",t);return Pm._create(r,n)}function Mv(t,e,n){if(typeof(n=et(n))=="string"){if(n==="")throw new te(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sT(e)&&n.indexOf("/")!==-1)throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Me.fromString(n));if(!ie.isDocumentKey(r))throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ml(t,new ie(r))}if(n instanceof ht)return ml(t,n._key);throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rh(n)}.`)}function Lv(t,e){if(!Array.isArray(t)||t.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LA(t,e){const n=(function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sL{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ws(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[Eo].arrayValue?.values?.map((r=>Ze(r.doubleValue)));return new Zn(n)}convertGeoPoint(e){return new Xn(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ch(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){const n=Er(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Me.fromString(e);fe(DT(r),9688,{name:e});const s=new ci(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||ct(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function FA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Aa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ei extends OA{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ei._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ei._jsonSchemaVersion="firestore/documentSnapshot/1.0",ei._jsonSchema={type:_t("string",ei._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};class Bc extends ei{data(e={}){return super.data(e)}}class lo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Aa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Bc(this._firestore,this._userDataWriter,r.key,r,new Aa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const l=new Bc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Aa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>i||a.type!==3)).map((a=>{const l=new Bc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Aa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:iL(a.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:t})}}function oL(t){t=tr(t,ht);const e=tr(t.firestore,Ii);return zM(bm(e),t._key).then((n=>lL(e,t,n)))}lo._jsonSchemaVersion="firestore/querySnapshot/1.0",lo._jsonSchema={type:_t("string",lo._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};class UA extends sL{constructor(e){super(),this.firestore=e}convertBytes(e){return new En(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function aB(t){t=tr(t,bi);const e=tr(t.firestore,Ii),n=bm(e),r=new UA(e);return rL(t._query),KM(n,t._query).then((s=>new lo(e,r,t,s)))}function Fv(t,e,n){t=tr(t,ht);const r=tr(t.firestore,Ii),s=FA(t.converter,e);return Ph(r,[xA(Ah(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,zt.none())])}function aL(t,e,n,...r){t=tr(t,ht);const s=tr(t.firestore,Ii),i=Ah(s);let o;return o=typeof(e=et(e))=="string"||e instanceof Ih?ZM(i,"updateDoc",t._key,e,n,r):XM(i,"updateDoc",t._key,e),Ph(s,[o.toMutation(t._key,zt.exists(!0))])}function lB(t){return Ph(tr(t.firestore,Ii),[new mh(t._key,zt.none())])}function cB(t,e){const n=tr(t.firestore,Ii),r=Ta(t),s=FA(t.converter,e);return Ph(n,[xA(Ah(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,zt.exists(!1))]).then((()=>r))}function Ph(t,e){return(function(r,s){const i=new Yn;return r.asyncQueue.enqueueAndForget((async()=>AM(await jM(r),s,i))),i.promise})(bm(t),e)}function lL(t,e,n){const r=n.docs.get(e._key),s=new UA(t);return new ei(t,s,e._key,r,new Aa(n.hasPendingWrites,n.fromCache),e.converter)}class cL{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=fL(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function uL(t){return new cL(t)}class hL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=El.provider,this._offlineComponentProvider={build:n=>new TA(n,e?.cacheSizeBytes,this.forceOwnership)}}}class dL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=El.provider,this._offlineComponentProvider={build:n=>new BM(n,e?.cacheSizeBytes)}}}function fL(t){return new hL(t?.forceOwnership)}function pL(){return new dL}function uB(){return new Tm("serverTimestamp")}(function(e,n=!0){(function(s){Mo=s})(vi),ii(new hs("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ii(new FD(r.getProvider("auth-internal")),new qD(o,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new te(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ci(u.options.projectId,h)})(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Wn(_y,yy,e),Wn(_y,yy,"esm2020")})();function hB(t){return t}var mL="firebase",gL="12.6.0";Wn(mL,gL,"app");const BA="firebasestorage.googleapis.com",qA="storageBucket",_L=120*1e3,yL=600*1e3;class lt extends rr{constructor(e,n,r=0){super(Rd(e),`Firebase Storage: ${n} (${Rd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Rd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var at;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(at||(at={}));function Rd(t){return"storage/"+t}function km(){const t="An unknown error occurred, please check the error payload for server response.";return new lt(at.UNKNOWN,t)}function vL(t){return new lt(at.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function EL(t){return new lt(at.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new lt(at.UNAUTHENTICATED,t)}function bL(){return new lt(at.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function IL(t){return new lt(at.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function TL(){return new lt(at.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function AL(){return new lt(at.CANCELED,"User canceled the upload/download.")}function SL(t){return new lt(at.INVALID_URL,"Invalid URL '"+t+"'.")}function RL(t){return new lt(at.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function CL(){return new lt(at.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qA+"' property when initializing the app?")}function PL(){return new lt(at.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kL(){return new lt(at.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function xL(t){return new lt(at.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hf(t){return new lt(at.INVALID_ARGUMENT,t)}function $A(){return new lt(at.APP_DELETED,"The Firebase app was deleted.")}function VL(t){return new lt(at.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wa(t,e){return new lt(at.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function da(t){throw new lt(at.INTERNAL_ERROR,"Internal error: "+t)}class fn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=fn.makeFromUrl(e,n)}catch{return new fn(e,"")}if(r.path==="")return r;throw RL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${h}/b/${s}/o${p}`,"i"),T={bucket:1,path:3},P=n===BA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",D=new RegExp(`^https?://${P}/${s}/${C}`,"i"),x=[{regex:a,indices:l,postModify:i},{regex:g,indices:T,postModify:u},{regex:D,indices:{bucket:1,path:2},postModify:u}];for(let V=0;V<x.length;V++){const L=x[V],q=L.regex.exec(e);if(q){const A=q[L.indices.bucket];let y=q[L.indices.path];y||(y=""),r=new fn(A,y),L.postModify(r);break}}if(r==null)throw SL(e);return r}}class DL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function NL(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function h(...C){u||(u=!0,e.apply(null,C))}function d(C){s=setTimeout(()=>{s=null,t(g,l())},C)}function p(){i&&clearTimeout(i)}function g(C,...D){if(u){p();return}if(C){p(),h.call(null,C,...D);return}if(l()||o){p(),h.call(null,C,...D);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,d(x)}let T=!1;function P(C){T||(T=!0,p(),!u&&(s!==null?(C||(a=2),clearTimeout(s),d(0)):C||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,P(!0)},n),P}function OL(t){t(!1)}function ML(t){return t!==void 0}function LL(t){return typeof t=="object"&&!Array.isArray(t)}function xm(t){return typeof t=="string"||t instanceof String}function Uv(t){return Vm()&&t instanceof Blob}function Vm(){return typeof Blob<"u"}function Bv(t,e,n,r){if(r<e)throw Hf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Hf(`Invalid value for '${t}'. Expected ${n} or less.`)}function kh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function jA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ti;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ti||(ti={}));function FL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}class UL{constructor(e,n,r,s,i,o,a,l,u,h,d,p=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=d,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,P)=>{this.resolve_=T,this.reject_=P,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new dc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ti.NO_ERROR,l=i.getStatus();if(!a||FL(l,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===ti.ABORT;r(!1,new dc(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new dc(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());ML(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=km();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?$A():AL();o(l)}else{const l=TL();o(l)}};this.canceled_?n(!1,new dc(!1,null,!0)):this.backoffId_=NL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function BL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function qL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $L(t,e){e&&(t["X-Firebase-GMPID"]=e)}function jL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function zL(t,e,n,r,s,i,o=!0,a=!1){const l=jA(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return $L(h,e),BL(h,n),qL(h,i),jL(h,r),new UL(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}function KL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function HL(...t){const e=KL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Vm())return new Blob(t);throw new lt(at.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function GL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function WL(t){if(typeof atob>"u")throw xL("base-64");return atob(t)}const Hn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Cd{constructor(e,n){this.data=e,this.contentType=n||null}}function QL(t,e){switch(t){case Hn.RAW:return new Cd(zA(e));case Hn.BASE64:case Hn.BASE64URL:return new Cd(KA(t,e));case Hn.DATA_URL:return new Cd(YL(e),XL(e))}throw km()}function zA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function JL(t){let e;try{e=decodeURIComponent(t)}catch{throw Wa(Hn.DATA_URL,"Malformed data URL.")}return zA(e)}function KA(t,e){switch(t){case Hn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Wa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Hn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Wa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=WL(e)}catch(s){throw s.message.includes("polyfill")?s:Wa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class HA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Wa(Hn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=ZL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function YL(t){const e=new HA(t);return e.base64?KA(Hn.BASE64,e.rest):JL(e.rest)}function XL(t){return new HA(t).contentType}function ZL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class Zr{constructor(e,n){let r=0,s="";Uv(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Uv(this.data_)){const r=this.data_,s=GL(r,e,n);return s===null?null:new Zr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Zr(r,!0)}}static getBlob(...e){if(Vm()){const n=e.map(r=>r instanceof Zr?r.data_:r);return new Zr(HL.apply(null,n))}else{const n=e.map(o=>xm(o)?QL(Hn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Zr(s,!0)}}uploadData(){return this.data_}}function GA(t){let e;try{e=JSON.parse(t)}catch{return null}return LL(e)?e:null}function eF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function tF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function WA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function nF(t,e){return e}class Gt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||nF}}let fc=null;function rF(t){return!xm(t)||t.length<2?t:WA(t)}function QA(){if(fc)return fc;const t=[];t.push(new Gt("bucket")),t.push(new Gt("generation")),t.push(new Gt("metageneration")),t.push(new Gt("name","fullPath",!0));function e(i,o){return rF(o)}const n=new Gt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Gt("size");return s.xform=r,t.push(s),t.push(new Gt("timeCreated")),t.push(new Gt("updated")),t.push(new Gt("md5Hash",null,!0)),t.push(new Gt("cacheControl",null,!0)),t.push(new Gt("contentDisposition",null,!0)),t.push(new Gt("contentEncoding",null,!0)),t.push(new Gt("contentLanguage",null,!0)),t.push(new Gt("contentType",null,!0)),t.push(new Gt("metadata","customMetadata",!0)),fc=t,fc}function sF(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new fn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function iF(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return sF(r,t),r}function JA(t,e,n){const r=GA(e);return r===null?null:iF(t,r,n)}function oF(t,e,n,r){const s=GA(e);if(s===null||!xm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const h=t.bucket,d=t.fullPath,p="/b/"+o(h)+"/o/"+o(d),g=kh(p,n,r),T=jA({alt:"media",token:u});return g+T})[0]}function aF(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Dm{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function YA(t){if(!t)throw km()}function lF(t,e){function n(r,s){const i=JA(t,s,e);return YA(i!==null),i}return n}function cF(t,e){function n(r,s){const i=JA(t,s,e);return YA(i!==null),oF(i,s,t.host,t._protocol)}return n}function XA(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=bL():s=wL():n.getStatus()===402?s=EL(t.bucket):n.getStatus()===403?s=IL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function ZA(t){const e=XA(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=vL(t.path)),i.serverResponse=s.serverResponse,i}return n}function uF(t,e,n){const r=e.fullServerUrl(),s=kh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Dm(s,i,cF(t,n),o);return a.errorHandler=ZA(e),a}function hF(t,e){const n=e.fullServerUrl(),r=kh(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,u){}const a=new Dm(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=ZA(e),a}function dF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function fF(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=dF(null,e)),r}function pF(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let V=0;V<2;V++)x=x+Math.random().toString().slice(2);return x}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=fF(e,r,s),h=aF(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+l+"--",g=Zr.getBlob(d,r,p);if(g===null)throw PL();const T={name:u.fullPath},P=kh(i,t.host,t._protocol),C="POST",D=t.maxUploadRetryTime,S=new Dm(P,C,lF(t,n),D);return S.urlParams=T,S.headers=o,S.body=g.uploadData(),S.errorHandler=XA(e),S}class mF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ti.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ti.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ti.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw da("cannot .send() more than once");if(_s(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw da("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw da("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw da("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw da("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class gF extends mF{initXhr(){this.xhr_.responseType="text"}}function Nm(){return new gF}class mi{constructor(e,n){this._service=e,n instanceof fn?this._location=n:this._location=fn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new mi(e,n)}get root(){const e=new fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WA(this._location.path)}get storage(){return this._service}get parent(){const e=eF(this._location.path);if(e===null)return null;const n=new fn(this._location.bucket,e);return new mi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw VL(e)}}function _F(t,e,n){t._throwIfRoot("uploadBytes");const r=pF(t.storage,t._location,QA(),new Zr(e,!0),n);return t.storage.makeRequestWithTokens(r,Nm).then(s=>({metadata:s,ref:t}))}function yF(t){t._throwIfRoot("getDownloadURL");const e=uF(t.storage,t._location,QA());return t.storage.makeRequestWithTokens(e,Nm).then(n=>{if(n===null)throw kL();return n})}function vF(t){t._throwIfRoot("deleteObject");const e=hF(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Nm)}function EF(t,e){const n=tF(t._location.path,e),r=new fn(t._location.bucket,n);return new mi(t.storage,r)}function wF(t){return/^[A-Za-z]+:\/\//.test(t)}function bF(t,e){return new mi(t,e)}function eS(t,e){if(t instanceof Om){const n=t;if(n._bucket==null)throw CL();const r=new mi(n,n._bucket);return e!=null?eS(r,e):r}else return e!==void 0?EF(t,e):t}function IF(t,e){if(e&&wF(e)){if(t instanceof Om)return bF(t,e);throw Hf("To use ref(service, url), the first argument must be a Storage instance.")}else return eS(t,e)}function qv(t,e){const n=e?.[qA];return n==null?null:fn.makeFromBucketSpec(n,t)}function TF(t,e,n,r={}){t.host=`${e}:${n}`;const s=_s(e);s&&(Sp(`https://${t.host}/b`),Ib("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Qk(i,t.app.options.projectId))}class Om{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=BA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_L,this._maxUploadRetryTime=yL,this._requests=new Set,s!=null?this._bucket=fn.makeFromBucketSpec(s,this._host):this._bucket=qv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fn.makeFromBucketSpec(this._url,e):this._bucket=qv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Bv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Bv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new DL($A());{const o=zL(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const $v="@firebase/storage",jv="0.14.0";const tS="storage";function dB(t,e,n){return t=et(t),_F(t,e,n)}function fB(t){return t=et(t),yF(t)}function pB(t){return t=et(t),vF(t)}function mB(t,e){return t=et(t),IF(t,e)}function AF(t=xb(),e){t=et(t);const r=Zu(t,tS).getImmediate({identifier:e}),s=Gk("storage");return s&&SF(r,...s),r}function SF(t,e,n,r={}){TF(t,e,n,r)}function RF(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Om(n,r,s,e,vi)}function CF(){ii(new hs(tS,RF,"PUBLIC").setMultipleInstances(!0)),Wn($v,jv,""),Wn($v,jv,"esm2020")}CF();const PF={apiKey:"AIzaSyAllxHJVBHgH3P70gfCqV4494t4ssARbig",authDomain:"baguioboost.firebaseapp.com",projectId:"baguioboost",storageBucket:"baguioboost.firebasestorage.app",messagingSenderId:"851799020380",appId:"1:851799020380:web:a89dc01ea4472b54a2e799",measurementId:"G-CBC0ZZPBDX"},Mm=kb(PF),Ji=ND(Mm),kF=AF(Mm),Yi=GM(Mm,{localCache:uL({cacheSizeBytes:50*1024*1024,tabManager:pL()})});console.log("[Firebase]  Offline persistence enabled (modern method)");const xF=({app:t})=>{t.config.globalProperties.$auth=Ji,t.config.globalProperties.$db=Yi},VF=Object.freeze(Object.defineProperty({__proto__:null,auth:Ji,db:Yi,default:xF,storage:kF},Symbol.toStringTag,{value:"Module"})),Gf={xs:18,sm:24,md:32,lg:38,xl:46},Bl={size:String};function ql(t,e=Gf){return $(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function xn(t,e){return t!==void 0&&t()||e}function gB(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function Ks(t,e){return t!==void 0?e.concat(t()):e}function DF(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}function _B(t,e,n,r,s,i){e.key=r+s;const o=j(t,e,n);return s===!0?ew(o,i()):o}const zv="0 0 24 24",Pd=t=>t,kd=t=>`ionicons ${t}`,nS={"mdi-":t=>`mdi ${t}`,"icon-":Pd,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":kd,"ion-ios":kd,"ion-logo":kd,"iconfont ":Pd,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":Pd},rS={o_:"-outlined",r_:"-round",s_:"-sharp"},sS={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},NF=new RegExp("^("+Object.keys(nS).join("|")+")"),OF=new RegExp("^("+Object.keys(rS).join("|")+")"),Kv=new RegExp("^("+Object.keys(sS).join("|")+")"),MF=/^[Mm]\s?[-+]?\.?\d/,LF=/^img:/,FF=/^svguse:/,UF=/^ion-/,BF=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,br=Vt({name:"QIcon",props:{...Bl,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=tt(),r=ql(t),s=$(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),i=$(()=>{let o,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(MF.test(a)===!0){const[h,d=zv]=a.split("|");return{svg:!0,viewBox:d,nodes:h.split("&&").map(p=>{const[g,T,P]=p.split("@@");return j("path",{style:T,d:g,transform:P})})}}if(LF.test(a)===!0)return{img:!0,src:a.substring(4)};if(FF.test(a)===!0){const[h,d=zv]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:d}}let l=" ";const u=a.match(NF);if(u!==null)o=nS[u[1]](a);else if(BF.test(a)===!0)o=a;else if(UF.test(a)===!0)o=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(Kv.test(a)===!0){o="notranslate material-symbols";const h=a.match(Kv);h!==null&&(a=a.substring(6),o+=sS[h[1]]),l=a}else{o="notranslate material-icons";const h=a.match(OF);h!==null&&(a=a.substring(2),o+=rS[h[1]]),l=a}return{cls:o,content:l}});return()=>{const o={class:s.value,style:r.value,"aria-hidden":"true"};return i.value.none===!0?j(t.tag,o,xn(e.default)):i.value.img===!0?j(t.tag,o,Ks(e.default,[j("img",{src:i.value.src})])):i.value.svg===!0?j(t.tag,o,Ks(e.default,[j("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?j(t.tag,o,Ks(e.default,[j("svg",{viewBox:i.value.viewBox},[j("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(o.class+=" "+i.value.cls),j(t.tag,o,Ks(e.default,[i.value.content])))}}}),qF=Vt({name:"QAvatar",props:{...Bl,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=ql(t),r=$(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),s=$(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const i=t.icon!==void 0?[j(br,{name:t.icon})]:void 0;return j("div",{class:r.value,style:n.value},[j("div",{class:"q-avatar__content row flex-center overflow-hidden",style:s.value},DF(e.default,i))])}}}),$F={size:{type:[String,Number],default:"1em"},color:String};function jF(t){return{cSize:$(()=>t.size in Gf?`${Gf[t.size]}px`:t.size),classes:$(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const Vo=Vt({name:"QSpinner",props:{...$F,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=jF(t);return()=>j("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[j("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function Wf(t,e){const n=t.style;for(const r in e)n[r]=e[r]}function zF(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=Qs(t);if(e)return e.$el||e}function KF(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function HF(t,e=250){let n=!1,r;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),r=t.apply(this,arguments)),r}}function Hv(t,e,n,r){n.modifiers.stop===!0&&iu(t);const s=n.modifiers.color;let i=n.modifiers.center;i=i===!0||r===!0;const o=document.createElement("span"),a=document.createElement("span"),l=XC(t),{left:u,top:h,width:d,height:p}=e.getBoundingClientRect(),g=Math.sqrt(d*d+p*p),T=g/2,P=`${(d-g)/2}px`,C=i?P:`${l.left-u-T}px`,D=`${(p-g)/2}px`,S=i?D:`${l.top-h-T}px`;a.className="q-ripple__inner",Wf(a,{height:`${g}px`,width:`${g}px`,transform:`translate3d(${C},${S},0) scale3d(.2,.2,1)`,opacity:0}),o.className=`q-ripple${s?" text-"+s:""}`,o.setAttribute("dir","ltr"),o.appendChild(a),e.appendChild(o);const x=()=>{o.remove(),clearTimeout(V)};n.abort.push(x);let V=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${P},${D},0) scale3d(1,1,1)`,a.style.opacity=.2,V=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,V=setTimeout(()=>{o.remove(),n.abort.splice(n.abort.indexOf(x),1)},275)},250)},50)}function Gv(t,{modifiers:e,value:n,arg:r}){const s=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:s.early===!0,stop:s.stop===!0,center:s.center===!0,color:s.color||r,keyCodes:[].concat(s.keyCodes||13)}}const GF=YC({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const r={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(s){r.enabled===!0&&s.qSkipRipple!==!0&&s.type===(r.modifiers.early===!0?"pointerdown":"click")&&Hv(s,t,r,s.qKeyEvent===!0)},keystart:HF(s=>{r.enabled===!0&&s.qSkipRipple!==!0&&rl(s,r.modifiers.keyCodes)===!0&&s.type===`key${r.modifiers.early===!0?"down":"up"}`&&Hv(s,t,r,!0)},300)};Gv(r,e),t.__qripple=r,eP(r,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&Gv(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),tP(e,"main"),delete t._qripple)}}),iS={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},WF=Object.keys(iS),oS={align:{type:String,validator:t=>WF.includes(t)}};function aS(t){return $(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${iS[e]}`})}function qc(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function lS(t,e){typeof e.type=="symbol"?Array.isArray(e.children)===!0&&e.children.forEach(n=>{lS(t,n)}):t.add(e)}function yB(t){const e=new Set;return t.forEach(n=>{lS(e,n)}),Array.from(e)}function cS(t){return t.appContext.config.globalProperties.$router!==void 0}function uS(t){return t.isUnmounted===!0||t.isDeactivated===!0}function Wv(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function Qv(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function QF(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(Array.isArray(s)===!1||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function Jv(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function JF(t,e){return Array.isArray(t)===!0?Jv(t,e):Array.isArray(e)===!0?Jv(e,t):t===e}function YF(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(JF(t[n],e[n])===!1)return!1;return!0}const hS={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},vB={...hS,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function XF({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=tt(),{props:r,proxy:s,emit:i}=n,o=cS(n),a=$(()=>r.disable!==!0&&r.href!==void 0),l=$(e===!0?()=>o===!0&&r.disable!==!0&&a.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!=="":()=>o===!0&&a.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!==""),u=$(()=>l.value===!0?S(r.to):null),h=$(()=>u.value!==null),d=$(()=>a.value===!0||h.value===!0),p=$(()=>r.type==="a"||d.value===!0?"a":r.tag||t||"div"),g=$(()=>a.value===!0?{href:r.href,target:r.target}:h.value===!0?{href:u.value.href,target:r.target}:{}),T=$(()=>{if(h.value===!1)return-1;const{matched:L}=u.value,{length:q}=L,A=L[q-1];if(A===void 0)return-1;const y=s.$route.matched;if(y.length===0)return-1;const w=y.findIndex(Qv.bind(null,A));if(w!==-1)return w;const E=Wv(L[q-2]);return q>1&&Wv(A)===E&&y[y.length-1].path!==E?y.findIndex(Qv.bind(null,L[q-2])):w}),P=$(()=>h.value===!0&&T.value!==-1&&QF(s.$route.params,u.value.params)),C=$(()=>P.value===!0&&T.value===s.$route.matched.length-1&&YF(s.$route.params,u.value.params)),D=$(()=>h.value===!0?C.value===!0?` ${r.exactActiveClass} ${r.activeClass}`:r.exact===!0?"":P.value===!0?` ${r.activeClass}`:"":"");function S(L){try{return s.$router.resolve(L)}catch{}return null}function x(L,{returnRouterError:q,to:A=r.to,replace:y=r.replace}={}){if(r.disable===!0)return L.preventDefault(),Promise.resolve(!1);if(L.metaKey||L.altKey||L.ctrlKey||L.shiftKey||L.button!==void 0&&L.button!==0||r.target==="_blank")return Promise.resolve(!1);L.preventDefault();const w=s.$router[y===!0?"replace":"push"](A);return q===!0?w:w.then(()=>{}).catch(()=>{})}function V(L){if(h.value===!0){const q=A=>x(L,A);i("click",L,q),L.defaultPrevented!==!0&&q()}else i("click",L)}return{hasRouterLink:h,hasHrefLink:a,hasLink:d,linkTag:p,resolvedLink:u,linkIsActive:P,linkIsExactActive:C,linkClass:D,linkAttrs:g,getLink:S,navigateToRouterLink:x,navigateOnClick:V}}const Yv={none:0,xs:4,sm:8,md:16,lg:24,xl:32},ZF={xs:8,sm:10,md:14,lg:20,xl:24},e2=["button","submit","reset"],t2=/[^\s]\/[^\s]/,n2=["flat","outline","push","unelevated"];function dS(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}function EB(t){const e=dS(t);return e!==void 0?{[e]:!0}:{}}const r2={...Bl,...hS,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...n2.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...oS.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},s2={...r2,round:Boolean};function i2(t){const e=ql(t,ZF),n=aS(t),{hasRouterLink:r,hasLink:s,linkTag:i,linkAttrs:o,navigateOnClick:a}=XF({fallbackTag:"button"}),l=$(()=>{const C=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},C,{padding:t.padding.split(/\s+/).map(D=>D in Yv?Yv[D]+"px":D).join(" "),minWidth:"0",minHeight:"0"}):C}),u=$(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=$(()=>t.disable!==!0&&t.loading!==!0),d=$(()=>h.value===!0?t.tabindex||0:-1),p=$(()=>dS(t,"standard")),g=$(()=>{const C={tabindex:d.value};return s.value===!0?Object.assign(C,o.value):e2.includes(t.type)===!0&&(C.type=t.type),i.value==="a"?(t.disable===!0?C["aria-disabled"]="true":C.href===void 0&&(C.role="button"),r.value!==!0&&t2.test(t.type)===!0&&(C.type=t.type)):t.disable===!0&&(C.disabled="",C["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(C,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),C}),T=$(()=>{let C;t.color!==void 0?t.flat===!0||t.outline===!0?C=`text-${t.textColor||t.color}`:C=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(C=`text-${t.textColor}`);const D=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${D}`+(C!==void 0?" "+C:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),P=$(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:T,style:l,innerClasses:P,attributes:g,hasLink:s,linkTag:i,navigateOnClick:a,isActionable:h}}const{passiveCapture:_n}=Zt;let Fi=null,Ui=null,Bi=null;const Qf=Vt({name:"QBtn",props:{...s2,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:r}=tt(),{classes:s,style:i,innerClasses:o,attributes:a,hasLink:l,linkTag:u,navigateOnClick:h,isActionable:d}=i2(t),p=Ne(null),g=Ne(null);let T=null,P,C=null;const D=$(()=>t.label!==void 0&&t.label!==null&&t.label!==""),S=$(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:l.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),x=$(()=>({center:t.round})),V=$(()=>{const U=Math.max(0,Math.min(100,t.percentage));return U>0?{transition:"transform 0.6s",transform:`translateX(${U-100}%)`}:{}}),L=$(()=>{if(t.loading===!0)return{onMousedown:_,onTouchstart:_,onClick:_,onKeydown:_,onKeyup:_};if(d.value===!0){const U={onClick:A,onKeydown:y,onMousedown:E};if(r.$q.platform.has.touch===!0){const ne=t.onTouchstart!==void 0?"":"Passive";U[`onTouchstart${ne}`]=w}return U}return{onClick:vn}}),q=$(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+s.value,style:i.value,...a.value,...L.value}));function A(U){if(p.value!==null){if(U!==void 0){if(U.defaultPrevented===!0)return;const ne=document.activeElement;if(t.type==="submit"&&ne!==document.body&&p.value.contains(ne)===!1&&ne.contains(p.value)===!1){U.qAvoidFocus!==!0&&p.value.focus();const ue=()=>{document.removeEventListener("keydown",vn,!0),document.removeEventListener("keyup",ue,_n),p.value?.removeEventListener("blur",ue,_n)};document.addEventListener("keydown",vn,!0),document.addEventListener("keyup",ue,_n),p.value.addEventListener("blur",ue,_n)}}h(U)}}function y(U){p.value!==null&&(n("keydown",U),rl(U,[13,32])===!0&&Ui!==p.value&&(Ui!==null&&b(),U.defaultPrevented!==!0&&(U.qAvoidFocus!==!0&&p.value.focus(),Ui=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",v,!0),p.value.addEventListener("blur",v,_n)),vn(U)))}function w(U){p.value!==null&&(n("touchstart",U),U.defaultPrevented!==!0&&(Fi!==p.value&&(Fi!==null&&b(),Fi=p.value,T=U.target,T.addEventListener("touchcancel",v,_n),T.addEventListener("touchend",v,_n)),P=!0,C!==null&&clearTimeout(C),C=setTimeout(()=>{C=null,P=!1},200)))}function E(U){p.value!==null&&(U.qSkipRipple=P===!0,n("mousedown",U),U.defaultPrevented!==!0&&Bi!==p.value&&(Bi!==null&&b(),Bi=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",v,_n)))}function v(U){if(p.value!==null&&!(U?.type==="blur"&&document.activeElement===p.value)){if(U?.type==="keyup"){if(Ui===p.value&&rl(U,[13,32])===!0){const ne=new MouseEvent("click",U);ne.qKeyEvent=!0,U.defaultPrevented===!0&&Gr(ne),U.cancelBubble===!0&&iu(ne),p.value.dispatchEvent(ne),vn(U),U.qKeyEvent=!0}n("keyup",U)}b()}}function b(U){const ne=g.value;U!==!0&&(Fi===p.value||Bi===p.value)&&ne!==null&&ne!==document.activeElement&&(ne.setAttribute("tabindex",-1),ne.focus()),Fi===p.value&&(T!==null&&(T.removeEventListener("touchcancel",v,_n),T.removeEventListener("touchend",v,_n)),Fi=T=null),Bi===p.value&&(document.removeEventListener("mouseup",v,_n),Bi=null),Ui===p.value&&(document.removeEventListener("keyup",v,!0),p.value?.removeEventListener("blur",v,_n),Ui=null),p.value?.classList.remove("q-btn--active")}function _(U){vn(U),U.qSkipRipple=!0}return Tn(()=>{b(!0)}),Object.assign(r,{click:U=>{d.value===!0&&A(U)}}),()=>{let U=[];t.icon!==void 0&&U.push(j(br,{name:t.icon,left:t.stack!==!0&&D.value===!0,role:"img"})),D.value===!0&&U.push(j("span",{class:"block"},[t.label])),U=Ks(e.default,U),t.iconRight!==void 0&&t.round===!1&&U.push(j(br,{name:t.iconRight,right:t.stack!==!0&&D.value===!0,role:"img"}));const ne=[j("span",{class:"q-focus-helper",ref:g})];return t.loading===!0&&t.percentage!==void 0&&ne.push(j("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[j("span",{class:"q-btn__progress-indicator fit block",style:V.value})])),ne.push(j("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+o.value},U)),t.loading!==null&&ne.push(j(nl,{name:"q-transition--fade"},()=>t.loading===!0?[j("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[j(Vo)])]:null)),ew(j(u.value,q.value,ne),[[GF,S.value,void 0,x.value]])}}});let o2=1,a2=document.body;function xh(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${o2++}`:t,au.globalNodes!==void 0){const r=au.globalNodes.class;r!==void 0&&(n.className=r)}return a2.appendChild(n),n}function Lm(t){t.remove()}let l2=0;const $c={},jc={},Cn={},fS={},c2=/^\s*$/,pS=[],u2=[void 0,null,!0,!1,""],Fm=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],h2=["top-left","top-right","bottom-left","bottom-right"],Sa={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function mS(t,e,n){if(!t)return fa("parameter required");let r;const s={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(s,$c),ln(t)===!1&&(s.type&&Object.assign(s,Sa[s.type]),t={message:t}),Object.assign(s,Sa[t.type||s.type],t),typeof s.icon=="function"&&(s.icon=s.icon(e)),s.spinner?(s.spinner===!0&&(s.spinner=Vo),s.spinner=_i(s.spinner)):s.spinner=!1,s.meta={hasMedia:!!(s.spinner!==!1||s.icon||s.avatar),hasText:Xv(s.message)||Xv(s.caption)},s.position){if(Fm.includes(s.position)===!1)return fa("wrong position",t)}else s.position="bottom";if(u2.includes(s.timeout)===!0)s.timeout=5e3;else{const l=Number(s.timeout);if(isNaN(l)||l<0)return fa("wrong timeout",t);s.timeout=Number.isFinite(l)?l:0}s.timeout===0?s.progress=!1:s.progress===!0&&(s.meta.progressClass="q-notification__progress"+(s.progressClass?` ${s.progressClass}`:""),s.meta.progressStyle={animationDuration:`${s.timeout+1e3}ms`});const i=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray($c.actions)===!0?$c.actions:[]).concat(Array.isArray(Sa[t.type]?.actions)===!0?Sa[t.type].actions:[]),{closeBtn:o}=s;if(o&&i.push({label:typeof o=="string"?o:e.lang.label.close}),s.actions=i.map(({handler:l,noDismiss:u,...h})=>({flat:!0,...h,onClick:typeof l=="function"?()=>{l(),u!==!0&&a()}:()=>{a()}})),s.multiLine===void 0&&(s.multiLine=s.actions.length>1),Object.assign(s.meta,{class:`q-notification row items-stretch q-notification--${s.multiLine===!0?"multi-line":"standard"}`+(s.color!==void 0?` bg-${s.color}`:"")+(s.textColor!==void 0?` text-${s.textColor}`:"")+(s.classes!==void 0?` ${s.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(s.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(s.multiLine===!0?"":" col"),leftClass:s.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...s.attrs}}),s.group===!1?(s.group=void 0,s.meta.group=void 0):((s.group===void 0||s.group===!0)&&(s.group=[s.message,s.caption,s.multiline].concat(s.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),s.meta.group=s.group+"|"+s.position),s.actions.length===0?s.actions=void 0:s.meta.actionsClass="q-notification__actions row items-center "+(s.multiLine===!0?"justify-end":"col-auto")+(s.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),s.meta.uid=n.notif.meta.uid;const l=Cn[s.position].value.indexOf(n.notif);Cn[s.position].value[l]=s}else{const l=jc[s.meta.group];if(l===void 0){if(s.meta.uid=l2++,s.meta.badge=1,["left","right","center"].indexOf(s.position)!==-1)Cn[s.position].value.splice(Math.floor(Cn[s.position].value.length/2),0,s);else{const u=s.position.indexOf("top")!==-1?"unshift":"push";Cn[s.position].value[u](s)}s.group!==void 0&&(jc[s.meta.group]=s)}else{if(l.meta.timer&&(clearTimeout(l.meta.timer),l.meta.timer=void 0),s.badgePosition!==void 0){if(h2.includes(s.badgePosition)===!1)return fa("wrong badgePosition",t)}else s.badgePosition=`top-${s.position.indexOf("left")!==-1?"right":"left"}`;s.meta.uid=l.meta.uid,s.meta.badge=l.meta.badge+1,s.meta.badgeClass=`q-notification__badge q-notification__badge--${s.badgePosition}`+(s.badgeColor!==void 0?` bg-${s.badgeColor}`:"")+(s.badgeTextColor!==void 0?` text-${s.badgeTextColor}`:"")+(s.badgeClass?` ${s.badgeClass}`:"");const u=Cn[s.position].value.indexOf(l);Cn[s.position].value[u]=jc[s.meta.group]=s}}const a=()=>{d2(s),r=void 0};if(s.timeout>0&&(s.meta.timer=setTimeout(()=>{s.meta.timer=void 0,a()},s.timeout+1e3)),s.group!==void 0)return l=>{l!==void 0?fa("trying to update a grouped one which is forbidden",t):a()};if(r={dismiss:a,config:t,notif:s},n!==void 0){Object.assign(n,r);return}return l=>{if(r!==void 0)if(l===void 0)r.dismiss();else{const u=Object.assign({},r.config,l,{group:!1,position:s.position});mS(u,e,r)}}}function d2(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=Cn[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete jc[t.meta.group];const n=pS[""+t.meta.uid];if(n){const{width:r,height:s}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=r,n.style.height=s}Cn[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function Xv(t){return t!=null&&c2.test(t)!==!0}function fa(t,e){return console.error(`Notify: ${t}`,e),!1}function f2(){return Vt({name:"QNotifications",devtools:{hide:!0},setup(){return()=>j("div",{class:"q-notifications"},Fm.map(t=>j(DC,{key:t,class:fS[t],tag:"div",name:`q-notification--${t}`},()=>Cn[t].value.map(e=>{const n=e.meta,r=[];if(n.hasMedia===!0&&(e.spinner!==!1?r.push(j(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?r.push(j(br,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&r.push(j(qF,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>j("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const o={class:"q-notification__message col"};if(e.html===!0)o.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];i=e.caption?[j("div",a),j("div",{class:"q-notification__caption"},[e.caption])]:a}r.push(j("div",o,i))}const s=[j("div",{class:n.contentClass},r)];return e.progress===!0&&s.push(j("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&s.push(j("div",{class:n.actionsClass},e.actions.map(i=>j(Qf,i)))),n.badge>1&&s.push(j("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),j("div",{ref:i=>{pS[""+n.uid]=i},key:n.uid,class:n.class,...n.attrs},[j("div",{class:n.wrapperClass},s)])}))))}})}const or={setDefaults(t){ln(t)===!0&&Object.assign($c,t)},registerType(t,e){ln(e)===!0&&(Sa[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>mS(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){Fm.forEach(r=>{Cn[r]=Ne([]);const s=["left","center","right"].includes(r)===!0?"center":r.indexOf("top")!==-1?"top":"bottom",i=r.indexOf("left")!==-1?"start":r.indexOf("right")!==-1?"end":"center",o=["left","right"].includes(r)?`items-${r==="left"?"start":"end"} justify-center`:r==="center"?"flex-center":`items-${i}`;fS[r]=`q-notifications__list q-notifications__list--${s} fixed column no-wrap ${o}`});const n=xh("q-notify");Tp(f2(),e).mount(n)}}},p2=Uk("user",{state:()=>({user:null,isPremium:!1,loading:!0,premiumExpiry:null}),getters:{isAuthenticated:t=>!!t.user,userEmail:t=>t.user?.email||"",userName:t=>t.user?.displayName||"User",canUseOffline:t=>t.isPremium},actions:{initAuth(){return new Promise(t=>{bV(Ji,async e=>{e?(this.user=e,await this.checkPremiumStatus()):(this.user=null,this.isPremium=!1,this.premiumExpiry=null),this.loading=!1,t(e)})})},async signUp(t,e,n){try{const r=await gV(Ji,t,e);return await vV(r.user,{displayName:n}),await Fv(Ta(Yi,"users",r.user.uid),{email:t,displayName:n,isPremium:!1,createdAt:new Date().toISOString(),premiumExpiry:null}),this.user=r.user,this.isPremium=!1,or.create({type:"positive",message:"Account created successfully!",position:"top"}),{success:!0}}catch(r){let s="Failed to create account";return r.code==="auth/email-already-in-use"?s="Email already in use":r.code==="auth/weak-password"?s="Password should be at least 6 characters":r.code==="auth/invalid-email"&&(s="Invalid email address"),or.create({type:"negative",message:s,position:"top"}),{success:!1,error:s}}},async signIn(t,e){try{const n=await _V(Ji,t,e);return this.user=n.user,await this.checkPremiumStatus(),or.create({type:"positive",message:"Welcome back!",position:"top"}),{success:!0}}catch(n){console.error("[UserStore] Sign in error:",n.code,n.message);let r="Failed to sign in";return n.code==="auth/user-not-found"?r="No account found with this email":n.code==="auth/wrong-password"?r="Incorrect password":n.code==="auth/invalid-email"?r="Invalid email address":n.code==="auth/invalid-credential"&&(r="Invalid email or password"),or.create({type:"negative",message:r,position:"top"}),{success:!1,error:r}}},async logout(){try{return await IV(Ji),this.user=null,this.isPremium=!1,this.premiumExpiry=null,or.create({type:"info",message:"Signed out successfully",position:"top"}),{success:!0}}catch(t){return console.error("[UserStore] Logout error:",t),or.create({type:"negative",message:"Failed to sign out",position:"top"}),{success:!1}}},async checkPremiumStatus(){if(this.user)try{const t=await oL(Ta(Yi,"users",this.user.uid));if(t.exists()){const e=t.data();this.isPremium=e.isPremium||!1,this.premiumExpiry=e.premiumExpiry,this.isPremium&&this.premiumExpiry&&new Date(this.premiumExpiry)<new Date&&(await this.updatePremiumStatus(!1,null),this.isPremium=!1,this.premiumExpiry=null,or.create({type:"warning",message:"Your premium subscription has expired",position:"top"}))}else console.warn("[UserStore] User document not found, creating..."),await this.createUserDocument()}catch(t){console.error("[UserStore] Error checking premium status:",t)}},async createUserDocument(){if(this.user)try{await Fv(Ta(Yi,"users",this.user.uid),{email:this.user.email,displayName:this.user.displayName||"User",isPremium:!1,createdAt:new Date().toISOString(),premiumExpiry:null}),this.isPremium=!1,this.premiumExpiry=null,console.log("[UserStore] User document created successfully")}catch(t){console.error("[UserStore] Error creating user document:",t)}},async updatePremiumStatus(t,e){if(this.user)try{return await aL(Ta(Yi,"users",this.user.uid),{isPremium:t,premiumExpiry:e,lastUpdated:new Date().toISOString()}),this.isPremium=t,this.premiumExpiry=e,{success:!0}}catch(n){return console.error("[UserStore] Error updating premium status:",n),{success:!1}}},async activatePremium(t=1){const e=new Date;e.setMonth(e.getMonth()+t),await this.updatePremiumStatus(!0,e.toISOString()),or.create({type:"positive",message:`Premium activated until ${e.toLocaleDateString()}`,position:"top"})}}}),xd=SP(function(){const e=Vk({scrollBehavior:()=>({left:0,top:0}),routes:Dk,history:uk("/")});return e.beforeEach(async(n,r,s)=>{const i=p2();if(i.loading&&await i.initAuth(),n.meta.requiresAuth&&!i.isAuthenticated){s("/auth");return}if(n.meta.requiresPremium&&!i.isPremium){s("/account");return}if(n.path==="/auth"&&i.isAuthenticated){s("/");return}s()}),e});async function m2(t,e){const n=t(TP);n.use(EP,e);const r=_i(typeof xd=="function"?await xd({}):xd);return{app:n,router:r}}function g2(t,e,n){let r;function s(){r!==void 0&&(tf.remove(r),r=void 0)}return Tn(()=>{t.value===!0&&s()}),{removeFromHistory:s,addToHistory(){r={condition:()=>n.value===!0,handler:e},tf.add(r)}}}function _2(){let t=null;const e=tt();function n(){t!==null&&(clearTimeout(t),t=null)}return zu(n),Tn(n),{removeTimeout:n,registerTimeout(r,s){n(),uS(e)===!1&&(t=setTimeout(()=>{t=null,r()},s))}}}function y2(){let t;const e=tt();function n(){t=void 0}return zu(n),Tn(n),{removeTick:n,registerTick(r){t=r,en(()=>{t===r&&(uS(e)===!1&&t(),t=void 0)})}}}const v2={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},E2=["beforeShow","show","beforeHide","hide"];function w2({showing:t,canShow:e,hideOnRouteChange:n,handleShow:r,handleHide:s,processOnMount:i}){const o=tt(),{props:a,emit:l,proxy:u}=o;let h;function d(S){t.value===!0?T(S):p(S)}function p(S){if(a.disable===!0||S?.qAnchorHandled===!0||e!==void 0&&e(S)!==!0)return;const x=a["onUpdate:modelValue"]!==void 0;x===!0&&(l("update:modelValue",!0),h=S,en(()=>{h===S&&(h=void 0)})),(a.modelValue===null||x===!1)&&g(S)}function g(S){t.value!==!0&&(t.value=!0,l("beforeShow",S),r!==void 0?r(S):l("show",S))}function T(S){if(a.disable===!0)return;const x=a["onUpdate:modelValue"]!==void 0;x===!0&&(l("update:modelValue",!1),h=S,en(()=>{h===S&&(h=void 0)})),(a.modelValue===null||x===!1)&&P(S)}function P(S){t.value!==!1&&(t.value=!1,l("beforeHide",S),s!==void 0?s(S):l("hide",S))}function C(S){a.disable===!0&&S===!0?a["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):S===!0!==t.value&&(S===!0?g:P)(h)}Ge(()=>a.modelValue,C),n!==void 0&&cS(o)===!0&&Ge(()=>u.$route.fullPath,()=>{n.value===!0&&t.value===!0&&T()}),i===!0&&Tr(()=>{C(a.modelValue)});const D={show:p,hide:T,toggle:d};return Object.assign(u,D),D}const b2={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function I2(t,e=()=>{},n=()=>{}){return{transitionProps:$(()=>{const r=`q-transition--${t.transitionShow||e()}`,s=`q-transition--${t.transitionHide||n()}`;return{appear:!0,enterFromClass:`${r}-enter-from`,enterActiveClass:`${r}-enter-active`,enterToClass:`${r}-enter-to`,leaveFromClass:`${s}-leave-from`,leaveActiveClass:`${s}-leave-active`,leaveToClass:`${s}-leave-to`}}),transitionStyle:$(()=>`--q-transition-duration: ${t.transitionDuration}ms`)}}let Hs=[],wl=[];function gS(t){wl=wl.filter(e=>e!==t)}function T2(t){gS(t),wl.push(t)}function Zv(t){gS(t),wl.length===0&&Hs.length!==0&&(Hs[Hs.length-1](),Hs=[])}function Um(t){wl.length===0?t():Hs.push(t)}function A2(t){Hs=Hs.filter(e=>e!==t)}const zc=[];function wB(t){return zc.find(e=>e.contentEl!==null&&e.contentEl.contains(t))}function S2(t,e){do{if(t.$options.name==="QMenu"){if(t.hide(e),t.$props.separateClosePopup===!0)return qc(t)}else if(t.__qPortal===!0){const n=qc(t);return n?.$options.name==="QPopupProxy"?(t.hide(e),n):t}t=qc(t)}while(t!=null)}function bB(t,e,n){for(;n!==0&&t!==void 0&&t!==null;){if(t.__qPortal===!0){if(n--,t.$options.name==="QMenu"){t=S2(t,e);continue}t.hide(e)}t=qc(t)}}const R2=Vt({name:"QPortal",setup(t,{slots:e}){return()=>e.default()}});function C2(t){for(t=t.parent;t!=null;){if(t.type.name==="QGlobalDialog")return!0;if(t.type.name==="QDialog"||t.type.name==="QMenu")return!1;t=t.parent}return!1}function P2(t,e,n,r){const s=Ne(!1),i=Ne(!1);let o=null;const a={},l=r==="dialog"&&C2(t);function u(d){if(d===!0){Zv(a),i.value=!0;return}i.value=!1,s.value===!1&&(l===!1&&o===null&&(o=xh(!1,r)),s.value=!0,zc.push(t.proxy),T2(a))}function h(d){if(i.value=!1,d!==!0)return;Zv(a),s.value=!1;const p=zc.indexOf(t.proxy);p!==-1&&zc.splice(p,1),o!==null&&(Lm(o),o=null)}return vp(()=>{h(!0)}),t.proxy.__qPortal=!0,yi(t.proxy,"contentEl",()=>e.value),{showPortal:u,hidePortal:h,portalIsActive:s,portalIsAccessible:i,renderPortal:()=>l===!0?n():s.value===!0?[j(aR,{to:o},j(R2,n))]:void 0}}const IB=[Element,String],k2=[null,document,document.body,document.scrollingElement,document.documentElement];function TB(t,e){let n=zF(e);if(n===void 0){if(t==null)return window;n=t.closest(".scroll,.scroll-y,.overflow-auto")}return k2.includes(n)?window:n}function _S(t){return t===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:t.scrollTop}function yS(t){return t===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:t.scrollLeft}function vS(t,e,n=0){const r=arguments[3]===void 0?performance.now():arguments[3],s=_S(t);if(n<=0){s!==e&&Jf(t,e);return}requestAnimationFrame(i=>{const o=i-r,a=s+(e-s)/Math.max(o,n)*o;Jf(t,a),a!==e&&vS(t,e,n-o,i)})}function ES(t,e,n=0){const r=arguments[3]===void 0?performance.now():arguments[3],s=yS(t);if(n<=0){s!==e&&Yf(t,e);return}requestAnimationFrame(i=>{const o=i-r,a=s+(e-s)/Math.max(o,n)*o;Yf(t,a),a!==e&&ES(t,e,n-o,i)})}function Jf(t,e){if(t===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,e);return}t.scrollTop=e}function Yf(t,e){if(t===window){window.scrollTo(e,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}t.scrollLeft=e}function AB(t,e,n){if(n){vS(t,e,n);return}Jf(t,e)}function SB(t,e,n){if(n){ES(t,e,n);return}Yf(t,e)}let pc;function RB(){if(pc!==void 0)return pc;const t=document.createElement("p"),e=document.createElement("div");Wf(t,{width:"100%",height:"200px"}),Wf(e,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);const n=t.offsetWidth;e.style.overflow="scroll";let r=t.offsetWidth;return n===r&&(r=e.clientWidth),e.remove(),pc=n-r,pc}function x2(t,e=!0){return!t||t.nodeType!==Node.ELEMENT_NODE?!1:e?t.scrollHeight>t.clientHeight&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-y"])):t.scrollWidth>t.clientWidth&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-x"]))}let pa=0,Vd,Dd,Ra,Nd=!1,eE,tE,nE,Vs=null;function V2(t){D2(t)&&vn(t)}function D2(t){if(t.target===document.body||t.target.classList.contains("q-layout__backdrop"))return!0;const e=ZC(t),n=t.shiftKey&&!t.deltaX,r=!n&&Math.abs(t.deltaX)<=Math.abs(t.deltaY),s=n||r?t.deltaY:t.deltaX;for(let i=0;i<e.length;i++){const o=e[i];if(x2(o,r))return r?s<0&&o.scrollTop===0?!0:s>0&&o.scrollTop+o.clientHeight===o.scrollHeight:s<0&&o.scrollLeft===0?!0:s>0&&o.scrollLeft+o.clientWidth===o.scrollWidth}return!0}function rE(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function mc(t){Nd!==!0&&(Nd=!0,requestAnimationFrame(()=>{Nd=!1;const{height:e}=t.target,{clientHeight:n,scrollTop:r}=document.scrollingElement;(Ra===void 0||e!==window.innerHeight)&&(Ra=n-e,document.scrollingElement.scrollTop=r),r>Ra&&(document.scrollingElement.scrollTop-=Math.ceil((r-Ra)/8))}))}function sE(t){const e=document.body,n=window.visualViewport!==void 0;if(t==="add"){const{overflowY:r,overflowX:s}=window.getComputedStyle(e);Vd=yS(window),Dd=_S(window),eE=e.style.left,tE=e.style.top,nE=window.location.href,e.style.left=`-${Vd}px`,e.style.top=`-${Dd}px`,s!=="hidden"&&(s==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),r!=="hidden"&&(r==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,ut.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",mc,Zt.passiveCapture),window.visualViewport.addEventListener("scroll",mc,Zt.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",rE,Zt.passiveCapture))}ut.is.desktop===!0&&ut.is.mac===!0&&window[`${t}EventListener`]("wheel",V2,Zt.notPassive),t==="remove"&&(ut.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",mc,Zt.passiveCapture),window.visualViewport.removeEventListener("scroll",mc,Zt.passiveCapture)):window.removeEventListener("scroll",rE,Zt.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=eE,e.style.top=tE,window.location.href===nE&&window.scrollTo(Vd,Dd),Ra=void 0)}function Xf(t){let e="add";if(t===!0){if(pa++,Vs!==null){clearTimeout(Vs),Vs=null;return}if(pa>1)return}else{if(pa===0||(pa--,pa>0))return;if(e="remove",ut.is.ios===!0&&ut.is.nativeMobile===!0){Vs!==null&&clearTimeout(Vs),Vs=setTimeout(()=>{sE(e),Vs=null},100);return}}sE(e)}function N2(){let t;return{preventBodyScroll(e){e!==t&&(t!==void 0||e===!0)&&(t=e,Xf(e))}}}const ni=[];let Do;function O2(t){Do=t.keyCode===27}function M2(){Do===!0&&(Do=!1)}function L2(t){Do===!0&&(Do=!1,rl(t,27)===!0&&ni[ni.length-1](t))}function wS(t){window[t]("keydown",O2),window[t]("blur",M2),window[t]("keyup",L2),Do=!1}function F2(t){ut.is.desktop===!0&&(ni.push(t),ni.length===1&&wS("addEventListener"))}function iE(t){const e=ni.indexOf(t);e!==-1&&(ni.splice(e,1),ni.length===0&&wS("removeEventListener"))}const ri=[];function bS(t){ri[ri.length-1](t)}function U2(t){ut.is.desktop===!0&&(ri.push(t),ri.length===1&&document.body.addEventListener("focusin",bS))}function oE(t){const e=ri.indexOf(t);e!==-1&&(ri.splice(e,1),ri.length===0&&document.body.removeEventListener("focusin",bS))}let gc=0;const B2={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},aE={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},q2=Vt({name:"QDialog",inheritAttrs:!1,props:{...v2,...b2,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:t=>["standard","top","bottom","left","right"].includes(t)}},emits:[...E2,"shake","click","escapeKey"],setup(t,{slots:e,emit:n,attrs:r}){const s=tt(),i=Ne(null),o=Ne(!1),a=Ne(!1);let l=null,u=null,h,d;const p=$(()=>t.persistent!==!0&&t.noRouteDismiss!==!0&&t.seamless!==!0),{preventBodyScroll:g}=N2(),{registerTimeout:T}=_2(),{registerTick:P,removeTick:C}=y2(),{transitionProps:D,transitionStyle:S}=I2(t,()=>aE[t.position][0],()=>aE[t.position][1]),x=$(()=>S.value+(t.backdropFilter!==void 0?`;backdrop-filter:${t.backdropFilter};-webkit-backdrop-filter:${t.backdropFilter}`:"")),{showPortal:V,hidePortal:L,portalIsAccessible:q,renderPortal:A}=P2(s,i,Xe,"dialog"),{hide:y}=w2({showing:o,hideOnRouteChange:p,handleShow:ne,handleHide:ue,processOnMount:!0}),{addToHistory:w,removeFromHistory:E}=g2(o,y,p),v=$(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${t.maximized===!0?"maximized":"minimized"} q-dialog__inner--${t.position} ${B2[t.position]}`+(a.value===!0?" q-dialog__inner--animating":"")+(t.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(t.fullHeight===!0?" q-dialog__inner--fullheight":"")+(t.square===!0?" q-dialog__inner--square":"")),b=$(()=>o.value===!0&&t.seamless!==!0),_=$(()=>t.autoClose===!0?{onClick:Q}:{}),U=$(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${b.value===!0?"modal":"seamless"}`,r.class]);Ge(()=>t.maximized,pe=>{o.value===!0&&Ie(pe)}),Ge(b,pe=>{g(pe),pe===!0?(U2(Ue),F2(ye)):(oE(Ue),iE(ye))});function ne(pe){w(),u=t.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,Ie(t.maximized),V(),a.value=!0,t.noFocus!==!0?(document.activeElement?.blur(),P(ee)):C(),T(()=>{if(s.proxy.$q.platform.is.ios===!0){if(t.seamless!==!0&&document.activeElement){const{top:F,bottom:se}=document.activeElement.getBoundingClientRect(),{innerHeight:oe}=window,de=window.visualViewport!==void 0?window.visualViewport.height:oe;F>0&&se>de/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-de,se>=oe?1/0:Math.ceil(document.scrollingElement.scrollTop+se-de/2))),document.activeElement.scrollIntoView()}d=!0,i.value.click(),d=!1}V(!0),a.value=!1,n("show",pe)},t.transitionDuration)}function ue(pe){C(),E(),Je(!0),a.value=!0,L(),u!==null&&(((pe?.type.indexOf("key")===0?u.closest('[tabindex]:not([tabindex^="-"])'):void 0)||u).focus(),u=null),T(()=>{L(!0),a.value=!1,n("hide",pe)},t.transitionDuration)}function ee(pe){Um(()=>{let F=i.value;if(F!==null){if(pe!==void 0){const se=F.querySelector(pe);if(se!==null){se.focus({preventScroll:!0});return}}F.contains(document.activeElement)!==!0&&(F=F.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||F.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||F.querySelector("[autofocus], [data-autofocus]")||F,F.focus({preventScroll:!0}))}})}function K(pe){pe&&typeof pe.focus=="function"?pe.focus({preventScroll:!0}):ee(),n("shake");const F=i.value;F!==null&&(F.classList.remove("q-animate--scale"),F.classList.add("q-animate--scale"),l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,i.value!==null&&(F.classList.remove("q-animate--scale"),ee())},170))}function ye(){t.seamless!==!0&&(t.persistent===!0||t.noEscDismiss===!0?t.maximized!==!0&&t.noShake!==!0&&K():(n("escapeKey"),y()))}function Je(pe){l!==null&&(clearTimeout(l),l=null),(pe===!0||o.value===!0)&&(Ie(!1),t.seamless!==!0&&(g(!1),oE(Ue),iE(ye))),pe!==!0&&(u=null)}function Ie(pe){pe===!0?h!==!0&&(gc<1&&document.body.classList.add("q-body--dialog"),gc++,h=!0):h===!0&&(gc<2&&document.body.classList.remove("q-body--dialog"),gc--,h=!1)}function Q(pe){d!==!0&&(y(pe),n("click",pe))}function Re(pe){t.persistent!==!0&&t.noBackdropDismiss!==!0?y(pe):t.noShake!==!0&&K()}function Ue(pe){t.allowFocusOutside!==!0&&q.value===!0&&KF(i.value,pe.target)!==!0&&ee('[tabindex]:not([tabindex="-1"])')}Object.assign(s.proxy,{focus:ee,shake:K,__updateRefocusTarget(pe){u=pe||null}}),Tn(Je);function Xe(){return j("div",{role:"dialog","aria-modal":b.value===!0?"true":"false",...r,class:U.value},[j(nl,{name:"q-transition--fade",appear:!0},()=>b.value===!0?j("div",{class:"q-dialog__backdrop fixed-full",style:x.value,"aria-hidden":"true",tabindex:-1,onClick:Re}):null),j(nl,D.value,()=>o.value===!0?j("div",{ref:i,class:v.value,style:S.value,tabindex:-1,..._.value},xn(e.default)):null)])}return A}}),Ti={dark:{type:Boolean,default:null}};function Ai(t,e){return $(()=>t.dark===null?e.dark.isActive:t.dark)}const $2=Vt({name:"QCard",props:{...Ti,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=tt(),r=Ai(t,n),s=$(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(t.bordered===!0?" q-card--bordered":"")+(t.square===!0?" q-card--square no-border-radius":"")+(t.flat===!0?" q-card--flat no-shadow":""));return()=>j(t.tag,{class:s.value},xn(e.default))}}),ma=Vt({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(t,{slots:e}){const n=$(()=>`q-card__section q-card__section--${t.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>j(t.tag,{class:n.value},xn(e.default))}}),j2=Vt({name:"QCardActions",props:{...oS,vertical:Boolean},setup(t,{slots:e}){const n=aS(t),r=$(()=>`q-card__actions ${n.value} q-card__actions--${t.vertical===!0?"vert column":"horiz row"}`);return()=>j("div",{class:r.value},xn(e.default))}}),z2={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},Od={xs:2,sm:4,md:8,lg:16,xl:24},lE=Vt({name:"QSeparator",props:{...Ti,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(t){const e=tt(),n=Ai(t,e.proxy.$q),r=$(()=>t.vertical===!0?"vertical":"horizontal"),s=$(()=>` q-separator--${r.value}`),i=$(()=>t.inset!==!1?`${s.value}-${z2[t.inset]}`:""),o=$(()=>`q-separator${s.value}${i.value}`+(t.color!==void 0?` bg-${t.color}`:"")+(n.value===!0?" q-separator--dark":"")),a=$(()=>{const l={};if(t.size!==void 0&&(l[t.vertical===!0?"width":"height"]=t.size),t.spaced!==!1){const u=t.spaced===!0?`${Od.md}px`:t.spaced in Od?`${Od[t.spaced]}px`:t.spaced,h=t.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${h[0]}`]=l[`margin${h[1]}`]=u}return l});return()=>j("hr",{class:o.value,style:a.value,"aria-orientation":r.value})}});let Md,_c=0;const Pt=new Array(256);for(let t=0;t<256;t++)Pt[t]=(t+256).toString(16).substring(1);const K2=(()=>{const t=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(t!==void 0){if(t.randomBytes!==void 0)return t.randomBytes;if(t.getRandomValues!==void 0)return e=>{const n=new Uint8Array(e);return t.getRandomValues(n),n}}return e=>{const n=[];for(let r=e;r>0;r--)n.push(Math.floor(Math.random()*256));return n}})(),cE=4096;function Zf(){(Md===void 0||_c+16>cE)&&(_c=0,Md=K2(cE));const t=Array.prototype.slice.call(Md,_c,_c+=16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,Pt[t[0]]+Pt[t[1]]+Pt[t[2]]+Pt[t[3]]+"-"+Pt[t[4]]+Pt[t[5]]+"-"+Pt[t[6]]+Pt[t[7]]+"-"+Pt[t[8]]+Pt[t[9]]+"-"+Pt[t[10]]+Pt[t[11]]+Pt[t[12]]+Pt[t[13]]+Pt[t[14]]+Pt[t[15]]}function H2(t){return t??null}function uE(t,e){return t??(e===!0?`f_${Zf()}`:null)}function G2({getValue:t,required:e=!0}={}){if(us.value===!0){const n=Ne(t!==void 0?H2(t()):null);return e===!0&&n.value===null&&Tr(()=>{n.value=`f_${Zf()}`}),t!==void 0&&Ge(t,r=>{n.value=uE(r,e)}),n}return t!==void 0?$(()=>uE(t(),e)):Ne(`f_${Zf()}`)}const hE=/^on[A-Z]/;function W2(){const{attrs:t,vnode:e}=tt(),n={listeners:Ne({}),attributes:Ne({})};function r(){const s={},i={};for(const o in t)o!=="class"&&o!=="style"&&hE.test(o)===!1&&(s[o]=t[o]);for(const o in e.props)hE.test(o)===!0&&(i[o]=e.props[o]);n.attributes.value=s,n.listeners.value=i}return fw(r),r(),n}function Q2({validate:t,resetValidation:e,requiresQForm:n}){const r=bn(pP,!1);if(r!==!1){const{props:s,proxy:i}=tt();Object.assign(i,{validate:t,resetValidation:e}),Ge(()=>s.disable,o=>{o===!0?(typeof e=="function"&&e(),r.unbindComponent(i)):r.bindComponent(i)}),Tr(()=>{s.disable!==!0&&r.bindComponent(i)}),Tn(()=>{s.disable!==!0&&r.unbindComponent(i)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const dE=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,fE=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,pE=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,yc=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,vc=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,Ld={date:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t),time:t=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t),fulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t),timeOrFulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(t),email:t=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),hexColor:t=>dE.test(t),hexaColor:t=>fE.test(t),hexOrHexaColor:t=>pE.test(t),rgbColor:t=>yc.test(t),rgbaColor:t=>vc.test(t),rgbOrRgbaColor:t=>yc.test(t)||vc.test(t),hexOrRgbColor:t=>dE.test(t)||yc.test(t),hexaOrRgbaColor:t=>fE.test(t)||vc.test(t),anyColor:t=>pE.test(t)||yc.test(t)||vc.test(t)},J2=[!0,!1,"ondemand"],Y2={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:t=>J2.includes(t)}};function X2(t,e){const{props:n,proxy:r}=tt(),s=Ne(!1),i=Ne(null),o=Ne(!1);Q2({validate:P,resetValidation:T});let a=0,l;const u=$(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length!==0),h=$(()=>n.disable!==!0&&u.value===!0&&e.value===!1),d=$(()=>n.error===!0||s.value===!0),p=$(()=>typeof n.errorMessage=="string"&&n.errorMessage.length!==0?n.errorMessage:i.value);Ge(()=>n.modelValue,()=>{o.value=!0,h.value===!0&&n.lazyRules===!1&&C()});function g(){n.lazyRules!=="ondemand"&&h.value===!0&&o.value===!0&&C()}Ge(()=>n.reactiveRules,D=>{D===!0?l===void 0&&(l=Ge(()=>n.rules,g,{immediate:!0,deep:!0})):l!==void 0&&(l(),l=void 0)},{immediate:!0}),Ge(()=>n.lazyRules,g),Ge(t,D=>{D===!0?o.value=!0:h.value===!0&&n.lazyRules!=="ondemand"&&C()});function T(){a++,e.value=!1,o.value=!1,s.value=!1,i.value=null,C.cancel()}function P(D=n.modelValue){if(n.disable===!0||u.value===!1)return!0;const S=++a,x=e.value!==!0?()=>{o.value=!0}:()=>{},V=(q,A)=>{q===!0&&x(),s.value=q,i.value=A||null,e.value=!1},L=[];for(let q=0;q<n.rules.length;q++){const A=n.rules[q];let y;if(typeof A=="function"?y=A(D,Ld):typeof A=="string"&&Ld[A]!==void 0&&(y=Ld[A](D)),y===!1||typeof y=="string")return V(!0,y),!1;y!==!0&&y!==void 0&&L.push(y)}return L.length===0?(V(!1),!0):(e.value=!0,Promise.all(L).then(q=>{if(q===void 0||Array.isArray(q)===!1||q.length===0)return S===a&&V(!1),!0;const A=q.find(y=>y===!1||typeof y=="string");return S===a&&V(A!==void 0,A),A===void 0},q=>(S===a&&(console.error(q),V(!0)),!1)))}const C=Gw(P,0);return Tn(()=>{l?.(),C.cancel()}),Object.assign(r,{resetValidation:T,validate:P}),yi(r,"hasError",()=>d.value),{isDirtyModel:o,hasRules:u,hasError:d,errorMessage:p,validate:P,resetValidation:T}}function ep(t){return t!=null&&(""+t).length!==0}const Z2={...Ti,...Y2,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},eU={...Z2,maxlength:[Number,String]},tU=["update:modelValue","clear","focus","blur"];function nU({requiredForAttr:t=!0,tagProp:e,changeEvent:n=!1}={}){const{props:r,proxy:s}=tt(),i=Ai(r,s.$q),o=G2({required:t,getValue:()=>r.for});return{requiredForAttr:t,changeEvent:n,tag:e===!0?$(()=>r.tag):{value:"label"},isDark:i,editable:$(()=>r.disable!==!0&&r.readonly!==!0),innerLoading:Ne(!1),focused:Ne(!1),hasPopupOpen:!1,splitAttrs:W2(),targetUid:o,rootRef:Ne(null),targetRef:Ne(null),controlRef:Ne(null)}}function rU(t){const{props:e,emit:n,slots:r,attrs:s,proxy:i}=tt(),{$q:o}=i;let a=null;t.hasValue===void 0&&(t.hasValue=$(()=>ep(e.modelValue))),t.emitValue===void 0&&(t.emitValue=K=>{n("update:modelValue",K)}),t.controlEvents===void 0&&(t.controlEvents={onFocusin:w,onFocusout:E}),Object.assign(t,{clearValue:v,onControlFocusin:w,onControlFocusout:E,focus:A}),t.computedCounter===void 0&&(t.computedCounter=$(()=>{if(e.counter!==!1){const K=typeof e.modelValue=="string"||typeof e.modelValue=="number"?(""+e.modelValue).length:Array.isArray(e.modelValue)===!0?e.modelValue.length:0,ye=e.maxlength!==void 0?e.maxlength:e.maxValues;return K+(ye!==void 0?" / "+ye:"")}}));const{isDirtyModel:l,hasRules:u,hasError:h,errorMessage:d,resetValidation:p}=X2(t.focused,t.innerLoading),g=t.floatingLabel!==void 0?$(()=>e.stackLabel===!0||t.focused.value===!0||t.floatingLabel.value===!0):$(()=>e.stackLabel===!0||t.focused.value===!0||t.hasValue.value===!0),T=$(()=>e.bottomSlots===!0||e.hint!==void 0||u.value===!0||e.counter===!0||e.error!==null),P=$(()=>e.filled===!0?"filled":e.outlined===!0?"outlined":e.borderless===!0?"borderless":e.standout?"standout":"standard"),C=$(()=>`q-field row no-wrap items-start q-field--${P.value}`+(t.fieldClass!==void 0?` ${t.fieldClass.value}`:"")+(e.rounded===!0?" q-field--rounded":"")+(e.square===!0?" q-field--square":"")+(g.value===!0?" q-field--float":"")+(S.value===!0?" q-field--labeled":"")+(e.dense===!0?" q-field--dense":"")+(e.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(t.isDark.value===!0?" q-field--dark":"")+(t.getControl===void 0?" q-field--auto-height":"")+(t.focused.value===!0?" q-field--focused":"")+(h.value===!0?" q-field--error":"")+(h.value===!0||t.focused.value===!0?" q-field--highlighted":"")+(e.hideBottomSpace!==!0&&T.value===!0?" q-field--with-bottom":"")+(e.disable===!0?" q-field--disabled":e.readonly===!0?" q-field--readonly":"")),D=$(()=>"q-field__control relative-position row no-wrap"+(e.bgColor!==void 0?` bg-${e.bgColor}`:"")+(h.value===!0?" text-negative":typeof e.standout=="string"&&e.standout.length!==0&&t.focused.value===!0?` ${e.standout}`:e.color!==void 0?` text-${e.color}`:"")),S=$(()=>e.labelSlot===!0||e.label!==void 0),x=$(()=>"q-field__label no-pointer-events absolute ellipsis"+(e.labelColor!==void 0&&h.value!==!0?` text-${e.labelColor}`:"")),V=$(()=>({id:t.targetUid.value,editable:t.editable.value,focused:t.focused.value,floatingLabel:g.value,modelValue:e.modelValue,emitValue:t.emitValue})),L=$(()=>{const K={};return t.targetUid.value&&(K.for=t.targetUid.value),e.disable===!0&&(K["aria-disabled"]="true"),K});function q(){const K=document.activeElement;let ye=t.targetRef?.value;ye&&(K===null||K.id!==t.targetUid.value)&&(ye.hasAttribute("tabindex")===!0||(ye=ye.querySelector("[tabindex]")),ye!==K&&ye?.focus({preventScroll:!0}))}function A(){Um(q)}function y(){A2(q);const K=document.activeElement;K!==null&&t.rootRef.value.contains(K)&&K.blur()}function w(K){a!==null&&(clearTimeout(a),a=null),t.editable.value===!0&&t.focused.value===!1&&(t.focused.value=!0,n("focus",K))}function E(K,ye){a!==null&&clearTimeout(a),a=setTimeout(()=>{a=null,!(document.hasFocus()===!0&&(t.hasPopupOpen===!0||t.controlRef===void 0||t.controlRef.value===null||t.controlRef.value.contains(document.activeElement)!==!1))&&(t.focused.value===!0&&(t.focused.value=!1,n("blur",K)),ye?.())})}function v(K){vn(K),o.platform.is.mobile!==!0?(t.targetRef?.value||t.rootRef.value).focus():t.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),e.type==="file"&&(t.inputRef.value.value=null),n("update:modelValue",null),t.changeEvent===!0&&n("change",null),n("clear",e.modelValue),en(()=>{const ye=l.value;p(),l.value=ye})}function b(K){[13,32].includes(K.keyCode)&&v(K)}function _(){const K=[];return r.prepend!==void 0&&K.push(j("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:Gr},r.prepend())),K.push(j("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},U())),h.value===!0&&e.noErrorIcon===!1&&K.push(ue("error",[j(br,{name:o.iconSet.field.error,color:"negative"})])),e.loading===!0||t.innerLoading.value===!0?K.push(ue("inner-loading-append",r.loading!==void 0?r.loading():[j(Vo,{color:e.color})])):e.clearable===!0&&t.hasValue.value===!0&&t.editable.value===!0&&K.push(ue("inner-clearable-append",[j(br,{class:"q-field__focusable-action",name:e.clearIcon||o.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":o.lang.label.clear,onKeyup:b,onClick:v})])),r.append!==void 0&&K.push(j("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:Gr},r.append())),t.getInnerAppend!==void 0&&K.push(ue("inner-append",t.getInnerAppend())),t.getControlChild!==void 0&&K.push(t.getControlChild()),K}function U(){const K=[];return e.prefix!==void 0&&e.prefix!==null&&K.push(j("div",{class:"q-field__prefix no-pointer-events row items-center"},e.prefix)),t.getShadowControl!==void 0&&t.hasShadow.value===!0&&K.push(t.getShadowControl()),S.value===!0&&K.push(j("div",{class:x.value},xn(r.label,e.label))),t.getControl!==void 0?K.push(t.getControl()):r.rawControl!==void 0?K.push(r.rawControl()):r.control!==void 0&&K.push(j("div",{ref:t.targetRef,class:"q-field__native row",tabindex:-1,...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0},r.control(V.value))),e.suffix!==void 0&&e.suffix!==null&&K.push(j("div",{class:"q-field__suffix no-pointer-events row items-center"},e.suffix)),K.concat(xn(r.default))}function ne(){let K,ye;h.value===!0?d.value!==null?(K=[j("div",{role:"alert"},d.value)],ye=`q--slot-error-${d.value}`):(K=xn(r.error),ye="q--slot-error"):(e.hideHint!==!0||t.focused.value===!0)&&(e.hint!==void 0?(K=[j("div",e.hint)],ye=`q--slot-hint-${e.hint}`):(K=xn(r.hint),ye="q--slot-hint"));const Je=e.counter===!0||r.counter!==void 0;if(e.hideBottomSpace===!0&&Je===!1&&K===void 0)return;const Ie=j("div",{key:ye,class:"q-field__messages col"},K);return j("div",{class:"q-field__bottom row items-start q-field__bottom--"+(e.hideBottomSpace!==!0?"animated":"stale"),onClick:Gr},[e.hideBottomSpace===!0?Ie:j(nl,{name:"q-transition--field-message"},()=>Ie),Je===!0?j("div",{class:"q-field__counter"},r.counter!==void 0?r.counter():t.computedCounter.value):null])}function ue(K,ye){return ye===null?null:j("div",{key:K,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},ye)}let ee=!1;return zu(()=>{ee=!0}),hw(()=>{ee===!0&&e.autofocus===!0&&i.focus()}),e.autofocus===!0&&Tr(()=>{i.focus()}),Tn(()=>{a!==null&&clearTimeout(a)}),Object.assign(i,{focus:A,blur:y}),function(){const ye=t.getControl===void 0&&r.control===void 0?{...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0,...L.value}:L.value;return j(t.tag.value,{ref:t.rootRef,class:[C.value,s.class],style:s.style,...ye},[r.before!==void 0?j("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:Gr},r.before()):null,j("div",{class:"q-field__inner relative-position col self-stretch"},[j("div",{ref:t.controlRef,class:D.value,tabindex:-1,...t.controlEvents},_()),T.value===!0?ne():null]),r.after!==void 0?j("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:Gr},r.after()):null])}}const mE={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},{tokenMap:gE,tokenKeys:sU}=IS({"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleLowerCase()}});function IS(t){const e=Object.keys(t),n={};return e.forEach(r=>{const s=t[r];n[r]={...s,regex:new RegExp(s.pattern)}}),{tokenMap:n,tokenKeys:e}}function TS(t){return new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+t.join("")+"])|(.)","g")}const _E=/[.*+?^${}()|[\]\\]/g,iU=TS(sU),pt="",oU={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean,maskTokens:Object};function aU(t,e,n,r){let s,i,o,a,l,u;const h=$(()=>{if(t.maskTokens===void 0||t.maskTokens===null)return{tokenMap:gE,tokenRegexMask:iU};const{tokenMap:E}=IS(t.maskTokens),v={...gE,...E};return{tokenMap:v,tokenRegexMask:TS(Object.keys(v))}}),d=Ne(null),p=Ne(T());function g(){return t.autogrow===!0||["textarea","text","search","url","tel","password"].includes(t.type)}Ge(()=>t.type+t.autogrow,C),Ge(()=>t.mask,E=>{if(E!==void 0)D(p.value,!0);else{const v=y(p.value);C(),t.modelValue!==v&&e("update:modelValue",v)}}),Ge(()=>t.fillMask+t.reverseFillMask,()=>{d.value===!0&&D(p.value,!0)}),Ge(()=>t.unmaskedValue,()=>{d.value===!0&&D(p.value)});function T(){if(C(),d.value===!0){const E=q(y(t.modelValue));return t.fillMask!==!1?w(E):E}return t.modelValue}function P(E){if(E<s.length)return s.slice(-E);let v="",b=s;const _=b.indexOf(pt);if(_!==-1){for(let U=E-b.length;U>0;U--)v+=pt;b=b.slice(0,_)+v+b.slice(_)}return b}function C(){if(d.value=t.mask!==void 0&&t.mask.length!==0&&g(),d.value===!1){a=void 0,s="",i="";return}const E=mE[t.mask]===void 0?t.mask:mE[t.mask],v=typeof t.fillMask=="string"&&t.fillMask.length!==0?t.fillMask.slice(0,1):"_",b=v.replace(_E,"\\$&"),_=[],U=[],ne=[];let ue=t.reverseFillMask===!0,ee="",K="";E.replace(h.value.tokenRegexMask,(Q,Re,Ue,Xe,pe)=>{if(Xe!==void 0){const F=h.value.tokenMap[Xe];ne.push(F),K=F.negate,ue===!0&&(U.push("(?:"+K+"+)?("+F.pattern+"+)?(?:"+K+"+)?("+F.pattern+"+)?"),ue=!1),U.push("(?:"+K+"+)?("+F.pattern+")?")}else if(Ue!==void 0)ee="\\"+(Ue==="\\"?"":Ue),ne.push(Ue),_.push("([^"+ee+"]+)?"+ee+"?");else{const F=Re!==void 0?Re:pe;ee=F==="\\"?"\\\\\\\\":F.replace(_E,"\\\\$&"),ne.push(F),_.push("([^"+ee+"]+)?"+ee+"?")}});const ye=new RegExp("^"+_.join("")+"("+(ee===""?".":"[^"+ee+"]")+"+)?"+(ee===""?"":"["+ee+"]*")+"$"),Je=U.length-1,Ie=U.map((Q,Re)=>Re===0&&t.reverseFillMask===!0?new RegExp("^"+b+"*"+Q):Re===Je?new RegExp("^"+Q+"("+(K===""?".":K)+"+)?"+(t.reverseFillMask===!0?"$":b+"*")):new RegExp("^"+Q));o=ne,a=Q=>{const Re=ye.exec(t.reverseFillMask===!0?Q:Q.slice(0,ne.length+1));Re!==null&&(Q=Re.slice(1).join(""));const Ue=[],Xe=Ie.length;for(let pe=0,F=Q;pe<Xe;pe++){const se=Ie[pe].exec(F);if(se===null)break;F=F.slice(se.shift().length),Ue.push(...se)}return Ue.length!==0?Ue.join(""):Q},s=ne.map(Q=>typeof Q=="string"?Q:pt).join(""),i=s.split(pt).join(v)}function D(E,v,b){const _=r.value,U=_.selectionEnd,ne=_.value.length-U,ue=y(E);v===!0&&C();const ee=q(ue,v),K=t.fillMask!==!1?w(ee):ee,ye=p.value!==K;_.value!==K&&(_.value=K),ye===!0&&(p.value=K),document.activeElement===_&&en(()=>{if(K===i){const Ie=t.reverseFillMask===!0?i.length:0;_.setSelectionRange(Ie,Ie,"forward");return}if(b==="insertFromPaste"&&t.reverseFillMask!==!0){const Ie=_.selectionEnd;let Q=U-1;for(let Re=l;Re<=Q&&Re<Ie;Re++)s[Re]!==pt&&Q++;x.right(_,Q);return}if(["deleteContentBackward","deleteContentForward"].indexOf(b)!==-1){const Ie=t.reverseFillMask===!0?U===0?K.length>ee.length?1:0:Math.max(0,K.length-(K===i?0:Math.min(ee.length,ne)+1))+1:U;_.setSelectionRange(Ie,Ie,"forward");return}if(t.reverseFillMask===!0)if(ye===!0){const Ie=Math.max(0,K.length-(K===i?0:Math.min(ee.length,ne+1)));Ie===1&&U===1?_.setSelectionRange(Ie,Ie,"forward"):x.rightReverse(_,Ie)}else{const Ie=K.length-ne;_.setSelectionRange(Ie,Ie,"backward")}else if(ye===!0){const Ie=Math.max(0,s.indexOf(pt),Math.min(ee.length,U)-1);x.right(_,Ie)}else{const Ie=U-1;x.right(_,Ie)}});const Je=t.unmaskedValue===!0?y(K):K;String(t.modelValue)!==Je&&(t.modelValue!==null||Je!=="")&&n(Je,!0)}function S(E,v,b){const _=q(y(E.value));v=Math.max(0,s.indexOf(pt),Math.min(_.length,v)),l=v,E.setSelectionRange(v,b,"forward")}const x={left(E,v){const b=s.slice(v-1).indexOf(pt)===-1;let _=Math.max(0,v-1);for(;_>=0;_--)if(s[_]===pt){v=_,b===!0&&v++;break}if(_<0&&s[v]!==void 0&&s[v]!==pt)return x.right(E,0);v>=0&&E.setSelectionRange(v,v,"backward")},right(E,v){const b=E.value.length;let _=Math.min(b,v+1);for(;_<=b;_++)if(s[_]===pt){v=_;break}else s[_-1]===pt&&(v=_);if(_>b&&s[v-1]!==void 0&&s[v-1]!==pt)return x.left(E,b);E.setSelectionRange(v,v,"forward")},leftReverse(E,v){const b=P(E.value.length);let _=Math.max(0,v-1);for(;_>=0;_--)if(b[_-1]===pt){v=_;break}else if(b[_]===pt&&(v=_,_===0))break;if(_<0&&b[v]!==void 0&&b[v]!==pt)return x.rightReverse(E,0);v>=0&&E.setSelectionRange(v,v,"backward")},rightReverse(E,v){const b=E.value.length,_=P(b),U=_.slice(0,v+1).indexOf(pt)===-1;let ne=Math.min(b,v+1);for(;ne<=b;ne++)if(_[ne-1]===pt){v=ne,v>0&&U===!0&&v--;break}if(ne>b&&_[v-1]!==void 0&&_[v-1]!==pt)return x.leftReverse(E,b);E.setSelectionRange(v,v,"forward")}};function V(E){e("click",E),u=void 0}function L(E){if(e("keydown",E),Qw(E)===!0||E.altKey===!0)return;const v=r.value,b=v.selectionStart,_=v.selectionEnd;if(E.shiftKey||(u=void 0),E.keyCode===37||E.keyCode===39){E.shiftKey&&u===void 0&&(u=v.selectionDirection==="forward"?b:_);const U=x[(E.keyCode===39?"right":"left")+(t.reverseFillMask===!0?"Reverse":"")];if(E.preventDefault(),U(v,u===b?_:b),E.shiftKey){const ne=v.selectionStart;v.setSelectionRange(Math.min(u,ne),Math.max(u,ne),"forward")}}else E.keyCode===8&&t.reverseFillMask!==!0&&b===_?(x.left(v,b),v.setSelectionRange(v.selectionStart,_,"backward")):E.keyCode===46&&t.reverseFillMask===!0&&b===_&&(x.rightReverse(v,_),v.setSelectionRange(b,v.selectionEnd,"forward"))}function q(E,v){if(E==null||E==="")return"";if(t.reverseFillMask===!0)return A(E,v);const b=o;let _=0,U="";for(let ne=0;ne<b.length;ne++){const ue=E[_],ee=b[ne];if(typeof ee=="string")U+=ee,v===!0&&ue===ee&&_++;else if(ue!==void 0&&ee.regex.test(ue))U+=ee.transform!==void 0?ee.transform(ue):ue,_++;else return U}return U}function A(E,v){const b=o,_=s.indexOf(pt);let U=E.length-1,ne="";for(let ue=b.length-1;ue>=0&&U!==-1;ue--){const ee=b[ue];let K=E[U];if(typeof ee=="string")ne=ee+ne,v===!0&&K===ee&&U--;else if(K!==void 0&&ee.regex.test(K))do ne=(ee.transform!==void 0?ee.transform(K):K)+ne,U--,K=E[U];while(_===ue&&K!==void 0&&ee.regex.test(K));else return ne}return ne}function y(E){return typeof E!="string"||a===void 0?typeof E=="number"?a(""+E):E:a(E)}function w(E){return i.length-E.length<=0?E:t.reverseFillMask===!0&&E.length!==0?i.slice(0,-E.length)+E:E+i.slice(E.length)}return{innerValue:p,hasMask:d,moveCursorForPaste:S,updateMaskValue:D,onMaskedKeydown:L,onMaskedClick:V}}const Bm={name:String};function AS(t={}){return(e,n,r)=>{e[n](j("input",{class:"hidden"+(r||""),...t.value}))}}function lU(t){return $(()=>t.name||t.for)}function cU(t,e){function n(){const r=t.modelValue;try{const s="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(r)===r&&("length"in r?Array.from(r):[r]).forEach(i=>{s.items.add(i)}),{files:s.files}}catch{return{files:void 0}}}return $(e===!0?()=>{if(t.type==="file")return n()}:n)}const uU=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,hU=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,dU=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,fU=/[a-z0-9_ -]$/i;function pU(t){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,t(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(ut.is.firefox===!0?fU.test(n.data)===!1:uU.test(n.data)===!0||hU.test(n.data)===!0||dU.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}const mU=Vt({name:"QInput",inheritAttrs:!1,props:{...eU,...oU,...Bm,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...tU,"paste","change","keydown","click","animationend"],setup(t,{emit:e,attrs:n}){const{proxy:r}=tt(),{$q:s}=r,i={};let o=NaN,a,l,u=null,h;const d=Ne(null),p=lU(t),{innerValue:g,hasMask:T,moveCursorForPaste:P,updateMaskValue:C,onMaskedKeydown:D,onMaskedClick:S}=aU(t,e,ue,d),x=cU(t,!0),V=$(()=>ep(g.value)),L=pU(U),q=nU({changeEvent:!0}),A=$(()=>t.type==="textarea"||t.autogrow===!0),y=$(()=>A.value===!0||["text","search","url","tel","password"].includes(t.type)),w=$(()=>{const Q={...q.splitAttrs.listeners.value,onInput:U,onPaste:_,onChange:K,onBlur:ye,onFocus:iu};return Q.onCompositionstart=Q.onCompositionupdate=Q.onCompositionend=L,T.value===!0&&(Q.onKeydown=D,Q.onClick=S),t.autogrow===!0&&(Q.onAnimationend=ne),Q}),E=$(()=>{const Q={tabindex:0,"data-autofocus":t.autofocus===!0||void 0,rows:t.type==="textarea"?6:void 0,"aria-label":t.label,name:p.value,...q.splitAttrs.attributes.value,id:q.targetUid.value,maxlength:t.maxlength,disabled:t.disable===!0,readonly:t.readonly===!0};return A.value===!1&&(Q.type=t.type),t.autogrow===!0&&(Q.rows=1),Q});Ge(()=>t.type,()=>{d.value&&(d.value.value=t.modelValue)}),Ge(()=>t.modelValue,Q=>{if(T.value===!0){if(l===!0&&(l=!1,String(Q)===o))return;C(Q)}else g.value!==Q&&(g.value=Q,t.type==="number"&&i.hasOwnProperty("value")===!0&&(a===!0?a=!1:delete i.value));t.autogrow===!0&&en(ee)}),Ge(()=>t.autogrow,Q=>{Q===!0?en(ee):d.value!==null&&n.rows>0&&(d.value.style.height="auto")}),Ge(()=>t.dense,()=>{t.autogrow===!0&&en(ee)});function v(){Um(()=>{const Q=document.activeElement;d.value!==null&&d.value!==Q&&(Q===null||Q.id!==q.targetUid.value)&&d.value.focus({preventScroll:!0})})}function b(){d.value?.select()}function _(Q){if(T.value===!0&&t.reverseFillMask!==!0){const Re=Q.target;P(Re,Re.selectionStart,Re.selectionEnd)}e("paste",Q)}function U(Q){if(!Q||!Q.target)return;if(t.type==="file"){e("update:modelValue",Q.target.files);return}const Re=Q.target.value;if(Q.target.qComposing===!0){i.value=Re;return}if(T.value===!0)C(Re,!1,Q.inputType);else if(ue(Re),y.value===!0&&Q.target===document.activeElement){const{selectionStart:Ue,selectionEnd:Xe}=Q.target;Ue!==void 0&&Xe!==void 0&&en(()=>{Q.target===document.activeElement&&Re.indexOf(Q.target.value)===0&&Q.target.setSelectionRange(Ue,Xe)})}t.autogrow===!0&&ee()}function ne(Q){e("animationend",Q),ee()}function ue(Q,Re){h=()=>{u=null,t.type!=="number"&&i.hasOwnProperty("value")===!0&&delete i.value,t.modelValue!==Q&&o!==Q&&(o=Q,Re===!0&&(l=!0),e("update:modelValue",Q),en(()=>{o===Q&&(o=NaN)})),h=void 0},t.type==="number"&&(a=!0,i.value=Q),t.debounce!==void 0?(u!==null&&clearTimeout(u),i.value=Q,u=setTimeout(h,t.debounce)):h()}function ee(){requestAnimationFrame(()=>{const Q=d.value;if(Q!==null){const Re=Q.parentNode.style,{scrollTop:Ue}=Q,{overflowY:Xe,maxHeight:pe}=s.platform.is.firefox===!0?{}:window.getComputedStyle(Q),F=Xe!==void 0&&Xe!=="scroll";F===!0&&(Q.style.overflowY="hidden"),Re.marginBottom=Q.scrollHeight-1+"px",Q.style.height="1px",Q.style.height=Q.scrollHeight+"px",F===!0&&(Q.style.overflowY=parseInt(pe,10)<Q.scrollHeight?"auto":"hidden"),Re.marginBottom="",Q.scrollTop=Ue}})}function K(Q){L(Q),u!==null&&(clearTimeout(u),u=null),h?.(),e("change",Q.target.value)}function ye(Q){Q!==void 0&&iu(Q),u!==null&&(clearTimeout(u),u=null),h?.(),a=!1,l=!1,delete i.value,t.type!=="file"&&setTimeout(()=>{d.value!==null&&(d.value.value=g.value!==void 0?g.value:"")})}function Je(){return i.hasOwnProperty("value")===!0?i.value:g.value!==void 0?g.value:""}Tn(()=>{ye()}),Tr(()=>{t.autogrow===!0&&ee()}),Object.assign(q,{innerValue:g,fieldClass:$(()=>`q-${A.value===!0?"textarea":"input"}`+(t.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:$(()=>t.type!=="file"&&typeof t.shadowText=="string"&&t.shadowText.length!==0),inputRef:d,emitValue:ue,hasValue:V,floatingLabel:$(()=>V.value===!0&&(t.type!=="number"||isNaN(g.value)===!1)||ep(t.displayValue)),getControl:()=>j(A.value===!0?"textarea":"input",{ref:d,class:["q-field__native q-placeholder",t.inputClass],style:t.inputStyle,...E.value,...w.value,...t.type!=="file"?{value:Je()}:x.value}),getShadowControl:()=>j("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(A.value===!0?"":" text-no-wrap")},[j("span",{class:"invisible"},Je()),j("span",t.shadowText)])});const Ie=rU(q);return Object.assign(r,{focus:v,select:b,getNativeElement:()=>d.value}),yi(r,"nativeEl",()=>d.value),Ie}});function SS(t,e){const n=Ne(null),r=$(()=>t.disable===!0?null:j("span",{ref:n,class:"no-outline",tabindex:-1}));function s(i){const o=e.value;i?.qAvoidFocus!==!0&&(i?.type.indexOf("key")===0?document.activeElement!==o&&o?.contains(document.activeElement)===!0&&o.focus():n.value!==null&&(i===void 0||o?.contains(i.target)===!0)&&n.value.focus())}return{refocusTargetEl:r,refocusTarget:s}}const RS={xs:30,sm:35,md:40,lg:50,xl:60},gU=()=>j("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[j("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),j("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),_U=Vt({name:"QRadio",props:{...Ti,...Bl,...Bm,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(t,{slots:e,emit:n}){const{proxy:r}=tt(),s=Ai(t,r.$q),i=ql(t,RS),o=Ne(null),{refocusTargetEl:a,refocusTarget:l}=SS(t,o),u=$(()=>Ae(t.modelValue)===Ae(t.val)),h=$(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(t.disable===!0?" disabled":"")+(s.value===!0?" q-radio--dark":"")+(t.dense===!0?" q-radio--dense":"")+(t.leftLabel===!0?" reverse":"")),d=$(()=>{const V=t.color!==void 0&&(t.keepColor===!0||u.value===!0)?` text-${t.color}`:"";return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${V}`}),p=$(()=>(u.value===!0?t.checkedIcon:t.uncheckedIcon)||null),g=$(()=>t.disable===!0?-1:t.tabindex||0),T=$(()=>{const V={type:"radio"};return t.name!==void 0&&Object.assign(V,{".checked":u.value===!0,"^checked":u.value===!0?"checked":void 0,name:t.name,value:t.val}),V}),P=AS(T);function C(V){V!==void 0&&(vn(V),l(V)),t.disable!==!0&&u.value!==!0&&n("update:modelValue",t.val,V)}function D(V){(V.keyCode===13||V.keyCode===32)&&vn(V)}function S(V){(V.keyCode===13||V.keyCode===32)&&C(V)}Object.assign(r,{set:C});const x=gU();return()=>{const V=p.value!==null?[j("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[j(br,{class:"q-radio__icon",name:p.value})])]:[x];t.disable!==!0&&P(V,"unshift"," q-radio__native q-ma-none q-pa-none");const L=[j("div",{class:d.value,style:i.value,"aria-hidden":"true"},V)];a.value!==null&&L.push(a.value);const q=t.label!==void 0?Ks(e.default,[t.label]):xn(e.default);return q!==void 0&&L.push(j("div",{class:"q-radio__label q-anchor--skip"},q)),j("div",{ref:o,class:h.value,tabindex:g.value,role:"radio","aria-label":t.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:C,onKeydown:D,onKeyup:S},L)}}}),CS={...Ti,...Bl,...Bm,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},PS=["update:modelValue"];function kS(t,e){const{props:n,slots:r,emit:s,proxy:i}=tt(),{$q:o}=i,a=Ai(n,o),l=Ne(null),{refocusTargetEl:u,refocusTarget:h}=SS(n,l),d=ql(n,RS),p=$(()=>n.val!==void 0&&Array.isArray(n.modelValue)),g=$(()=>{const b=Ae(n.val);return p.value===!0?n.modelValue.findIndex(_=>Ae(_)===b):-1}),T=$(()=>p.value===!0?g.value!==-1:Ae(n.modelValue)===Ae(n.trueValue)),P=$(()=>p.value===!0?g.value===-1:Ae(n.modelValue)===Ae(n.falseValue)),C=$(()=>T.value===!1&&P.value===!1),D=$(()=>n.disable===!0?-1:n.tabindex||0),S=$(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(n.disable===!0?" disabled":"")+(a.value===!0?` q-${t}--dark`:"")+(n.dense===!0?` q-${t}--dense`:"")+(n.leftLabel===!0?" reverse":"")),x=$(()=>{const b=T.value===!0?"truthy":P.value===!0?"falsy":"indet",_=n.color!==void 0&&(n.keepColor===!0||(t==="toggle"?T.value===!0:P.value!==!0))?` text-${n.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${b}${_}`}),V=$(()=>{const b={type:"checkbox"};return n.name!==void 0&&Object.assign(b,{".checked":T.value,"^checked":T.value===!0?"checked":void 0,name:n.name,value:p.value===!0?n.val:n.trueValue}),b}),L=AS(V),q=$(()=>{const b={tabindex:D.value,role:t==="toggle"?"switch":"checkbox","aria-label":n.label,"aria-checked":C.value===!0?"mixed":T.value===!0?"true":"false"};return n.disable===!0&&(b["aria-disabled"]="true"),b});function A(b){b!==void 0&&(vn(b),h(b)),n.disable!==!0&&s("update:modelValue",y(),b)}function y(){if(p.value===!0){if(T.value===!0){const b=n.modelValue.slice();return b.splice(g.value,1),b}return n.modelValue.concat([n.val])}if(T.value===!0){if(n.toggleOrder!=="ft"||n.toggleIndeterminate===!1)return n.falseValue}else if(P.value===!0){if(n.toggleOrder==="ft"||n.toggleIndeterminate===!1)return n.trueValue}else return n.toggleOrder!=="ft"?n.trueValue:n.falseValue;return n.indeterminateValue}function w(b){(b.keyCode===13||b.keyCode===32)&&vn(b)}function E(b){(b.keyCode===13||b.keyCode===32)&&A(b)}const v=e(T,C);return Object.assign(i,{toggle:A}),()=>{const b=v();n.disable!==!0&&L(b,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const _=[j("div",{class:x.value,style:d.value,"aria-hidden":"true"},b)];u.value!==null&&_.push(u.value);const U=n.label!==void 0?Ks(r.default,[n.label]):xn(r.default);return U!==void 0&&_.push(j("div",{class:`q-${t}__label q-anchor--skip`},U)),j("div",{ref:l,class:S.value,...q.value,onClick:A,onKeydown:w,onKeyup:E},_)}}const yU=()=>j("div",{key:"svg",class:"q-checkbox__bg absolute"},[j("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[j("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),j("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),vU=Vt({name:"QCheckbox",props:CS,emits:PS,setup(t){const e=yU();function n(r,s){const i=$(()=>(r.value===!0?t.checkedIcon:s.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>i.value!==null?[j("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[j(br,{class:"q-checkbox__icon",name:i.value})])]:[e]}return kS("checkbox",n)}}),EU=Vt({name:"QToggle",props:{...CS,icon:String,iconColor:String},emits:PS,setup(t){function e(n,r){const s=$(()=>(n.value===!0?t.checkedIcon:r.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),i=$(()=>n.value===!0?t.iconColor:null);return()=>[j("div",{class:"q-toggle__track"}),j("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},s.value!==void 0?[j(br,{name:s.value,color:i.value})]:void 0)]}return kS("toggle",e)}}),xS={radio:_U,checkbox:vU,toggle:EU},wU=Object.keys(xS);function Fd(t,e){if(typeof t=="function")return t;const n=t!==void 0?t:e;return r=>r[n]}const bU=Vt({name:"QOptionGroup",props:{...Ti,modelValue:{required:!0},options:{type:Array,validator:t=>t.every(ln),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:t=>wU.includes(t)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(t,{emit:e,slots:n}){const{proxy:{$q:r}}=tt(),s=Array.isArray(t.modelValue);t.type==="radio"?s===!0&&console.error("q-option-group: model should not be array"):s===!1&&console.error("q-option-group: model should be array in your case");const i=Ai(t,r),o=$(()=>xS[t.type]),a=$(()=>Fd(t.optionValue,"value")),l=$(()=>Fd(t.optionLabel,"label")),u=$(()=>Fd(t.optionDisable,"disable")),h=$(()=>t.options.map(T=>({val:a.value(T),name:T.name===void 0?t.name:T.name,disable:t.disable||u.value(T),leftLabel:T.leftLabel===void 0?t.leftLabel:T.leftLabel,color:T.color===void 0?t.color:T.color,checkedIcon:T.checkedIcon,uncheckedIcon:T.uncheckedIcon,dark:T.dark===void 0?i.value:T.dark,size:T.size===void 0?t.size:T.size,dense:t.dense,keepColor:T.keepColor===void 0?t.keepColor:T.keepColor}))),d=$(()=>"q-option-group q-gutter-x-sm"+(t.inline===!0?" q-option-group--inline":"")),p=$(()=>{const T={role:"group"};return t.type==="radio"&&(T.role="radiogroup",t.disable===!0&&(T["aria-disabled"]="true")),T});function g(T){e("update:modelValue",T)}return()=>j("div",{class:d.value,...p.value},t.options.map((T,P)=>{const C=n["label-"+P]!==void 0?()=>n["label-"+P](T):n.label!==void 0?()=>n.label(T):void 0;return j("div",[j(o.value,{label:C===void 0?l.value(T):null,modelValue:t.modelValue,"onUpdate:modelValue":g,...h.value[P]},C)])}))}}),IU=Vt({name:"DialogPluginComponent",props:{...Ti,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:t=>["ok","cancel","none"].includes(t)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(t,{emit:e}){const{proxy:n}=tt(),{$q:r}=n,s=Ai(t,r),i=Ne(null),o=Ne(t.prompt!==void 0?t.prompt.model:t.options!==void 0?t.options.model:void 0),a=$(()=>"q-dialog-plugin"+(s.value===!0?" q-dialog-plugin--dark q-dark":"")+(t.progress!==!1?" q-dialog-plugin--progress":"")),l=$(()=>t.color||(s.value===!0?"amber":"primary")),u=$(()=>t.progress===!1?null:ln(t.progress)===!0?{component:t.progress.spinner||Vo,props:{color:t.progress.color||l.value}}:{component:Vo,props:{color:l.value}}),h=$(()=>t.prompt!==void 0||t.options!==void 0),d=$(()=>{if(h.value!==!0)return{};const{model:U,isValid:ne,items:ue,...ee}=t.prompt!==void 0?t.prompt:t.options;return ee}),p=$(()=>ln(t.ok)===!0||t.ok===!0?r.lang.label.ok:t.ok),g=$(()=>ln(t.cancel)===!0||t.cancel===!0?r.lang.label.cancel:t.cancel),T=$(()=>t.prompt!==void 0?t.prompt.isValid!==void 0&&t.prompt.isValid(o.value)!==!0:t.options!==void 0?t.options.isValid!==void 0&&t.options.isValid(o.value)!==!0:!1),P=$(()=>({color:l.value,label:p.value,ripple:!1,disable:T.value,...ln(t.ok)===!0?t.ok:{flat:!0},"data-autofocus":t.focus==="ok"&&h.value!==!0||void 0,onClick:x})),C=$(()=>({color:l.value,label:g.value,ripple:!1,...ln(t.cancel)===!0?t.cancel:{flat:!0},"data-autofocus":t.focus==="cancel"&&h.value!==!0||void 0,onClick:V}));Ge(()=>t.prompt&&t.prompt.model,q),Ge(()=>t.options&&t.options.model,q);function D(){i.value.show()}function S(){i.value.hide()}function x(){e("ok",Ae(o.value)),S()}function V(){S()}function L(){e("hide")}function q(U){o.value=U}function A(U){T.value!==!0&&t.prompt.type!=="textarea"&&rl(U,13)===!0&&x()}function y(U,ne){return t.html===!0?j(ma,{class:U,innerHTML:ne}):j(ma,{class:U},()=>ne)}function w(){return[j(mU,{color:l.value,dense:!0,autofocus:!0,dark:s.value,...d.value,modelValue:o.value,"onUpdate:modelValue":q,onKeyup:A})]}function E(){return[j(bU,{color:l.value,options:t.options.items,dark:s.value,...d.value,modelValue:o.value,"onUpdate:modelValue":q})]}function v(){const U=[];return t.cancel&&U.push(j(Qf,C.value)),t.ok&&U.push(j(Qf,P.value)),j(j2,{class:t.stackButtons===!0?"items-end":"",vertical:t.stackButtons,align:"right"},()=>U)}function b(){const U=[];return t.title&&U.push(y("q-dialog__title",t.title)),t.progress!==!1&&U.push(j(ma,{class:"q-dialog__progress"},()=>j(u.value.component,u.value.props))),t.message&&U.push(y("q-dialog__message",t.message)),t.prompt!==void 0?U.push(j(ma,{class:"scroll q-dialog-plugin__form"},w)):t.options!==void 0&&U.push(j(lE,{dark:s.value}),j(ma,{class:"scroll q-dialog-plugin__form"},E),j(lE,{dark:s.value})),(t.ok||t.cancel)&&U.push(v()),U}function _(){return[j($2,{class:[a.value,t.cardClass],style:t.cardStyle,dark:s.value},b)]}return Object.assign(n,{show:D,hide:S}),()=>j(q2,{ref:i,onHide:L},_)}});function VS(t,e){for(const n in e)n!=="spinner"&&Object(e[n])===e[n]?(t[n]=Object(t[n])!==t[n]?{}:{...t[n]},VS(t[n],e[n])):t[n]=e[n]}function TU(t,e,n){return r=>{let s,i;const o=r.component!==void 0;if(o===!0){const{component:S,componentProps:x}=r;s=typeof S=="string"?n.component(S):S,i=x||{}}else{const{class:S,style:x,...V}=r;s=t,i=V,S!==void 0&&(V.cardClass=S),x!==void 0&&(V.cardStyle=x)}let a,l=!1;const u=Ne(null),h=xh(!1,"dialog"),d=S=>{if(u.value?.[S]!==void 0){u.value[S]();return}const x=a.$.subTree;if(x?.component){if(x.component.proxy&&x.component.proxy[S]){x.component.proxy[S]();return}if(x.component.subTree&&x.component.subTree.component&&x.component.subTree.component.proxy&&x.component.subTree.component.proxy[S]){x.component.subTree.component.proxy[S]();return}}console.error("[Quasar] Incorrectly defined Dialog component")},p=[],g=[],T={onOk(S){return p.push(S),T},onCancel(S){return g.push(S),T},onDismiss(S){return p.push(S),g.push(S),T},hide(){return d("hide"),T},update(S){if(a!==null){if(o===!0)Object.assign(i,S);else{const{class:x,style:V,...L}=S;x!==void 0&&(L.cardClass=x),V!==void 0&&(L.cardStyle=V),VS(i,L)}a.$forceUpdate()}return T}},P=S=>{l=!0,p.forEach(x=>{x(S)})},C=()=>{D.unmount(h),Lm(h),D=null,a=null,l!==!0&&g.forEach(S=>{S()})};let D=Tp({name:"QGlobalDialog",setup:()=>()=>j(s,{...i,ref:u,onOk:P,onHide:C,onVnodeMounted(...S){typeof i.onVnodeMounted=="function"&&i.onVnodeMounted(...S),en(()=>d("show"))}})},n);return a=D.mount(h),T}}const AU={install({$q:t,parentApp:e}){t.dialog=this.create=TU(IU,!0,e)}};let qi,Ud,yE=0,Ds=null,St={},Gs={};const DS={group:"__default_quasar_group__",delay:0,message:!1,html:!1,spinnerSize:80,spinnerColor:"",messageColor:"",backgroundColor:"",boxClass:"",spinner:Vo,customClass:""},NS={...DS};function SU(t){if(t?.group!==void 0&&Gs[t.group]!==void 0)return Object.assign(Gs[t.group],t);const e=ln(t)===!0&&t.ignoreDefaults===!0?{...DS,...t}:{...NS,...t};return Gs[e.group]=e,e}const Sn=Al({isActive:!1},{show(t){St=SU(t);const{group:e}=St;return Sn.isActive=!0,qi!==void 0?(St.uid=yE,Ud.$forceUpdate()):(St.uid=++yE,Ds!==null&&clearTimeout(Ds),Ds=setTimeout(()=>{Ds=null;const n=xh("q-loading");qi=Tp({name:"QLoading",setup(){Tr(()=>{Xf(!0)});function r(){Sn.isActive!==!0&&qi!==void 0&&(Xf(!1),qi.unmount(n),Lm(n),qi=void 0,Ud=void 0)}function s(){if(Sn.isActive!==!0)return null;const i=[j(St.spinner,{class:"q-loading__spinner",color:St.spinnerColor,size:St.spinnerSize})];return St.message&&i.push(j("div",{class:"q-loading__message"+(St.messageColor?` text-${St.messageColor}`:""),[St.html===!0?"innerHTML":"textContent"]:St.message})),j("div",{class:"q-loading fullscreen flex flex-center z-max "+St.customClass.trim(),key:St.uid},[j("div",{class:"q-loading__backdrop"+(St.backgroundColor?` bg-${St.backgroundColor}`:"")}),j("div",{class:"q-loading__box column items-center "+St.boxClass},i)])}return()=>j(nl,{name:"q-transition--fade",appear:!0,onAfterLeave:r},s)}},Sn.__parentApp),Ud=qi.mount(n)},St.delay)),n=>{if(n===void 0||Object(n)!==n){Sn.hide(e);return}Sn.show({...n,group:e})}},hide(t){if(Sn.isActive===!0){if(t===void 0)Gs={};else{if(Gs[t]===void 0)return;{delete Gs[t];const e=Object.keys(Gs);if(e.length!==0){const n=e[e.length-1];Sn.show({group:n});return}}}Ds!==null&&(clearTimeout(Ds),Ds=null),Sn.isActive=!1}},setDefaults(t){ln(t)===!0&&Object.assign(NS,t)},install({$q:t,parentApp:e}){t.loading=this,Sn.__parentApp=e,t.config.loading!==void 0&&this.setDefaults(t.config.loading)}});function RU(t){return gP(t)===!0?"__q_date|"+t.getTime():_P(t)===!0?"__q_expr|"+t.source:typeof t=="number"?"__q_numb|"+t:typeof t=="boolean"?"__q_bool|"+(t?"1":"0"):typeof t=="string"?"__q_strn|"+t:typeof t=="function"?"__q_strn|"+t.toString():t===Object(t)?"__q_objt|"+JSON.stringify(t):t}function CU(t){if(t.length<9)return t;const n=t.substring(0,8),r=t.substring(9);switch(n){case"__q_date":const s=Number(r);return new Date(Number.isNaN(s)===!0?r:s);case"__q_expr":return new RegExp(r);case"__q_numb":return Number(r);case"__q_bool":return r==="1";case"__q_strn":return""+r;case"__q_objt":return JSON.parse(r);default:return t}}function OS(){const t=()=>null;return{has:()=>!1,hasItem:()=>!1,getLength:()=>0,getItem:t,getIndex:t,getKey:t,getAll:()=>{},getAllKeys:()=>[],set:jn,setItem:jn,remove:jn,removeItem:jn,clear:jn,isEmpty:()=>!0}}function MS(t){const e=window[t+"Storage"],n=o=>{const a=e.getItem(o);return a?CU(a):null},r=o=>e.getItem(o)!==null,s=(o,a)=>{e.setItem(o,RU(a))},i=o=>{e.removeItem(o)};return{has:r,hasItem:r,getLength:()=>e.length,getItem:n,getIndex:o=>o<e.length?n(e.key(o)):null,getKey:o=>o<e.length?e.key(o):null,getAll:()=>{let o;const a={},l=e.length;for(let u=0;u<l;u++)o=e.key(u),a[o]=n(o);return a},getAllKeys:()=>{const o=[],a=e.length;for(let l=0;l<a;l++)o.push(e.key(l));return o},set:s,setItem:s,remove:i,removeItem:i,clear:()=>{e.clear()},isEmpty:()=>e.length===0}}const LS=ut.has.webStorage===!1?OS():MS("local"),FS={install({$q:t}){t.localStorage=LS}};Object.assign(FS,LS);const US=ut.has.webStorage===!1?OS():MS("session"),BS={install({$q:t}){t.sessionStorage=US}};Object.assign(BS,US);const PU={config:{},plugins:{Notify:or,Dialog:AU,Loading:Sn,LocalStorage:FS,SessionStorage:BS}};var kU=function(){return!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},tp;typeof window<"u"&&(typeof Promise<"u"?tp=new Promise(function(t){return window.addEventListener("load",t)}):tp={then:function(t){return window.addEventListener("load",t)}});function xU(t,e){e===void 0&&(e={});var n=e.registrationOptions;n===void 0&&(n={}),delete e.registrationOptions;var r=function(s){for(var i=[],o=arguments.length-1;o-- >0;)i[o]=arguments[o+1];e&&e[s]&&e[s].apply(e,i)};"serviceWorker"in navigator&&tp.then(function(){kU()?(VU(t,r,n),navigator.serviceWorker.ready.then(function(s){r("ready",s)}).catch(function(s){return bl(r,s)})):(qS(t,r,n),navigator.serviceWorker.ready.then(function(s){r("ready",s)}).catch(function(s){return bl(r,s)}))})}function bl(t,e){navigator.onLine||t("offline"),t("error",e)}function qS(t,e,n){navigator.serviceWorker.register(t,n).then(function(r){if(e("registered",r),r.waiting){e("updated",r);return}r.onupdatefound=function(){e("updatefound",r);var s=r.installing;s.onstatechange=function(){s.state==="installed"&&(navigator.serviceWorker.controller?e("updated",r):e("cached",r))}}}).catch(function(r){return bl(e,r)})}function VU(t,e,n){fetch(t).then(function(r){r.status===404?(e("error",new Error("Service worker not found at "+t)),vE()):r.headers.get("content-type").indexOf("javascript")===-1?(e("error",new Error("Expected "+t+" to have javascript content-type, but received "+r.headers.get("content-type"))),vE()):qS(t,e,n)}).catch(function(r){return bl(e,r)})}function vE(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()}).catch(function(t){return bl(emit,t)})}xU("/sw.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}});const DU="/";async function NU({app:t,router:e},n){let r=!1;const s=a=>{try{return e.resolve(a).href}catch{}return Object(a)===a?null:a},i=a=>{if(r=!0,typeof a=="string"&&/^https?:\/\//.test(a)){window.location.href=a;return}const l=s(a);l!==null&&(window.location.href=l)},o=window.location.href.replace(window.location.origin,"");for(let a=0;r===!1&&a<n.length;a++)try{await n[a]({app:t,router:e,ssrContext:null,redirect:i,urlPath:o,publicPath:DU})}catch(l){if(l&&l.url){i(l.url);return}console.error("[Quasar] boot error:",l);return}r!==!0&&(t.use(e),t.mount("#q-app"))}m2(Kw,PU).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",r=>r.map(s=>{if(s.status==="rejected"){console.error("[Quasar] boot error:",s.reason);return}return s.value.default})]:["all",r=>r.map(s=>s.default)];return Promise[e]([mt(()=>import("./pinia-C8n032Ua.js"),[]),mt(()=>Promise.resolve().then(()=>VF),void 0),mt(()=>import("./router-guards-BHVQoHAX.js"),[])]).then(r=>{const s=n(r).filter(i=>typeof i=="function");NU(t,s)})});export{$u as $,br as A,lE as B,qF as C,yR as D,BU as E,Pn as F,Tr as G,vp as H,Vo as I,Ta as J,Yi as K,oL as L,Ti as M,Ai as N,Ge as O,ZU as P,Qf as Q,GF as R,Tn as S,_B as T,Ks as U,$F as V,jF as W,WU as X,OU as Y,wc as Z,wP as _,Ji as a,nU as a$,ap as a0,mU as a1,q2 as a2,$2 as a3,ma as a4,j2 as a5,sB as a6,rB as a7,oB as a8,aB as a9,ut as aA,GU as aB,jn as aC,eP as aD,XC as aE,HU as aF,yB as aG,qU as aH,$U as aI,_V as aJ,IV as aK,gV as aL,Fv as aM,gB as aN,IB as aO,TB as aP,Zt as aQ,dR as aR,gP as aS,ln as aT,KU as aU,vU as aV,yi as aW,iu as aX,tU as aY,Bm as aZ,Z2 as a_,iB as aa,cB as ab,lp as ac,jU as ad,en as ae,HE as af,E2 as ag,v2 as ah,vB as ai,G2 as aj,w2 as ak,Zf as al,vn as am,nl as an,FU as ao,EU as ap,lB as aq,YU as ar,rl as as,Qw as at,y2 as au,_2 as av,zu as aw,hw as ax,YC as ay,tP as az,hB as b,lU as b0,cU as b1,ep as b2,rU as b3,Gr as b4,bU as b5,zU as b6,mB as b7,kF as b8,pB as b9,gi as bA,_S as bB,yS as bC,eU as bD,pU as bE,id as bF,fw as bG,yp as bH,F2 as bI,iE as bJ,U2 as bK,oE as bL,S2 as bM,KF as bN,Um as bO,DF as bP,zc as bQ,ef as bR,XF as bS,pP as bT,fP as bU,aL as ba,dB as bb,fB as bc,uB as bd,AF as be,EB as bf,AS as bg,g2 as bh,N2 as bi,us as bj,uS as bk,cS as bl,tf as bm,Gw as bn,SB as bo,AB as bp,Bl as bq,ql as br,b2 as bs,r2 as bt,wB as bu,bB as bv,I2 as bw,P2 as bx,JU as by,RB as bz,tB as c,$ as d,XU as e,j as f,tt as g,xn as h,bn as i,Vt as j,p2 as k,QU as l,LU as m,Yt as n,Pw as o,Dw as p,MU as q,Ne as r,ew as s,A0 as t,eB as u,eC as v,iR as w,Qs as x,xw as y,UU as z};
