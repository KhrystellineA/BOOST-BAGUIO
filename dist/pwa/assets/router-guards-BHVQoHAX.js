import{a as i}from"./index-BNMNkKPK.js";const c=()=>new Promise(s=>{if(i.currentUser)s(i.currentUser);else{const r=i.onAuthStateChanged(a=>{r(),s(a)})}}),h=({router:s})=>{s.beforeEach(async(r,a,e)=>{const o=await c(),d=r.matched.some(t=>t.meta.requiresAuth),m=r.matched.some(t=>t.meta.requiresGuest),n=r.matched.some(t=>t.meta.requiresAdmin),u=!!sessionStorage.getItem("adminRole");if(console.log("[Router Guard]",{path:r.path,currentUser:!!o,userEmail:o?.email,isAdmin:u,requiresAuth:d,requiresGuest:m,requiresAdmin:n}),m&&o)return u?(console.log("[Router Guard] Admin logged in, redirect to admin dashboard"),e("/admin/dashboard")):(console.log("[Router Guard] User logged in, redirect to home"),e("/"));if(d&&!o)return console.log("[Router Guard] Auth required but no user, redirect to login"),e(n?"/admin/adminlogin":"/login");if(n&&!u)return console.log("[Router Guard] Admin route but user is not admin"),e(o?"/":"/admin/adminlogin");console.log("[Router Guard] âœ… All checks passed, proceeding to route"),e()})};export{h as default};
